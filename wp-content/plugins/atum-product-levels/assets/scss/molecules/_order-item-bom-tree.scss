//
// BOM tree within order items
//-----------------------------

div {
	&#woocommerce-order-items, &#atum_order_items {
		
		tr {
			&.item.with-bom-tree {
				td {
					border-bottom: none;
				}
			}
			
			.order-item-icons {
				
				span {
					&.atmi-tree {
						color: $purple-pl;
						font-size: 20px !important;
					}
				}
			}
			
		}
		
		.order-item-mi-panel, .order-item-bom-tree-panel {
			
			.bom-tree-field {
				position: relative;
				
				&-actions {
					position: absolute;
					right: 5px;
					top: 0;
					color: $gray-600;
					
					a {
						font-size: 10px;
						color: $blue;
						text-decoration: none;
						transition: .2s ease-in-out;
						cursor: pointer;
						
						&:hover {
							color: $wp-link;
						}
						
						&:focus {
							outline: none;
							box-shadow: none;
						}
					}
				}
			}
			
			.atum-bom-tree {
				
				 > ul {
					 transition: .2s ease-in-out;
					
					&:not(.easytree-container) {
						opacity: 0;
					}
					
					&.easytree-container {
						border: none;
						padding: 0 !important;
						overflow: visible;
						opacity: 1;
						
						span {
							&.easytree- {
								&empty, &vline, &expander, &icon, &title, &custom-icon {
									color: $gray-600 !important;
									font-size: 12px;
									line-height: 1.5;
								}
								
								&expander {
									font-size: 16px;
									line-height: 1;
								}
								
								&active {
									span.easytree-title {
										color: $white !important;
									}
								}
								
							}
							
							&.ui-icon {
								background-image: none;
								width: auto;
								height: auto;
							}
							
						}
						
						.mi-node {
							
							&.easytree-active {
								.easytree-title {
									background-color: $success;
								}
							}
							
							span.easytree-expander {
								transform: rotate(90deg);
								font-size: 13px;
								margin-right: 0;
								padding-left: 4px;
								
								&:before {
									content: 'â†µ';
								}
							}
						}
						
					}
					
				}
				
			}
			
			// Editing order item.
			&.editing {
				
				.atum-bom-tree {
					
					&:not(.read-only) {
						
						ul.easytree-container {
							
							span.easytree-active {
								span.easytree-title {
									color: $gray-600 !important;
									background-color: transparent !important;
								}
							}
							
							[data-has_mi="yes"] {
								
								span.has-child {
									> span.ui-icon, > span.easytree-title {
										color: $blue !important;
									}
									
									> span.easytree-title {
										&:after {
											content: $atmi-pencil;
											font-family: $atum-icon-font;
											margin-left: 5px;
										}
									}
								}
								
							}
							
							[data-has_mi="no"] {
								.easytree-node.has-child {
									> .ui-icon, > .easytree-title {
										cursor: default;
									}
								}
							}
							
							.easytree-node {
								&:not(.has-child), [data-has_mi="no"] & &.has-child {
									> .ui-icon, > .easytree-title {
										cursor: default;
									}
								}
							}
							
						}
					}
					
				}
				
			}
			
		}
		
		.order-item-bom-tree-panel {
			
			td {
				padding-top: 0 !important;
			}
			
			.bom-tree-wrapper {
				padding-left: 68px;
				
				h6 {
					font-size: 12px;
					margin-bottom: 6px;
					margin-top: 0;
					color: $blue-dark;
					font-weight: bold;
				}
				
				.bom-tree-field {
					border: 1px solid $gray-500;
					border-radius: 5px;
					padding: $grid-gutter-width/2;
					display: inline-flex;
					width: 374px;
					max-width: 100%;
				}
				
				.collapse-tree {
					font-size: 16px;
					vertical-align: middle;
					margin-left: 3px;
					color: $gray-600;
					cursor: pointer;
					
					&.collapsed {
						&:before {
							content: $atmi-arrow-down-circle;
						}
					}
				}
			}
			
			&.editing {
				
				.collapse-tree {
					display: none;
				}
				
				.bom-tree-field {
					display: inline-flex !important;
				}
			}
			
		}
		
	}
}