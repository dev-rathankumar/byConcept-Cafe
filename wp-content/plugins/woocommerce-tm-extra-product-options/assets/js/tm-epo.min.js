!function(t,e,a){"use strict";function i(t,e,a,i){var o,r,n,c,l,d,s,p,m;return Number.isFinite(parseFloat(t))||(t=0),t*=1e4,e&&(o=e.attr("data-taxable"),r=e.attr("data-tax-rate"),n=e.attr("data-prices-include-tax"),c=e.attr("data-is-vat-exempt"),l=e.attr("data-non-base-location-prices"),d=e.attr("data-taxes-of-one"),s=e.attr("data-base-taxes-of-one"),p=e.attr("data-modded-taxes-of-one"),void 0!==e.data("current_variation")&&(o=(m=e.data("current_variation")).tc_is_taxable,r=m.tc_tax_rate,l=m.tc_non_base_location_prices,d=m.tc_taxes_of_one,s=m.tc_base_taxes_of_one,p=m.tc_modded_taxes_of_one),a&&a.data("tax-obj")&&("no"===(r=a.data("tax-obj")).has_fee?o=!1:"yes"===r.has_fee&&(o=!0),r=r.tax_rate),o&&("1"!==n||i?t=parseFloat(t)*(1+r/100):"1"===c?t="1"===l?parseFloat(t)-d*t:parseFloat(t)-s*t:"1"===l&&(t=parseFloat(t)-s*t+p*t))),t/=1e4}function o(t,e,a,i){var o,r,n,c,l;return Number.isFinite(parseFloat(t))||(t=0),t*=1e4,e&&(o=e.attr("data-taxable"),r=e.attr("data-tax-rate"),n=e.attr("data-base-taxes-of-one"),c=e.attr("data-prices-include-tax"),void 0!==e.data("current_variation")&&(o=(l=e.data("current_variation")).tc_is_taxable,r=l.tc_tax_rate,n=l.tc_base_taxes_of_one),a&&a.data("tax-obj")&&("no"===(r=a.data("tax-obj")).has_fee?o=!1:"yes"===r.has_fee&&(o=!0),r=r.tax_rate),(o&&"1"===c||i)&&(t=parseFloat(t)-parseFloat(n*t))),t/=1e4}function r(t,e,a){return Number.isFinite(parseFloat(t))||(t=0),e&&(t="incl"===e.attr("data-tax-display-mode")?i(t,e,a):o(t,e,a)),t}function n(t,e,i){return e+a.epoAPI.math.format(t,{symbol:Rt.currency_format_symbol,decimal:Jt.localDecimalSeparator,thousand:Jt.localThousandSeparator,precision:Rt.currency_format_num_decimals,format:Rt.currency_format})+i}function c(t,e,a,i,o){var c,l="",d=Rt.plus_sign+" ";return a||(t=r(t,e,o)),c=Math.abs(t),"minus"===Rt.tm_epo_global_options_price_sign&&(d=""),t<0&&(d=Rt.minus_sign+" "),e&&i&&(l=e.attr("data-tax-string")),void 0===l&&(l=""),n(c,d,l)}function l(t){var e,i,o,r=a(t);if(0!==r.length){if(r.is(".cpf-section"))return t.find(".tm-epo-field");if(e=r.attr("data-uniqid"),i=r.closest(".tc-extra-product-options").attr("data-epo-id"),Jt.getElementFromFieldCache&&Jt.getElementFromFieldCache[i]&&Jt.getElementFromFieldCache[i][e])return Jt.getElementFromFieldCache[i][e];if((o=r.attr("class").split(" ").map(function(t){if(-1!==t.indexOf("cpf-type-",0))return t}).filter(function(t){if(null!==t&&void 0!==t)return t})).length>0)switch(o=o[0]){case"cpf-type-radio":return Jt.getElementFromFieldCache[i]=[],Jt.getElementFromFieldCache[i][e]=r.find(".tm-epo-field.tmcp-radio"),Jt.getElementFromFieldCache[i][e];case"cpf-type-checkbox":return Jt.getElementFromFieldCache[i]=[],Jt.getElementFromFieldCache[i][e]=r.find(".tm-epo-field.tmcp-checkbox"),Jt.getElementFromFieldCache[i][e];case"cpf-type-select":return Jt.getElementFromFieldCache[i]=[],Jt.getElementFromFieldCache[i][e]=r.find(".tm-epo-field.tmcp-select"),Jt.getElementFromFieldCache[i][e];case"cpf-type-textarea":return Jt.getElementFromFieldCache[i]=[],Jt.getElementFromFieldCache[i][e]=r.find(".tm-epo-field.tmcp-textarea"),Jt.getElementFromFieldCache[i][e];case"cpf-type-textfield":return Jt.getElementFromFieldCache[i]=[],Jt.getElementFromFieldCache[i][e]=r.find(".tm-epo-field.tmcp-textfield"),Jt.getElementFromFieldCache[i][e];case"cpf-type-color":return Jt.getElementFromFieldCache[i]=[],Jt.getElementFromFieldCache[i][e]=r.find(".tm-epo-field.tm-color-picker"),Jt.getElementFromFieldCache[i][e];case"cpf-type-range":return Jt.getElementFromFieldCache[i]=[],Jt.getElementFromFieldCache[i][e]=r.find(".tm-epo-field.tmcp-range"),Jt.getElementFromFieldCache[i][e];case"cpf-type-date":return Jt.getElementFromFieldCache[i]=[],Jt.getElementFromFieldCache[i][e]=r.find(".tm-epo-field.tmcp-date"),Jt.getElementFromFieldCache[i][e];case"cpf-type-variations":return Jt.getElementFromFieldCache[i]=[],Jt.getElementFromFieldCache[i][e]=r.closest(".cpf-section").find(".tm-epo-field.tm-epo-variation-element"),Jt.getElementFromFieldCache[i][e]}else;}}function d(t){var e="input[name^='variation_id']";return t.find("input.variation_id").length>0&&(e="input.variation_id"),e}function s(t,e){var a=d(t),i=t.find(a);return e&&(i=i.not(e)),i}function p(t){return t.find(d(t)).val()||0}function m(t){return t.find(Jt.qtySelector).last()}function _(t){return parseFloat(m(t).val())}function f(t,e,a){Gt[Gt.length]={name:t,selector:e,func:a}}function u(t,e){var i,o;return(t=a(t)).is(".cpf_hide_element")?(i=t,t=t.find(".tmcp-field, .tmcp-fee-field")):i=t.closest(".cpf_hide_element"),!1!==i.data("isactive")&&!1!==i.closest(".cpf-section").data("isactive")?(o=t.first(),t.prop("disabled",!1),"yes"!==Rt.tm_epo_show_only_active_quantities?o.is(":radio, .cpf-type-radio")||o.is(":checkbox, .cpf-type-checkbox")?(t.filter(":checked").closest(".tmcp-field-wrap").find(".tm-qty").prop("disabled",!1),t.not(":checked").closest(".tmcp-field-wrap").find(".tm-qty").prop("disabled",!0)):(o.is("select, .cpf-type-select"),o.val()?i.find(".tm-qty").prop("disabled",!1):i.find(".tm-qty").prop("disabled",!0)):e||i.find(".tm-quantity").trigger("showhide.cpfcustom"),o.is(".cpf_hide_element")||(t.removeClass("tcdisabled").addClass("tcenabled"),t.is(".tmcp-upload")&&t.next(".tmcp-upload-hidden").length&&t.next(".tmcp-upload-hidden").removeClass("tcdisabled").addClass("tcenabled").prop("disabled",!1)),t.trigger({type:"tm-field-is-active",field:t,value:!0}),!0):(t.is(".cpf_hide_element")||(t.prop("disabled",!0).removeClass("tcenabled").addClass("tcdisabled"),i.find(".tm-qty").prop("disabled",!0),t.is(".tmcp-upload")&&t.next(".tmcp-upload-hidden").length&&t.next(".tmcp-upload-hidden").removeClass("tcenabled").addClass("tcdisabled").prop("disabled",!0)),t.trigger({type:"tm-field-is-active",field:t,value:!1}),!1)}function g(t,e,i){var o,r,n=a(t),c=n.attr("data-epo_id"),l=n.attr("data-product_id"),d=a(".variations_form[data-epo_id='"+c+"'][data-product_id='"+l+"']"),s="input[name^='variation_id']";if(0===d.length)return!1;switch(0===(r=d.find(s)).length&&(s="input.variation_id",0===(r=d.find(s)).length&&(r=d.closest(".tc-epo-element-product-li-container").find(".product-variation-id"))),null!==t&&null!==e&&void 0!==t&&void 0!==e&&!1!==t&&!1!==e&&(e=e?parseInt(e,10):-1),o=parseInt(r.val(),10),Number.isFinite(o)||(o=""),Number.isFinite(e)||(e=""),i){case"is":return""!==o&&o===e;case"isnot":return""!==o&&o!==e;case"isempty":return""===o||0===o;case"isnotempty":return""!==o&&0!==o;case"startswith":return o.toString().startsWith(e);case"endswith":return o.toString().endsWith(e);case"greaterthan":return parseFloat(o)>parseFloat(e);case"lessthan":return parseFloat(o)<parseFloat(e)}return!1}function h(t,e,i){if(null===t||null===e)return!1;switch(t=encodeURIComponent(t),e=a.qtranxj_split?encodeURIComponent(a.qtranxj_split(decodeURIComponent(e))[Zt.language]):encodeURIComponent(decodeURIComponent(e)),t=t?t.toLowerCase():"",e=e?e.toLowerCase():"",t=t.toString(),e=e.toString(),i){case"is":return null!==t&&t===e;case"isnot":return null!==t&&t!==e;case"isempty":return!("undefined"!==t&&void 0!==t&&""!==t);case"isnotempty":return"undefined"!==t&&void 0!==t&&""!==t;case"startswith":return t.startsWith(e);case"endswith":return t.endsWith(e);case"greaterthan":return parseFloat(t)>parseFloat(e);case"lessthan":return parseFloat(t)<parseFloat(e)}return!1}function v(t,e){var i,o,r,n=!0,c=t.find(".cpf_hide_element");if(t.is(".tc-hidden")){if("isnotempty"===e)return!1;if("isempty"===e)return!0}return a(c).each(function(t,c){var l;if(c=a(c),u(c))if((l=c.attr("class").split(" ").map(function(t){if(-1!==t.indexOf("cpf-type-",0))return t}).filter(function(t){if(null!==t&&void 0!==t)return t})).length>0){switch(l=l[0]){case"cpf-type-radio":o=c.find("input.tm-epo-field.tmcp-radio:checked"),"isnotempty"===e?(n=n&&o.length>0,o.length>0&&(i=o.length)):"isempty"===e&&(n=n&&0===o.length);break;case"cpf-type-checkbox":r=c.find("input.tm-epo-field.tmcp-checkbox:checked"),"isnotempty"===e?(n=n&&r.length>0,r.length>0&&(i=r.length)):"isempty"===e&&(n=n&&0===r.length);break;case"cpf-type-select":(i=c.find("select.tm-epo-field.tmcp-select").val())&&(i=i.slice(0,i.lastIndexOf("_")));break;case"cpf-type-textarea":i=c.find("textarea.tm-epo-field.tmcp-textarea").val();break;case"cpf-type-textfield":i=c.find("input.tm-epo-field.tmcp-textfield").val();break;case"cpf-type-color":i=c.find("input.tm-epo-field.tm-color-picker").val();break;case"cpf-type-range":i=c.find("input.tm-epo-field.tmcp-range").val()}n=n&&h(i,"",e)}else n=n&&!1}),n}function y(t){var e,i,o,r,n,c=a(t.element),l=t.operator,d=t.value;if(!c.length)return!1;if(c.is(".cpf-section"))return v(c,l);if((n=c.attr("class").split(" ").map(function(t){if(-1!==t.indexOf("cpf-type-",0))return t}).filter(function(t){if(null!==t&&void 0!==t)return t})).length>0){switch(n=n[0]){case"cpf-type-radio":if(c.find("input.tm-epo-field.tmcp-radio"),i=c.find("input.tm-epo-field.tmcp-radio:checked"),"is"===l||"isnot"===l){if(0===i.length)return!1;(e=c.find("input.tm-epo-field.tmcp-radio:checked").val())&&(e=e.slice(0,e.lastIndexOf("_")))}if("isnotempty"===l)return i.length>0;if("isempty"===l)return 0===i.length;break;case"cpf-type-checkbox":if(c.find("input.tm-epo-field.tmcp-checkbox"),o=c.find("input.tm-epo-field.tmcp-checkbox:checked"),"is"===l||"isnot"===l)return 0!==o.length&&(r=!1,o.each(function(t,i){if((e=a(i).val())&&(e=e.slice(0,e.lastIndexOf("_"))),h(e,d,l))r=!0;else if("isnot"===l)return r=!1,!1}),r);if("isnotempty"===l)return o.length>0;if("isempty"===l)return 0===o.length;break;case"cpf-type-select":(e=c.find("select.tm-epo-field.tmcp-select").val())&&(e=e.slice(0,e.lastIndexOf("_")));break;case"cpf-type-textarea":e=c.find("textarea.tm-epo-field.tmcp-textarea").val();break;case"cpf-type-textfield":e=c.find("input.tm-epo-field.tmcp-textfield").val();break;case"cpf-type-color":e=c.find("input.tm-epo-field.tm-color-picker").val();break;case"cpf-type-range":e=c.find("input.tm-epo-field.tmcp-range").val();break;case"cpf-type-variations":return g(c,d,l)}return h(e,d,l)}return!1}function b(t,e){t.each(function(){var t=a(this),i=parseInt(t.data("matches"),10),o=t.data("toggle"),r=t.data("what"),n=t.data("fields"),c=0,l=!1;switch(o){case"show":l=!1;break;case"hide":l=!0}a.each(n,function(t,i){var o=!0;"cpflogic"===e&&(o=u(a(i.element))),o&&y(i)&&(c=parseInt(c,10)+1)}),"all"===r?i===c&&(l=!l):c>0&&(l=!l),l?("cpflogic"!==e||t.data("did_initial_activation")||(t.find(".tm-epo-field").each(function(e,i){(i=a(i)).data("initial_activation")||t.closest(".cpf-section").is(".tc-hidden")||!u(i)||(i.trigger("tc_element_epo_rules"),i.data("initial_activation",1))}),t.data("did_initial_activation",1)),t.removeClass("tc-hidden")):t.addClass("tc-hidden"),t.data("isactive",l)})}function w(t){var e,i=[];a(t).length||(t="body"),(e=(t=a(t)).find(".iscpfdependson")).each(function(t,e){a(e).each(function(t,e){b(a(e))})}),e.each(function(t,e){a(e).each(function(t,e){b(a(e),"cpflogic")})}),e.each(function(t,e){a(e).each(function(t,e){(e=a(e)).is(".cpf-section")&&(e=e.find(".cpf_hide_element")),e.each(function(t,e){u(a(e).find(".tm-epo-field"))})})}),a().selectric&&a(".tm-extra-product-options select").selectric("refresh"),setTimeout(function(){a(".tm-owl-slider").each(function(){a(this).trigger("refresh.owl.carousel")})},200),t.find(".tm-product-image:checked,select.tm-product-image").each(function(){var t=a(this);u(t)&&""!==t.val()&&i.push(t)}),i.length&&i[i.length-1].trigger("tm_trigger_product_image"),te.trigger("cpflogicrun"),te.trigger("tmlazy"),te.trigger("cpflogicdone")}function x(t){return"object"==typeof t&&"toggle"in t&&"what"in t&&"rules"in t&&t.rules.length>0}function k(t){var e,i,o,r,n,c,l,d,s,p,m,_,f=a(t),u=f.find(".cpf-section");e=!f.is(".cpf-section")&&u,f.each(function(t,u){(i=a(u).is(".cpf-section")?a(u):a(u).find(".cpf-section")).each(function(t,i){o=a(i),r=o.data("logic"),n=parseInt(o.data("haslogic"),10),c=[],1===n&&x(r)&&(a.each(r.rules,function(t,a){a&&(l=a.section,d=a.element,s=a.operator,p=a.value,e?(m=e.filter("[data-uniqid='"+l+"']"),_=d!==l?m.find(".cpf_hide_element").eq(d):m):_=d!==l?f.find(".cpf_hide_element").eq(d):m,c.push({element:_,operator:s,value:p}))}),o.data("iscpfdependson")?o.cpfdependson(o.data("cpfdependson-fields"),r.toggle,r.what,!0):(o.data("cpfdependson-fields",c),o.cpfdependson(c,r.toggle,r.what)))})})}function F(t){var e,i,o,r,n,c,l,d,s,p,m=a(t),_=m.find(".cpf-section");e=!m.is(".cpf-section")&&_,m.find(".cpf_hide_element").each(function(t,_){var f=[];i=a(_),o=i.data("logic"),1===(r=parseInt(i.data("haslogic"),10))&&x(o)&&(a.each(o.rules,function(t,a){a&&(n=a.section,c=a.element,l=a.operator,d=a.value,e?(s=e.filter("[data-uniqid='"+n+"']"),p=c!==n?s.find(".cpf_hide_element").eq(c):s):p=c!==n?m.find(".cpf_hide_element").eq(c):s,f.push({element:p,operator:l,value:d}))}),i.data("iscpfdependson")?i.cpfdependson(i.data("cpfdependson-fields"),o.toggle,o.what,!0):(i.data("cpfdependson-fields",f),i.cpfdependson(f,o.toggle,o.what)))})}function C(t,e){var a,i,o,r;return e&&(a=e.attr("data-taxable"),i=e.attr("data-tax-rate"),o=e.attr("data-tax-display-mode"),r=e.attr("data-prices-include-tax"),a&&"incl"===o&&"1"!==r&&(t=parseFloat(t)/(1+i/100))),t}function I(t,e,a,i,o){var c,l="",d="";return a||(t=r(t,e,o)),c=Math.abs(t),e&&i&&(l=e.attr("data-tax-string")),void 0===l&&(l=""),t<0&&(d=Rt.minus_sign+" "),n(c,d,l)}function A(t,e,a,i,o){P(t,e,a,i,o,!0)}function P(t,e,i,o,r,n){var c,l,d,s,p=a(t);0!==p.length&&(s=(c=p.closest(".tmcp-field-wrap")).find(".tm-epo-field"),!n&&"1"===s.attr("data-no-price-change")&&s.data("price-changed")||(e=a.epoAPI.applyFilter("tc_adjust_update_price_price",e),i=a.epoAPI.applyFilter("tc_adjust_update_price_formated_price",i,e),o=a.epoAPI.applyFilter("tc_adjust_update_price_original_price",o),r=a.epoAPI.applyFilter("tc_adjust_update_price_original_formated_price",r,o),Number.isFinite(parseFloat(o))||(o=0),Number.isFinite(parseFloat(e))||(e=0),l=c.find(".before-amount,.after-amount"),d={price:i,original_price:r},"yes"===Rt.tm_epo_auto_hide_price_if_zero&&!1===a.tmempty(e)||"yes"!==Rt.tm_epo_auto_hide_price_if_zero?!n&&s.length>0&&("1"===s.attr("data-no-price")||"variable"===s.attr("data-type")&&!s.data("price")||s.is(".tmcp-select")&&!s.children("option:selected").data("price"))?(p.empty(),l.addClass("tm-hidden")):(o&&void 0!==o&&parseFloat(o)!==parseFloat(e)?p.html(a.epoAPI.template.html(Jt.templateEngine.sale_price,{price:d})):p.html(a.epoAPI.template.html(Jt.templateEngine.price,{price:d})),l.removeClass("tm-hidden")):(p.empty(),l.addClass("tm-hidden"))))}function S(t,e){var i={};return t.find(".variations select, .tc-epo-variable-product-selector").each(function(){var t,e;t=void 0!==a(this).data("attribute_name")?a(this).data("attribute_name"):a(this).attr("name"),e=a(this).val(),i[t]=e}),i}function q(t,e,i){var o=[],r=S(t,i),n=!0;t.find(".cpf-type-variations").each(function(i,n){var c,l,d=a(n).find(".tm-epo-variation-element"),s=!1;o[i]=!0,d.is("select")?(c=a.epoAPI.dom.id(d.attr("data-tm-for-variation")),(l=d.val())&&(o[i]=!1),d.children("option").each(function(e,i){s=!1,t.find("[data-attribute_name='attribute_"+c+"']").children("option").each(function(){if(a(this).attr("value")===a(i).attr("value"))return s=!0,!1}),s?a(i).removeAttr("disabled").show():a(i).attr("disabled","disabled").hide()})):d.each(function(t,n){var d,s,p=a(n),m=p.closest("li"),_=m.find(".tm-epo-variation-element"),f=a.extend(!0,{},r);c=p.attr("data-tm-for-variation"),l=p.val(),p.is(":checked")&&(o[i]=!1),f["attribute_"+c]=l,s=(d=a.fn.tm_find_matching_variations(e,f).shift())&&"is_in_stock"in d&&d.is_in_stock,d&&s?(p.removeAttr("disabled").removeClass("tm-disabled"),m.removeClass("tm-attribute-disabled").fadeTo("fast",1,function(){a(this).css("opacity","")}),_.removeAttr("disabled"),_.removeAttr("data-tm-disabled")):(p.attr("disabled","disabled").addClass("tm-disabled"),_.attr("disabled","disabled"),_.attr("data-tm-disabled","disabled"),m.addClass("tm-attribute-disabled").fadeTo("fast",.5),s||m.find("label").off())})}),o&&(o.shift(),a.each(o,function(t,e){if(!1===e)return n=!1,!1}),n&&t.find(".cpf-type-variations").first().each(function(t,e){var i,o,r;(i=a(e).find(".tm-epo-variation-element")).is("select")||i.each(function(t,e){e=a(e),o=e.closest("li"),r=o.find(".tm-epo-variation-element"),e.removeAttr("disabled").removeClass("tm-disabled"),o.removeClass("tm-attribute-disabled").stop().css("opacity",""),r.removeAttr("disabled"),r.removeAttr("data-tm-disabled")})}))}function E(e,i){var o,r=e.data("product_variations"),n=parseInt(e.data("product_id"),10),c=e.data("globalVariationObject")||!1;n||(n=e.data("tc_product_id")),!n&&e.is(Jt.compositeSelector)&&(n=(o=e.find(".component_options").data("options_data"))[0].option_id,r||(r=e.find(".details.component_data").data("product_variations"))),i.is_associated||(!r&&t.product_variations&&t.product_variations.product_id&&(r=t.product_variations.product_id),!r&&t.product_variations&&(r=t.product_variations),!r&&t["product_variations_"+n]&&(r=t["product_variations_"+n])),r?q(e,r,i):c?q(e,c.variations,i):(o={action:"woocommerce_tm_get_variations_array",post_id:n},a.post(Rt.ajax_url,o,function(t){c=t,e.data("globalVariationObject",t),q(e,c.variations,i)},"json"))}function T(t,e){var i,o;return void 0!==e&&(t=a(t),i=t.find(".tm-epo-variation-element").first(),o=i.closest(".tm-epo-variation-section"),i.length?(o.find(".tm-stock").remove(),o.append('<div class="tm-stock">'+e+"</div>"),!0):(t.find(".tm-stock").remove(),t.find(".variations").after('<div class="tm-stock">'+e+"</div>"),!0))}function j(t,e){var a;"no"!==Rt.tm_epo_global_move_out_of_stock&&((a=t.find(".woocommerce-variation-availability").last()).length||(a=t.find(".stock").last()),a.length?(e.find(".tm-stock").remove(),T(e,a.prop("outerHTML"))&&a.remove()):e.find(".tm-stock").remove())}function z(t,e,a){var i,o="";return a&&(o=o+"[value='"+a+"']"),e||(e=t),0===(i=e.find(Jt.addToCartSelector+o)).length&&(i=e.find(Jt.tcAddToCartSelector+o)),i.last()}function O(t,e,a,i){return a||(a="form"),z(t,e,i).closest(a)}function D(t,e,a,i){return O(t,e,a,i)}function N(t){var e=a.epoAPI.applyFilter("tcGetNativePricesBlockSelector",".single_variation .price",t);return a(t).find(e).not(".tc-price")}function B(){ee.on("click.cpfurl change.cpfurl tmredirect",".use_url_container .tmcp-radio, .use_url_container .tmcp-radio+label",function(e){var i=a(this).attr("data-url");i&&t.location!==i&&(e.preventDefault(),t.location=i)}),ee.on("change.cpfurl tmredirect",".use_url_container .tmcp-select",function(e){var i=a(this).children("option:selected").attr("data-url");i&&t.location!==i&&(e.preventDefault(),t.location=i)})}function H(t,e,i){a.tcFloatingTotalsBox(t,e,i)}function L(t,e,a){var i,o,r;"object"==typeof e?(o=e.has_epo,r=e.this_epo_container,o=o&&(r.find(".tmcp-fee-field").length||r.find(".tmcp-field").not(".cpf-type-variations .tmcp-field").length)):o=e,o&&"yes"===Rt.tm_epo_hide_add_cart_button&&(i=t.find(Jt.addToCartButtonSelector).first(),a?i.removeClass("tc-hide-add-to-cart-button"):i.addClass("tc-hide-add-to-cart-button"))}function M(e,i){var o,r,n,c,l=a.tcepo.errorObject[i]||e;l&&("yes"!==Rt.tm_epo_disable_error_scroll&&(r=(o=l.closest(".cpf-section")).find(".tm-section-link"),n=l.closest(".cpf_hide_element"),o.find(".tm-toggle").length&&o.find(".tm-toggle").trigger("openwrap.tmtoggle"),t.tc_validation_offset||(t.tc_validation_offset=-100),o.is(".section_popup")?(ae.tcScrollTo(r,300,t.tc_validation_offset),r.trigger("click.tmsectionpoplink")):o.is(".tm-owl-slider-section")?(c=l.closest(".owl-item").index(),o.find(".tcowl-carousel").trigger("to.owl.carousel",[c,100]),setTimeout(function(){o.find(".tcowl-carousel").trigger("refresh.owl.carousel"),n.length>0&&ae.tcScrollTo(n,300,t.tc_validation_offset)},200)):n.length>0&&ae.tcScrollTo(n,300,t.tc_validation_offset)),e||(a.tcepo.errorObject[i]=!1))}function U(t,e){var i,o,r,n=parseInt(t.attr("data-limit"),10),c=!1;return!(n>0&&(c=0,t.closest(".tm-extra-product-options-checkbox").find("input.tm-epo-field[type='checkbox']:checked").each(function(){o=a(this),(r=o.closest("li.tmcp-field-wrap").find("input.tm-qty")).length>0?((i=parseInt(r.val(),10))<=0&&(i=1),c=parseInt(c,10)+i):c=parseInt(c,10)+1}),c>n))||(e&&t.prop("checked","").trigger("change"),!1)}function J(t,e){var i,o,r,n=parseInt(t.attr("data-exactlimit"),10),c=!1;return!(n>0&&(c=0,t.closest(".tm-extra-product-options-checkbox").find("input.tm-epo-field[type='checkbox']:checked").each(function(){o=a(this),(r=o.closest("li.tmcp-field-wrap").find("input.tm-qty")).length>0?((i=parseInt(r.val(),10))<=0&&(i=1),c=parseInt(c,10)+i):c=parseInt(c,10)+1}),c>n))||(e&&t.prop("checked","").trigger("change"),!1)}function R(t,e,i){var o,r,n,c,l,d,s,p,m,_,f=!0,g=!1;return t.each(function(){_=a(this),(o=_.find("[type='checkbox'][data-limit]")).length&&u(o)&&(r=parseInt(o.attr("data-limit"),10),n=0,_.find("input.tm-epo-field[type='checkbox']:checked").each(function(){c=a(this),(d=c.closest("li.tmcp-field-wrap").find("input.tm-qty")).length>0?((l=parseInt(d.val(),10))<=0&&(l=1),n=parseInt(n,10)+l):n=parseInt(n,10)+1}),s=_.closest(".cpf_hide_element"),p=s.find("div.tm-error-min"),r<n?(f=!1,g=_,m=1===r?Rt.tm_epo_global_validator_messages.epolimitsingle.replace("{0}",r):Rt.tm_epo_global_validator_messages.epolimit.replace("{0}",r),p.length&&p.remove(),"before"===Rt.tm_epo_global_error_label_placement?_.before('<div class="tm-error-min tm-error">'+m+"</div>"):_.after('<div class="tm-error-min tm-error">'+m+"</div>"),e.find(Jt.addToCartButtonSelector).first().removeClass("disabled loading fpd-disabled").removeAttr("disabled")):p.remove())}),g&&(a.tcepo.errorObject[i]=g),f}function Q(t,e,i){a.tcepo.formSubmitEvents[i][a.tcepo.formSubmitEvents[i].length]={trigger:function(){return R(t,e,i)},on_true:function(){return!0},on_false:function(){return M(a(t).find(".tm-epo-field").first(),i),!0}}}function Z(t,e,i){var o,r,n,c,l,d,s,p,m,_,f=!0,g=!1;return t.each(function(){_=a(this),(o=_.find("[type='checkbox'][data-exactlimit]")).length&&u(o)&&(r=parseInt(o.attr("data-exactlimit"),10),n=0,_.find("input.tm-epo-field[type='checkbox']:checked").each(function(){c=a(this),(d=c.closest("li.tmcp-field-wrap").find("input.tm-qty")).length>0?((l=parseInt(d.val(),10))<=0&&(l=1),n=parseInt(n,10)+l):n=parseInt(n,10)+1}),s=_.closest(".cpf_hide_element"),p=s.find("div.tm-error-min"),r!==n?(f=!1,g=_,m=1===r?Rt.tm_epo_global_validator_messages.epoexactsingle.replace("{0}",r):Rt.tm_epo_global_validator_messages.epoexact.replace("{0}",r),p.length&&p.remove(),"before"===Rt.tm_epo_global_error_label_placement?_.before('<div class="tm-error-min tm-error">'+m+"</div>"):_.after('<div class="tm-error-min tm-error">'+m+"</div>"),e.find(Jt.addToCartButtonSelector).first().removeClass("disabled loading fpd-disabled").removeAttr("disabled")):p.remove())}),g&&(a.tcepo.errorObject[i]=g),f}function W(t,e,i){a.tcepo.formSubmitEvents[i][a.tcepo.formSubmitEvents[i].length]={trigger:function(){return Z(t,e,i)},on_true:function(){return!0},on_false:function(){return M(a(t).find(".tm-epo-field").first(),i),!0}}}function $(t,e){var i,o,r,n,c,l,d,s,p,m=!0,_=!1;return t.each(function(){var t;(t=(p=a(this)).find("[type='checkbox'][data-minimumlimit]")).length&&u(t)&&(i=parseInt(t.attr("data-minimumlimit"),10),o=0,p.find("input.tm-epo-field[type='checkbox']:checked").each(function(){r=a(this),(c=r.closest("li.tmcp-field-wrap").find("input.tm-qty")).length>0?((n=parseInt(c.val(),10))<=0&&(n=1),o=parseInt(o,10)+n):o=parseInt(o,10)+1}),l=p.closest(".cpf_hide_element"),d=l.find("div.tm-error-min"),i>o?(m=!1,_=p,s=1===i?Rt.tm_epo_global_validator_messages.epominsingle.replace("{0}",i):Rt.tm_epo_global_validator_messages.epomin.replace("{0}",i),d.length&&d.remove(),"before"===Rt.tm_epo_global_error_label_placement?p.before('<div class="tm-error-min tm-error">'+s+"</div>"):p.after('<div class="tm-error-min tm-error">'+s+"</div>")):d.remove())}),_&&(a.tcepo.errorObject[e]=_),m}function X(t,e){a.tcepo.formSubmitEvents[e][a.tcepo.formSubmitEvents[e].length]={trigger:function(){return $(t,e)},on_true:function(){return!0},on_false:function(){return M(!1,e),!0}}}function G(t,e,i,o){return null===t?0:("object"==typeof t&&(t=t[0]),Number.isFinite(parseFloat(t))||(t=0),i&&(t=a.epoAPI.applyFilter("tc_apply_dpd",t,e,i,o)),t)}function V(t,e){var i=0;return t.length>0&&(i=t.data("regular-price")),i=a.epoAPI.applyFilter("tc_calculate_product_regular_price",i,t),(!e||!1!==i)&&(i=parseFloat(i),Number.isFinite(i)||(i=0),i)}function Y(t,e){var i=0;return t.length>0&&(i=t.data("price")),i=a.epoAPI.applyFilter("tc_calculate_product_price",i,t),(!e||!1!==i)&&(i=parseFloat(i),Number.isFinite(i)||(i=0),i)}function K(t,e,i,o){var r,n,c,l,d,s,p,m,_,f=t.toString(),g=0,h=0,v=e.closest(".cpf_hide_element"),y=i.this_epo_totals_container.data("tc_totals_ob"),b=v.find(".tmcp-field, .tmcp-fee-field").filter(":checked").index(e),w=v.find(".tmcp-field, .tmcp-fee-field").index(e),x=i.is_associated?i.this_epo_container:i.this_epo_container.not(Jt.epoSelector+" "+Jt.associatedEpoSelector);-1!==b||e.is(".tmcp-checkbox, .tmcp-radio")||(b=0),o||e.data("addedtcEpoBeforeOptionPriceCalculation")||(te.on("tcEpoBeforeOptionPriceCalculation.math",function(){et(i,e,void 0,void 0,void 0,!0)}),e.data("addedtcEpoBeforeOptionPriceCalculation",1)),e.is(".tmcp-field")?(m=Tt(i,v,".tmcp-field",0,0,[],!0),_=Tt(i,v,".tmcp-field",0,0,[],!0,!0)):e.is(".tmcp-fee-field")&&(m=Tt(i,v,".tmcp-fee-field",0,0,[],!0),_=Tt(i,v,".tmcp-fee-field",0,0,[],!0,!0)),void 0!==y?(f=f.replace(/{quantity}/g,y.qty),f=f.replace(/{product_price}/g,y.product_price)):(f=f.replace(/{quantity}/g,0),f=f.replace(/{product_price}/g,0)),f=void 0!==_.floatingBoxData&&void 0!==_.floatingBoxData[w]?f.replace(/{this.value}/g,_.floatingBoxData[w].valueText).replace(/{this.value.length}/g,_.floatingBoxData[w].valueText.length):f.replace(/{this.value}/g,"").replace(/{this.value.length}/g,0),(f=f.replace(/{this.count}/g,m.floatingBoxData.length).replace(/{this.count.quantity}/g,m.floatingBoxData.map(function(t){return t.quantity}).reduce(function(t,e){return a.epoAPI.math.toFloat(t)+a.epoAPI.math.toFloat(e)},0)).replace(/{this.quantity}/g,e.data("tm-quantity"))).match(/\{(\s)*?field\.([^}]*)}/)&&f.match(/\{(\s)*?field\.([^}]*)}/g).forEach(function(t){if(void 0!==(r=t.match(/\{(\s)*?field\.([^}]*)}/))[2]&&"string"==typeof r[2]&&-1!==(d=r[2].lastIndexOf("."))&&(p=r[2].substr(0,d),s=r[2].substr(d+1),-1!==a.inArray(s,["price","value","quantity","count"]))){if((n=x.find("[data-uniqid='"+a.epoAPI.util.escapeSelector(p)+"']")).length){if(c=n.find(".tmcp-field, .tmcp-fee-field"),o||e.data("addedfieldtcEpoBeforeOptionPriceCalculation")||(te.on("tcEpoBeforeOptionPriceCalculation.math",function(){et(i,e,void 0,void 0,void 0,!0),e.trigger("tm-math-select-change-html-all")}),e.data("addedfieldtcEpoBeforeOptionPriceCalculation",1)),c=c.first(),g=0,u(n)){switch(c.is(".tmcp-field")?g=Tt(i,n,".tmcp-field",0,0,[],!0):c.is(".tmcp-fee-field")&&(g=Tt(i,n,".tmcp-fee-field",0,0,[],!0)),s){case"price":g=g.total;break;case"value":g.floatingBoxData&&(g=g.floatingBoxData.map(function(t){return t.valueText}).reduce(function(t,e){return a.epoAPI.math.toFloat(t)+a.epoAPI.math.toFloat(e)},0));break;case"quantity":g.floatingBoxData&&(g=g.floatingBoxData.map(function(t){return t.quantity}).reduce(function(t,e){return a.epoAPI.math.toFloat(t)+a.epoAPI.math.toFloat(e)},0));break;case"count":g.floatingBoxData&&(g=g.floatingBoxData.length)}g=a.epoAPI.math.toFloat(g),Number.isFinite(g)||(g=0)}}else g=0;l=new RegExp(r[0]),f=Number.isFinite(g)?f.replace(l,g):f.replace(l,"'"+g+"'")}});try{h=ie.eval(f)}catch(t){h=0}return h}function tt(t,e){var i,o,r,n,c,l,d,s,p=a(e),m=p;return i=t.main_cart,d="input[name^='variation_id']",i.find("input.variation_id").length>0&&(d="input.variation_id"),(o=i.find(d).val())||(o=0),p.is("select")&&(m=p.find("option:selected")),r=a.epoAPI.util.parseJSON(m.attr("data-rules")),n=a.epoAPI.util.parseJSON(m.attr("data-rulestype")),l="","object"==typeof r?"object"==typeof n?l=o in n?n[o]:"object"==typeof(c=a.epoAPI.util.parseJSON(p.closest(".tmcp-ul-wrap").attr("data-rulestype")))&&o in c?c[o]:n[0]:"object"==typeof(n=a.epoAPI.util.parseJSON(p.closest(".tmcp-ul-wrap").attr("data-ulestype")))&&(l=o in n?n[o]:n[0]):(s=p.closest(".tmcp-ul-wrap"),"object"==typeof(r=a.epoAPI.util.parseJSON(s.attr("data-rules")))&&("object"==typeof n?l=o in n?n[o]:"object"==typeof(c=a.epoAPI.util.parseJSON(s.attr("data-rulestype")))&&o in c?c[o]:n[0]:"object"==typeof(n=a.epoAPI.util.parseJSON(s.attr("data-rulestype")))&&(l=o in n?n[o]:n[0]))),"object"==typeof l&&(l=l[0]),p.is(".tmcp-fee-field")&&-1!==a.inArray(l,["fee","stepfee","currentstepfee"])&&(l=""),l}function et(t,e,i,o,n,l){var d,s,p,m,_,f,u,g,h,v,y,b,w,x,k,F,C,I,A,S,q,E,T,j,z=a(e),O=z,D=z.is(".tmcp-range"),N=t.main_product,B=t.epoEventId,H=t.this_epo_totals_container,L=!0;if(!z.data("associated_price_set")&&(i?(d=i.cart,s=i.current_variation,p=i.bundleid,m=i.epoTotalsContainer,f=i.product_price,u=i.product_original_price,_=i.apply_dpd,L=i.per_product_pricing):(void 0!==(d=t.main_cart).data("per_product_pricing")&&(L=d.data("per_product_pricing")),E="input[name^='variation_id']",d.find("input.variation_id").length>0&&(E="input.variation_id"),s=d.find(E).val(),p=a.epoAPI.applyFilter("tc_get_bundleid",d.attr("data-product_id"),d),s||(s=0),f=Y(m=a.epoAPI.applyFilter("tc_get_totals_container",H,z,N,p)),u=V(m),_=m.data("fields-price-rules")),f=a.epoAPI.applyFilter("tc_alter_product_price",f,z,d,m,p),u=a.epoAPI.applyFilter("tc_alter_product_original_price",u,z,d,m),!1!==f&&L)){switch(z.is("select")&&(O=z.find("option:selected")),o&&(O=o),g=a.epoAPI.util.parseJSON(O.attr("data-rules")),h=a.epoAPI.util.parseJSON(O.attr("data-rulestype")),void 0===(v=a.epoAPI.util.parseJSON(O.attr("data-original-rules")))&&(v=g),x="","object"==typeof g?(s in g?(k=g[s],F=v[s]):(y=a.epoAPI.util.parseJSON(z.closest(".tmcp-ul-wrap").attr("data-rules")),w=z.closest(".tmcp-ul-wrap").data("original-rules"),k="object"==typeof y&&s in y?y[s]:g[0],F="object"==typeof w&&s in w?w[s]:v[0]),"object"==typeof h?x=s in h?h[s]:"object"==typeof(b=a.epoAPI.util.parseJSON(z.closest(".tmcp-ul-wrap").attr("data-rulestype")))&&s in b?b[s]:h[0]:"object"==typeof(h=a.epoAPI.util.parseJSON(z.closest(".tmcp-ul-wrap").attr("data-ulestype")))&&(x=s in h?h[s]:h[0])):(T=z.closest(".tmcp-ul-wrap"),g=a.epoAPI.util.parseJSON(T.attr("data-rules")),v=a.epoAPI.util.parseJSON(T.attr("data-original-rules")),"object"==typeof g&&(k=s in g?g[s]:g[0],F="object"==typeof v?s in v?v[s]:v[0]:k,"object"==typeof h?x=s in h?h[s]:"object"==typeof(b=a.epoAPI.util.parseJSON(T.attr("data-rulestype")))&&s in b?b[s]:h[0]:"object"==typeof(h=a.epoAPI.util.parseJSON(T.attr("data-rulestype")))&&(x=s in h?h[s]:h[0]))),"object"==typeof x&&(x=x[0]),z.is(".tmcp-fee-field")&&(-1!==a.inArray(x,["fee","stepfee","currentstepfee"])&&(x=""),_=0),void 0===n&&(z.is("select")?z.find("option").removeClass("tm-epo-late-field").removeData("tm-price-for-late islate"):O.removeClass("tm-epo-late-field").removeData("tm-price-for-late islate")),x){case"":k=G(k,m,_),F=G(F,m,_);break;case"math":k=G(k=K(k,z,t,l),m,_),F=G(F=K(F,z,t,!0),m,_);break;case"percent_cart_total":j=parseFloat(Rt.cart_total),Number.isFinite(j)||(j=0),k=G(k,m,_)/100*j,F=G(F,m,_)/100*j;break;case"percent":k=G(k,m,_)/100*f,F=G(F,m,_)/100*u;break;case"percentcurrenttotal":case"fixedcurrenttotal":k=G(k,m,_),a.tcepo.lateFieldsPrices[B].push({setter:O,price:k,original_price:F,bundleid:p,pricetype:x}),O.data("tm-price-for-late",k).data("tm-original-price-for-late",F).data("islate",1).addClass("tm-epo-late-field"),k=0,F=0;break;case"word":k=G(k,m,_)*(O.val().split(/\w+/).length-1),F=G(F,m,_)*(O.val().split(/\w+/).length-1);break;case"wordpercent":k=k/100*f*(O.val().split(/\w+/).length-1),F=F/100*u*(O.val().split(/\w+/).length-1);break;case"wordnon":S=parseInt(O.attr("data-freechars"),10),Number.isFinite(S)||(S=0),(A=O.val().split(/\w+/).length-1-S)<0&&(A=0),k=G(k,m,_)*A,F=G(F,m,_)*A;break;case"wordpercentnon":S=parseInt(O.attr("data-freechars"),10),Number.isFinite(S)||(S=0),(A=O.val().split(/\w+/).length-1-S)<0&&(A=0),k=k/100*f*A,F=F/100*u*A;break;case"char":k=G(k,m,_)*O.val().length,F=G(F,m,_)*O.val().length;break;case"charpercent":k=k/100*f*O.val().length,F=F/100*u*O.val().length;break;case"charnospaces":k=G(k,m,_)*O.val().replace(/\s/g,"").length,F=G(F,m,_)*O.val().replace(/\s/g,"").length;break;case"charnofirst":(A=O.val().length-1)<0&&(A=0),k=G(k,m,_)*A,F=G(F,m,_)*A;break;case"charnon":S=parseInt(O.attr("data-freechars"),10),Number.isFinite(S)||(S=0),(A=O.val().length-S)<0&&(A=0),k=G(k,m,_)*A,F=G(F,m,_)*A;break;case"charpercentnon":S=parseInt(O.attr("data-freechars"),10),Number.isFinite(S)||(S=0),(A=O.val().length-S)<0&&(A=0),k=k/100*f*A,F=F/100*u*A;break;case"charnonnospaces":S=parseInt(O.attr("data-freechars"),10),Number.isFinite(S)||(S=0),(A=O.val().replace(/\s/g,"").length-S)<0&&(A=0),k=G(k,m,_)*A,F=G(F,m,_)*A;break;case"charpercentnonnospaces":S=parseInt(O.attr("data-freechars"),10),Number.isFinite(S)||(S=0),(A=O.val().replace(/\s/g,"").length-S)<0&&(A=0),k=k/100*f*A,F=F/100*u*A;break;case"charpercentnofirst":(A=O.val().length-1)<0&&(A=0),k=k/100*f*A,F=F/100*u*A;break;case"step":D?(k=G(k,m,_)*O.val(),F=G(F,m,_)*a.epoAPI.math.toFloat(O.val())):(k=G(k,m,_)*a.epoAPI.math.toFloat(O.val()),F=G(F,m,_)*a.epoAPI.math.toFloat(O.val()));break;case"currentstep":D?(k=G(O.val(),m,_),F=G(O.val(),m,_)):(k=G(a.epoAPI.math.toFloat(O.val()),m,_),F=G(a.epoAPI.math.toFloat(O.val()),m,_));break;case"intervalstep":D&&(q=parseFloat(a('.tm-range-picker[data-field-id="'+O.attr("id")+'"]').attr("data-min")),k=G(k,m,_)*(O.val()-q),F=G(F,m,_)*(O.val()-q));break;case"row":k=G(k,m,_)*((O.val().match(/(\r\n|\n|\r)/gm)||[]).length+1),F=G(F,m,_)*((O.val().match(/(\r\n|\n|\r)/gm)||[]).length+1)}z.data("tm-quantity")&&(k*=parseFloat(z.data("tm-quantity")),F*=parseFloat(z.data("tm-quantity"))),C=c(k,m,!1,!1,O),I=c(F,m,!1,!1,O),z.data("price_set",1),O.data("price_set",1),O.data("raw_price",k),O.data("raw_original_price",F),O.data("price",r(k,m,O)),O.data("original_price",r(F,m,O)),o||(P(O.closest(".tmcp-field-wrap").find(".tc-price"),k,C,F,I),z.data("price-changed",1))}}function at(t,e){var i,o,n,l,d,s,p,m,_,f,g,h,v,y,b,w,x,k,F=!0,C=t.main_product,I=t.epoEventId,A=t.this_epo_container,S=t.this_epo_totals_container;(i=e||C.find(".cart")).length<=0||(a.tcepo.lateFieldsPrices[I]=[],i.toArray().forEach(function(e){if(e=a(e),o="input[name^='variation_id']",e.find("input.variation_id").length>0&&(o="input.variation_id"),void 0!==e.data("per_product_pricing")&&(F=e.data("per_product_pricing")),n=e.find(o).val(),l=a.epoAPI.applyFilter("tc_get_bundleid",e.attr("data-product_id"),e),n||(n=0),d=a.epoAPI.applyFilter("tc_get_epo_container",A,e,C,l),s=a.epoAPI.applyFilter("tc_get_totals_container",S,e,C,l),p=s.data("fields-price-rules"),d.data("tm_rules_init_done")||(s.data("force-quantity")&&e.find(Jt.qtySelector).val(s.data("force-quantity")),d.toArray().forEach(function(t){a(t).closest(".tmcp-field-wrap").find(".tm-epo-field").data("tm-quantity",a(t).val())}),d.find(".tmcp-attributes, .tmcp-elements").toArray().forEach(function(t){t=a(t),m=a.epoAPI.util.parseJSON(t.attr("data-rules")),_=a.epoAPI.util.parseJSON(t.attr("data-original-rules")),"object"!=typeof m&&(m={0:"0"}),"object"!=typeof _&&(_={0:"0"}),"object"==typeof m&&(f=G(m[a.epoAPI.math.toFloat(n)],s,p),g=c(f,s),h=G(_[a.epoAPI.math.toFloat(n)],s,p),v=c(h,s),t.find(".tmcp-field, .tmcp-fee-field ").toArray().forEach(function(t){t=a(t),F?("1"===t.attr("data-no-price")&&(f=0,h=0),t.data("raw_price",f),t.data("raw_original_price",h),t.data("price",r(f,s,t)),t.data("original_price",r(h,s,t)),P(t.closest(".tmcp-field-wrap").find(".tc-price"),f,g,h,v)):(t.data("price",0),t.data("original_price",0),t.closest(".tmcp-field-wrap").find(".amount").empty())}))}),d.data("tm_rules_init_done",1)),!F)return!0;y=Y(s),b=V(s),k={cart:e,current_variation:n,bundleid:l,epoTotalsContainer:s,product_price:y,product_original_price:b,apply_dpd:p,per_product_pricing:F},w=d.find(".tmcp-field,.tmcp-sub-fee-field,.tmcp-fee-field"),t.is_associated||(w=w.not(Jt.associatedEpoSelector+" .tmcp-field,"+Jt.associatedEpoSelector+" .tmcp-sub-fee-field,"+Jt.associatedEpoSelector+" .tmcp-fee-field")),x=w.filter(".tcenabled"),(!a.tcepo.initialActivation[I]||0===x.length&&w.length>0)&&(w.each(function(){u(a(this))}),a.tcepo.initialActivation[I]=!0),w.filter(".tcenabled").each(function(e,a){et(t,a,k)}),w.each(function(e,i){a(i).on("tc_element_epo_rules",function(){et(t,i,k)})})}))}function it(t,e,i,o,n){var l,d,s,p,m,_,f,g,h,v,y,b,w,x,k,F=0,I=0,A=t.epoEventId;return e+=i,a.tcepo.lateFieldsPrices[A].forEach(function(t){l=t.price,d=t.original_price,s=t.pricetype,p=t.setter,f=t.bundleid,g=p,k="percentcurrenttotal"===s?"_hidden":"_hiddenfixed",p.is("option")&&(g=p.closest("select")),m=a.epoAPI.dom.id(g.attr("name")),h=a(".tc-totals-form.tm-totals-form-"+n.attr("data-cart-id")).attr("data-product-id"),v=a(".tc-totals-form.tm-totals-form-"+n.attr("data-cart-id")).attr("data-epo-id"),_=a(".tc-extra-product-options.tm-product-id-"+h+"[data-epo-id='"+v+"']").find("#"+m+k),f===o?("percentcurrenttotal"===s?(l=parseFloat(l)/100*parseFloat(e),d=parseFloat(d)/100*parseFloat(e)):"fixedcurrenttotal"===s&&(l=parseFloat(l)+parseFloat(i),d=parseFloat(d)+parseFloat(i)),g.data("tm-quantity")&&(l*=parseFloat(g.data("tm-quantity")),d*=parseFloat(g.data("tm-quantity"))),1===p.data("isset")&&u(p)&&(F+=l,I+=d),w=r(l,n,p),x=r(d,n,p),y=c(l,n,!1,!1,p),b=c(d,n,!1,!1,p),p.data("price",w),p.data("pricew",w),p.data("original_price",x),p.data("original_pricew",x),P(p.closest(".tmcp-field-wrap").find(".tc-price"),w,y,x,b),0===_.length&&g.before('<input type="hidden" id="'+m+k+'" name="'+m+k+'" value="'+C(l,n)+'" />'),p.is(".tm-epo-field.tmcp-radio")?p.is(":checked")&&_.val(C(l,n)):_.val(C(l,n))):void 0!==p.data("pricew")&&(y=c(p.data("pricew"),n,!0,!1,p),b="",void 0!==p.data("original_pricew")&&(b=c(p.data("original_pricew"),n,!0,!1,p)),P(p.closest(".tmcp-field-wrap").find(".tc-price"),p.data("pricew"),y,p.data("original_pricew"),b))}),a.tcepo.lateFieldsPrices[A]=[],[F,I]}function ot(t){var e,i,o,r,n=[".tm-variation-ul-color",".tm-variation-ul-image",".tm-variation-ul-radiostart",".tm-variation-ul-radioend","ul.use_images_container","ul.use_colors_container"],c=t.main_product;a(".tc-extra-product-options").addClass("tc-show-hidden"),n.forEach(function(t){c.find(t).toArray().forEach(function(t){a(t).toArray().forEach(function(t){t=a(t),(e=t.find(".tmhexcolorimage-li-nowh")).length&&(i=t.closest(".cpf-section"),o=e.first(),r=100,i.length&&i.find(".tm-collapse-wrap.closed").length?(i.find(".tm-collapse-wrap").removeClass("closed").show(),r=e.is(".tc-mode-endcolor, .tc-mode-startcolor")?o.css("line-height"):o.width()-1+"px",i.find(".tm-collapse-wrap").addClass("closed").hide()):r=e.is(".tc-mode-endcolor, .tc-mode-startcolor")?o.css("line-height"):o.width()-1+"px",e.find(".tmhexcolorimage").css({"min-width":r,"min-height":r}))})})}),a(".tc-extra-product-options").removeClass("tc-show-hidden")}function rt(){var t;"yes"!==Rt.tm_epo_no_lazy_load&&((t=Vt?a(Vt).find("img.tmlazy"):a(".tc-extra-product-options img.tmlazy")).lazyLoadXT(),t.on("lazyshow",function(){te.trigger("lazyLoadXToncomplete")}))}function nt(t){var e,i;t&&t.find(".tm-owl-slider-section").each(function(){e=a(this),i=e.css("display"),e.find(".tm-slide").first().before('<div class="tm-owl-slider"></div>'),e.find(".tm-slide").appendTo(e.find(".tm-owl-slider")),e=e.find(".tm-owl-slider"),i=e.css("display"),e.show().addClass("tcowl-carousel").tmowlCarousel({dots:!1,nav:!0,items:1,autoHeight:!0,mouseDrag:!1,touchDrag:!0,navText:[Rt.i18n_prev_text,Rt.i18n_next_text],navClass:["owl-prev button","owl-next button"],navElement:"a",loop:!1,navRewind:!1}),e.css("display",i)})}function ct(t){t&&a(t).length&&(a(t).spectrum({showButtons:!0,clickoutFiresChange:!1,chooseText:Rt.closeText,cancelText:Rt.i18n_cancel}),a(t).spectrum("enable"))}function lt(t){var e=t.closest(".tmcp-field-wrap").find("label img"),i=a(e).first().attr("data-original");return t.is("select.tm-product-image")&&(t=t.children("option:selected")),i||(i=a(e).first().attr("src")),i||(i=t.attr("data-image")),t.attr("data-imagep")&&(i=t.attr("data-imagep")),!!i}function dt(e){var i,o,r,n,c=e.is_associated?e.this_epo_container.find(".tm-epo-field.tmcp-upload"):e.this_epo_container.find(".tm-epo-field.tmcp-upload").not(Jt.epoSelector+" "+Jt.associatedEpoSelector+" .tm-epo-field.tmcp-upload");try{c.not(Jt.epoSelector+" "+Jt.associatedEpoSelector+" .tm-epo-field.tmcp-upload").not(".tm-multiple-file-upload").toArray().forEach(function(t){i=a(t),($t||Xt)&&((o=new $t("").clipboardData||new Xt).items.add(new File([i.attr("data-file")],i.attr("data-filename"))),t.files=o.files),r=i.attr("name"),n=i.attr("data-file"),i.trigger("change.tcupload"),i.after('<input type="hidden" class="tmcp-upload-hidden" name="'+r+'" value="'+n+'" />'),i.removeAttr("data-file data-filename")})}catch(e){t.console.log(e),a(".tm-epo-field.tmcp-upload").not(".tm-multiple-file-upload").addClass("tc-nodt"),Mt=e}}function st(t){var e=t.epoEventId,i=t.this_epo_container;"yes"===Rt.tm_epo_upload_popup&&(a.tcepo.formSubmitEvents[e][a.tcepo.formSubmitEvents[e].length]={trigger:function(){return!0},on_true:function(){var t=i.data("num_uploads");return t&&Object.keys(t).length&&a.tcFloatBox({fps:1,ismodal:!0,refresh:"fixed",width:"50%",height:"300px",classname:"flasho tm_wrapper",data:a.epoAPI.template.html(Jt.templateEngine.tc_upload_messages,{files:t,title:Rt.i18n_uploading_files,message:Rt.i18n_uploading_message})}),!0},on_false:function(){return!0}})}function pt(t){var e=t.this_epo_container,i=t.main_product,o=t.epoEventId,r=e.find(".tm-limit"),n=e.find(".tm-exactlimit"),c=e.find(".tm-minimumlimit");e.on("change.cpflimit","input.tm-epo-field.tmcp-checkbox",function(){var t=a(this);U(t,!0),J(t,!0)}),r.length&&Q(r,i,o),n.length&&W(n,i,o),c.length&&X(c,o)}function mt(e){var i,o,r=e.this_epo_totals_container,n=e.this_epo_container,c=r.attr("data-theme-name");if(c){switch(c=c.toLowerCase(),i=n.find("select"),c){case"flatsome":case"flatsome-child":case"flatsome child":i.wrap('<div class="custom select-wrapper"/>');break;case"avada":case"avada-child":case"avada child":i.wrap('<div class="avada-select-parent tm-select-parent"></div>'),a('<div class="select-arrow">&#xe61f;</div>').appendTo(n.find(".tm-select-parent")),t.calc_select_arrow_dimensions?(t.calc_select_arrow_dimensions(),te.on("tmsectionpoplink cpflogicdone",function(){t.calc_select_arrow_dimensions()})):t.calcSelectArrowDimensions&&(t.calcSelectArrowDimensions(),te.on("tmsectionpoplink cpflogicdone",function(){t.calcSelectArrowDimensions()}));break;case"bazar":case"bazar-child":case"bazar child":i.wrap('<div class="tm-select-wrapper select-wrapper"/>');break;case"blaszok":case"blaszok-child":case"blaszok child":o=function(){setTimeout(function(){a(".tm-extra-product-options select").not(".hasCustomSelect").filter(":visible").each(function(){a(this).is(".mpcthSelect")||(a(this).width(a(this).outerWidth()),a(this).customSelect({customClass:"mpcthSelect"}))})},100)},te.on("cpflogicrun",function(){o()}),te.on("epo_options_visible",function(){o()});break;case"handmade":case"handmade child theme":a(".tm-owl-slider.tcowl-carousel").addClass("manual")}te.trigger("tm-theme-specific-actions",{epo:{theme_name:c,all_epo_selects:i}})}ee.off("click.cpf",".quantity:not(.buttons_added) .minus, .quantity:not(.buttons_added) .plus").on("click.cpf",".quantity:not(.buttons_added) .minus, .quantity:not(.buttons_added) .plus",function(){a(this).closest(".quantity").find(Jt.qtySelector).trigger("change.cpf")})}function _t(t,i,o,r,n){var c,l,d,s,p,m,_,f,u,g=t.epoEventId,h="input[name^='variation_id']",v=t.is_associated?"tc_variation_form.tmlogic":"wc_variation_form.tmlogic",y=t.is_associated?"tc_":"",b=t.variations_form,w=t.is_associated?b.find(".tc-epo-element-variations"):b.find(".variations"),x=t.is_associated?".tc-epo-element-variable-reset-variations":".reset_variations";if(b.attr("data-epo_id",t.epo_id),i.find("input.variation_id").length>0&&(h="input.variation_id"),n.find(".tm-epo-variation-element").length||n.data("tm-epo-variation-element")){if((c=n.find(".tm-epo-variation-section").first()).find(".cpf-type-variations").attr("data-epo_id",t.epo_id).attr("data-product_id",b.attr("data-product_id")),n.data("tm-epo-variation-element",c.find(".tm-epo-variation-element")),o&&"main"!==o&&!t.is_associated){if(b=t.form,w=b.find('.composite_component[data-item_id="'+o+'"]').find(".variations"),b.attr("data-epo_id",t.epo_id),0===w.length)return;l=c.closest("li.tm-extra-product-options-field"),c.is(".tm-hidden")||w.hide(),w.after(c.addClass("tm-extra-product-options nopadding")),l.is(":empty")&&l.hide(),c.is(".section_popup")?c.wrap("<div class='tc-styled-variations tc-row'></div>"):(c.removeClass("tc-cell"),c.wrap("<div class='tc-styled-variations'></div>")),d=!1,i.off(v).on(v,function(){for(d=!0,b.on("click.tmlogic",".reset_variations",function(){c.find("select.tm-epo-variation-element").val("").children("option").removeAttr("disabled").show(),c.find(".tm-epo-variation-element").removeAttr("disabled").removeClass("tm-disabled").removeAttr("checked").prop("checked",!1).closest("li").show(),te.trigger("tmlazy"),c.find(".tm-epo-variation-element").trigger("tm_trigger_product_image"),c.find("li").removeClass("tc-active tm-attribute-disabled").css("opacity","")}),i.off("woocommerce_update_variation_values_tmlogic").on("woocommerce_update_variation_values_tmlogic",function(){E(i,t)}),u=0;u<Gt.length;u+=1)s=Gt[u],"object"===(p=typeof s)&&(m="string"==typeof s.name||!1,_="string"==typeof s.selector||!1,f="function"==typeof s.func||!1,m&&f&&("input[name='variation_id']"===_&&(_=h),s.selector?i.data("tm-styled-variations",1).off(y+s.name,s.selector).on(y+s.name,s.selector,s.func):i.data("tm-styled-variations",1).off(y+s.name).on(y+s.name,s.func)));Gt=[],c.find(".tm-epo-variation-element").last().trigger("tm_epo_variation_element_change")}),ee.ready(function(){!1===d&&i.trigger(v)})}else{for(c.is(".tm-hidden")||w.hide(),l=c.closest("li.tm-extra-product-options-field"),w.after(c.addClass("tm-extra-product-options nopadding")),l.is(":empty")&&l.hide(),c.is(".section_popup")?c.wrap("<div class='tc-styled-variations tc-row'></div>"):(c.removeClass("tc-cell"),c.wrap("<div class='tc-styled-variations'></div>")),b.off("click.tmlogic",x).on("click.tmlogic",x,function(){c.find("select.tm-epo-variation-element").val("").children("option").removeAttr("disabled").show(),c.find(".tm-epo-variation-element").removeAttr("disabled").removeClass("tm-disabled").removeAttr("checked").prop("checked",!1).closest("li").show(),te.trigger("tmlazy"),c.find(".tm-epo-variation-element").trigger("tm_trigger_product_image"),c.find("li").removeClass("tc-active tm-attribute-disabled").css("opacity","")}),b.off("woocommerce_update_variation_values_tmlogic").on("woocommerce_update_variation_values_tmlogic",function(){E(b,t)}),u=0;u<Gt.length;u+=1)s=Gt[u],"object"===(p=typeof s)&&(m="string"==typeof s.name||!1,_="string"==typeof s.selector||!1,f="function"==typeof s.func||!1,m&&f&&("input[name='variation_id']"===_&&(_=h),s.selector?b.data("tm-styled-variations",1).off(y+s.name,s.selector).on(y+s.name,s.selector,s.func):b.data("tm-styled-variations",1).off(y+s.name).on(y+s.name,s.func)));Gt=[],c.find(".tm-epo-variation-element").last().trigger("tm_epo_variation_element_change")}a.tcepo.formSubmitEvents[g][a.tcepo.formSubmitEvents[g].length]={trigger:function(){return!0},on_true:function(){return c.find(".tm-epo-variation-element").attr("disabled","disabled"),!0},on_false:function(){c.find(".tm-epo-variation-element").removeAttr("disabled")}},a(e.body).on("added_to_cart",function(){c.find(".tm-epo-variation-element").removeAttr("disabled")})}}function ft(t,e){var i=e.find(".flex-control-nav li:eq(0) img"),o=e.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),r=t,n=t.closest("a");r.attr("data-o_src",a.tc_product_image_store[0].src),r.attr("data-o_srcset",a.tc_product_image_store[0].srcset),r.attr("data-o_sizes",a.tc_product_image_store[0].sizes),r.attr("data-o_title",a.tc_product_image_store[0].title),r.attr("data-o_alt",a.tc_product_image_store[0].alt),r.attr("data-o_data-src",a.tc_product_image_store[0]["data-src"]),r.attr("data-o_data-large_image",a.tc_product_image_store[0]["data-large_image"]),r.attr("data-o_data-large_image_width",a.tc_product_image_store[0]["data-large_image_width"]),r.attr("data-o_data-large_image_height",a.tc_product_image_store[0]["data-large_image_height"]),o.attr("data-o_data-thumb",a.tc_product_image_store[1]["data-thumb"]),a.tc_product_image_store[2]&&i.attr("data-o_src",a.tc_product_image_store[2].src),n.attr("data-o_href",a.tc_product_image_store[3].href),n.attr("data-o_title",a.tc_product_image_store[3].title)}function ut(t,e){var i=e.find(".flex-control-nav li:eq(0) img"),o=e.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),r=t,n=t.closest("a");a.isEmptyObject(a.tc_product_image)?a.tc_product_image_store=a.tc_populate_store(t,e):(a.tc_product_image_store=a.tc_pre_populate_store(),a.tc_product_image_store=a.tc_maybe_copy_object_values(a.tc_product_image_store,a.tc_product_image)),r.tc_update_attr("src",0),r.tc_update_attr("srcset",0),r.tc_update_attr("sizes",0),r.tc_update_attr("title",0),r.tc_update_attr("alt",0),r.tc_update_attr("data-src",0),r.tc_update_attr("data-large_image",0),r.tc_update_attr("data-large_image_width",0),r.tc_update_attr("data-large_image_height",0),o.tc_update_attr("data-thumb",1),i.tc_update_attr("src",2),n.tc_update_attr("href",3),n.tc_update_attr("title",3)}function gt(t,e,a){var i=a.find(".flex-control-nav li:eq(0) img"),o=a.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),r=e,n=e.closest("a");t&&t.image_link&&t.image_link&&t.image_link.length>1?(null!==t.full_src&&""!==t.full_src||(t.full_src=t.image_link),null!==t.full_src_w&&""!==t.full_src_w||(t.full_src_w=r.attr("data-large_image_width")),null!==t.full_src_h&&""!==t.full_src_h||(t.full_src_h=r.attr("data-large_image_height")),r.length&&(t.image_srcset||(t.image_sizes=!1),t.image_sizes||(t.image_srcset=!1),r.tc_set_attr("src",t.image_link,0),r.tc_set_attr("srcset",t.image_srcset,0),r.tc_set_attr("sizes",t.image_sizes,0),r.tc_set_attr("title",t.image_title,0),r.tc_set_attr("alt",t.image_alt,0),r.tc_set_attr("data-src",t.full_src,0),r.tc_set_attr("data-large_image",t.full_src,0),r.tc_set_attr("data-large_image_width",t.full_src_w,0),r.tc_set_attr("data-large_image_height",t.full_src_h,0),o.tc_set_attr("data-thumb",t.image_link,1)),i.length&&i.tc_set_attr("src",t.image_link,2),n.length&&(n.tc_set_attr("href",t.full_src,3),n.tc_set_attr("title",t.image_caption,3))):(r.length&&(r.tc_reset_attr("src",0),r.tc_reset_attr("srcset",0),r.tc_reset_attr("sizes",0),r.tc_reset_attr("title",0),r.tc_reset_attr("alt",0),r.tc_reset_attr("data-src",0),r.tc_reset_attr("data-large_image",0),r.tc_reset_attr("data-large_image_width",0),r.tc_reset_attr("data-large_image_height",0),o.tc_reset_attr("data-thumb",1)),i.length&&i.tc_reset_attr("src",2),n.length&&(n.tc_reset_attr("href",3),n.tc_reset_attr("title",3)))}function ht(t,e){var i;return t.is_associated?i=e.find(".tc-product-image .wp-post-image").first():""!==Rt.tm_epo_global_product_image_selector?i=a(Rt.tm_epo_global_product_image_selector):(0===(i=e.find(".woocommerce-product-gallery__image:not(.clone), .woocommerce-product-gallery__image--placeholder:not(.clone)").eq(0).find(".wp-post-image").first()).length&&(i=e.find("a.woocommerce-main-image img, img.woocommerce-main-image,a img").not(".thumbnails img,.product_list_widget img").first()),0===i.length&&(i=e.find(".elementor-widget-ae-post-image .wp-post-image").first())),a(i).length>1&&(i=a(i).first()),i}function vt(t){var e,a,i;return t.is_associated?t.main_product.closest(".tc-epo-element-product-container"):(e=t.main_product,a=t.product_id,(i=e.closest("#product-"+a)).length<=0&&(i=e.closest(".post-"+a)),i)}function yt(e,i,o,r,n,c,l){var d,s,p,m,_,f;for(d in e)if(e.hasOwnProperty(d)&&(d=e[d]).enabled)switch(d.type){case"yith":i?(i.attr("srcset",o).attr("src-orig",o),d.element.data("yith_magnifier")&&d.element.yith_magnifier("destroy"),s={elements:{zoom:a(".yith_magnifier_zoom"),zoomImage:i,gallery:a(".yith_magnifier_gallery li a")}},d.element.yith_magnifier(a.extend(!0,{},t.yith_magnifier_options,s))):(r?d.yith_wcmg_zoom.attr("href",d.yith_wcmg_default_zoom):d.yith_wcmg_zoom.attr("href",d._yith_wcmg_default_zoom),d.element.data("yith_magnifier")&&d.element.yith_magnifier("destroy"),d.element.yith_magnifier(t.yith_magnifier_options));break;case"iosslider":setTimeout(function(t){t.element.iosSlider("update")}.bind(null,d),150);break;case"flexslider":te.trigger("resize");break;case"elevatezoom":d.element.each(function(t,e){var a=e(this).data("elevateZoom");void 0!==a&&a.swaptheimage(t,t)}.bind(null,o,a));break;case"easyzoom":d.element.swap(null,o);break;case"easyzoom-flatsome":d.element.swap(o,o);break;case"woocommerce":d.element.flexslider(0),p=d.element,t.setTimeout(function(t,e){t.trigger("woocommerce_gallery_init_zoom"),e.trigger("resize")}.bind(null,p,te),10);break;case"zoom":l&&(m=l.find(".woocommerce-product-gallery--with-images").width(),_=!1,d.element.find("img.wp-post-image").attr("data-large_image_width")>m&&(_=!0),_?(f={touch:!1},"ontouchstart"in t&&(f.on="click"),d.element.trigger("zoom.destroy"),d.element.zoom(f)):d.element.trigger("zoom.destroy"))}te.trigger("tm_gallery_compatibility_actions",{event_data:n,product_element:l,form:c})}function bt(e,i,o){var r,n,c,l,d,s,p,m,_,f,u,g,h,v,y,b,w,x,k,F,C,I,A;return e.is_associated?{}:(r=!1,n=a(".images"),c=a(".yith_magnifier_zoom"),l=n.find(".yith_magnifier_zoom").first().attr("href"),d=l,s=n.find(".yith_magnifier_zoom img").first().attr("src"),p=!1,m=a(".iosSlider.product-gallery-slider,.iosSlider.product-slider"),_=!1,f=o.find(".images .fusion-flexslider"),u=i.data("elevateZoom")||!1,g=o.find("div.product-images .woocommerce-main-image"),h=!1,v=o.find(".images .easyzoom"),y=!1,b=o.find(".images .easyzoom"),w=!1,x=o.find(".woocommerce-product-gallery"),k=!1,F=t.wc_single_product_params,I="function"==typeof a.fn.zoom&&F&&F.zoom_enabled,A=!1,t.yith_magnifier_options&&n.data("yith_magnifier")&&(r=!0),m.length&&m.iosSlider&&(p=!0),f.length&&f.flexslider&&(_=!0),v.length&&v.filter(".images .easyzoom.first").data("easyZoom")&&(v=v.filter(".images .easyzoom.first").data("easyZoom"),h=!0),h||(b=o.find(".images .has-image-zoom .slide")).length&&b.filter(".images .has-image-zoom .slide.first").data("easyZoom")&&(b=b.filter(".images .has-image-zoom .slide.first").data("easyZoom"),y=!0),te.on("load",function(){setTimeout(function(){v.length&&v.data("easyZoom")&&(v=v.data("easyZoom"),h=!0),b.length&&b.data("easyZoom")&&(b=b.data("easyZoom"),y=!0)},150)}),x.length&&x.data("flexslider")&&(w=!0,"function"==typeof a.fn.zoom&&F&&F.zoom_enabled&&(C=i.closest(".woocommerce-product-gallery__image")).length>0&&i.width()>a(".woocommerce-product-gallery").width()&&(k=C,i.data.wc27_zoom_target=k)),!w&&I&&(A=o.find(".woocommerce-product-gallery__image")),{is_yith_wcmg:{type:"yith",enabled:r,element:n,yith_wcmg_zoom:c,_yith_wcmg_default_zoom:d,yith_wcmg_default_image:s},is_iosSlider:{type:"iosslider",enabled:p,element:m},is_flexslider:{type:"flexslider",enabled:_,element:f},is_elevateZoom:{type:"elevatezoom",enabled:u,element:g},is_easyzoom:{type:"easyzoom",enabled:h,element:v},is_easyzoom_flatsome:{type:"easyzoom-flatsome",enabled:y,element:b},is_wc27_gallery:{type:"woocommerce",enabled:w,element:x},is_zoom_enabled:{type:"zoom",enabled:!w&&I,element:A}})}function wt(t){var e,i,o,r,n,c,l,d,s=t.is_associated?t.this_epo_container:t.this_epo_container.not(Jt.epoSelector+" "+Jt.associatedEpoSelector),p=t.variations_form,m=t.main_product,_=t.form,f=vt(t),g=[],h=t.is_associated?"tc_":"";e=ht(t,f),i=bt(t,e,f),a(e).length>0&&(_.on(h+"reset_image.tcpi",function(){a.tc_product_image=a.tc_replace_object_values(a.tc_product_image,a.tc_product_image_store),g=[],a(s.find(".tm-product-image:checked,select.tm-product-image")).add(p.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).each(function(){u(o=a(this))&&""!==o.val()&&g.push(o)}),g.length?g[g.length-1].trigger("tm_trigger_product_image"):a.tc_product_image_store=a.tc_populate_store(e,f)}),_.on(h+"found_variation.tcpi",function(){ut(e,f),g=[],a(s.find(".tm-product-image:checked,select.tm-product-image")).add(p.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).each(function(){u(o=a(this))&&""!==o.val()&&g.push(o)}),g.length&&(ft(e,f),g[g.length-1].trigger("tm_trigger_product_image"))}),a.tc_product_image_store=a.tc_maybe_copy_object_values_from_img(a.tc_product_image_store,e,f),m.off("tm_change_product_image").on("tm_change_product_image",function(t,m){if(t.stopImmediatePropagation(),r=m.element,n=m.element_current,r&&n){if(c=r.data("imagep"),l=""!==c?"imagep":"image",(d=m.element_current.data("image-variations"))&&(d=d[l]),void 0===d)return;if(g=[],a(s.find(".tm-product-image:checked,select.tm-product-image")).add(p.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).each(function(){(o=a(this)).is("option")&&(o=o.closest("select")),u(o)&&""!==o.val()&&g.push(o)}),g.length&&!g[g.length-1].is(r))return;gt(d,e,f),yt(i,e,d.image_link,!1,m,_,f)}}),m.off("tm_restore_product_image").on("tm_restore_product_image",function(t,n){t.stopImmediatePropagation(),r=n.element,g=[],r&&(a(s.find(".tm-product-image:checked,select.tm-product-image")).add(p.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).each(function(){u(o=a(this))&&""!==o.val()&&g.push(o)}),g.length&&!g[g.length-1].is(r))?g[g.length-1].trigger("tm_trigger_product_image"):(gt(!1,e,f),yt(i,!1,e.attr("src"),!1,n,_,f))}),g=[],a(s.find(".tm-product-image:checked,select.tm-product-image")).add(p.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).each(function(){u(o=a(this))&&""!==o.val()&&g.push(o)}),g.length&&g[g.length-1].trigger("tm_trigger_product_image")),te.trigger("tm_product_image_loaded")}function xt(e){var i,o,r,n,c,l,d,s=e.is_associated?e.this_epo_container:e.this_epo_container.not(Jt.epoSelector+" "+Jt.associatedEpoSelector),p=e.main_product,m=e.product_id,_=e.form,f=vt(e),g=[];i=ht(e,f),o=bt(e,i,f),a(i).length>0&&(i.data("tm-current-image",!1),r=i.closest("a"),n=i.attr("src"),c=i.width(),l=i.height(),p.off("tm_change_product_image").on("tm_change_product_image",function(e,r){var n,s,p,f,g,h,v,b,w,x,k,F,C,I,A,P=[];s=(n=r.element.closest(".cpf-section")).is(".tm-epo-variation-section"),p=r.epo_holder,s&&(p=n),f=p.find(".tm-product-image:checked,select.tm-product-image"),P=[],g=r.element.attr("id"),h=!0,v=r.main_product,b=v.closest("#product-"+m),w=c,x=l,F=a("<div class='blockUI blockOverlay tm-preloader-img'></div>"),b.length<=0&&(b=v.closest(".post-"+m)),0===(k=b.find("#"+g+"_tmimage")).length&&(k=i),A=function(){F.remove(),_.tc_image_update(!1),i.data("tm-current-image",!1),b.find(".tm-clone-product-image").hide(),i.show()},r.src===k.attr("src")&&k.is(":visible")||(!1!==r.src?(F.css({width:w,height:x}),f.each(function(){u(d=a(this))&&lt(d)&&y({element:d.closest(".cpf_hide_element"),operator:"isnotempty",value:""})&&P.push(d)}),P.length&&(f=P[P.length-1]),f.attr("id")!==r.element.attr("id")&&(h=!1),C=i.tcClone(),I=new Image,C.removeAttr("data-o_src").removeAttr("data-o_title").removeAttr("data-o_alt").removeAttr("data-o_srcset").removeAttr("data-o_sizes").removeAttr("srcset").removeAttr("sizes"),h&&i.before(F),o.is_yith_wcmg.yith_wcmg_default_zoom=o.is_yith_wcmg.element.find(".yith_magnifier_zoom").first().attr("href"),o.is_yith_wcmg.yith_wcmg_default_image=o.is_yith_wcmg.element.find(".yith_magnifier_zoom img").first().attr("src"),I.onerror=function(){A()},I.onload=function(){if("naturalHeight"in this){if(this.naturalHeight+this.naturalWidth===0)return void this.onerror()}else if(this.width+this.height===0)return void this.onerror();b.find("#"+g+"_tmimage").remove(),b.find(".tm-clone-product-image").hide(),C.prop("src",I.src).hide(),i.hide().after(C),C.css("opacity",0).show(),yt(o,C,I.src),F.animate({opacity:0},750,"easeOutExpo",function(){F.remove()}),C.animate({opacity:1},t.tc_epo_image_animation_delay||1500,"easeOutExpo",function(){}),te.trigger("tm_change_product_image_loaded",{src:r.src,element:r.element,main_product:r.main_product,epo_holder:r.epo_holder})},C.attr("id",g+"_tmimage").addClass("tm-clone-product-image").hide(),C.attr("src-orig")&&C.attr("src-orig",r.src),h?(I.src=r.src,_.tc_image_update(r.element,C),i.data("tm-current-image",g),te.trigger("tm_change_product_image_show",{src:r.src,element:r.element,main_product:r.main_product,epo_holder:r.epo_holder})):(C.prop("src",r.src).hide(),i.after(C)),te.trigger("tm_change_product_image_end",{src:r.src,element:r.element,main_product:r.main_product,epo_holder:r.epo_holder})):A())}),p.off("tm_restore_product_image").on("tm_restore_product_image",function(t,e){var a,c,l,d,s,p,f,u,g,h,v,y,b,w;if(te.trigger("tm_restore_product_image_pre",{element:e.element,main_product:e.main_product,epo_holder:e.epo_holder}),a=e.element.attr("id"),c=e.main_product,l=c.closest("#product-"+m),d=e.element.closest(".cpf-section"),s=d.is(".tm-epo-variation-section"),u=!1,y=n,b=e.epo_holder,s&&(b=d),l.length<=0&&(l=c.closest(".post-"+m)),g=l.find("#"+a+"_tmimage").is(":visible"),l.find("#"+a+"_tmimage").remove(),0===l.find(".tm-clone-product-image").length)i.show(),i.data("tm-current-image",!1),_.tc_image_update(!1);else{if(!g)return void te.trigger("tm_restore_product_image_loaded_exit",{element:e.element,main_product:e.main_product,epo_holder:e.epo_holder});for(h=l.find(".tm-clone-product-image").length,a=i.data("tm-current-image"),w=h-1;w>=0;w-=1){if(f=l.find(".tm-clone-product-image").eq(w),p=f.attr("id").replace("_tmimage",""),(v=b.find("[id='"+p+"']")).is(":checked")&&v.closest(".cpf_hide_element").is(":visible")){l.find(".tm-clone-product-image").eq(w).show(),r.attr("href",l.find(".tm-clone-product-image").eq(w).prop("src")),i.data("tm-current-image",p),u=!0;break}l.find(".tm-clone-product-image").eq(w).hide()}u?l.find("#"+a+"_tmimage").remove():(i.show(),i.data("tm-current-image",!1),_.tc_image_update(!1))}u&&(y=f.attr("src")),yt(o,!1,y,l.find(".tm-clone-product-image").filter(":visible").length),te.trigger("tm_restore_product_image_loaded",{element:e.element,main_product:e.main_product,epo_holder:e.epo_holder})}),p.off("tm_attempt_product_image").on("tm_attempt_product_image",function(t,e){var c,l,s,p,f,g,h,v,b,w,x,k,F,C,I,A,P;if(c=e.main_product,l=c.closest("#product-"+m),s=e.element?e.element.closest(".cpf-section"):a(c.find(".tm-epo-variation-section").first(),e.epo_holder),p=s.is(".tm-epo-variation-section"),f=e.epo_holder,p&&(f=s),g=f.find(".tm-product-image:checked,select.tm-product-image"),h=[],v="",x=!1,k=i.data("tm-current-image"),C=n,l.length<=0&&(l=c.closest(".post-"+m)),f=c.find(".tm-epo-variation-section").first().add(e.epo_holder),(g=f.find(".tm-product-image:checked,select.tm-product-image")).each(function(){u(d=a(this))&&lt(d)&&y({element:d.closest(".cpf_hide_element"),operator:"isnotempty",value:""})&&h.push(d)}),h.length&&(v=(g=h[h.length-1]).attr("id")),!h.length||!g.length||k&&v===k){if(A=f.find("[id='"+k+"']").closest(".cpf_hide_element"),k&&(!1===A.data("isactive")||!1===A.closest(".cpf-section").data("isactive"))){if(l.find("#"+k+"_tmimage").remove(),0===(F=l.find(".tm-clone-product-image").length))i.show(),i.data("tm-current-image",!1),_.tc_image_update(!1);else{for(P=F-1;P>=0;P-=1){if(b=l.find(".tm-clone-product-image").eq(P),w=b.attr("id").replace("_tmimage",""),(I=f.find("[id='"+w+"']")).is(":checked")&&I.closest(".cpf_hide_element").is(":visible")){l.find(".tm-clone-product-image").eq(P).show(),r.attr("href",l.find(".tm-clone-product-image").eq(P).prop("src")),i.data("tm-current-image",w),x=!0;break}l.find(".tm-clone-product-image").eq(P).hide()}x||(i.show(),i.data("tm-current-image",!1),_.tc_image_update(!1))}x&&(C=b.attr("src")),yt(o,!1,C,l.find(".tm-clone-product-image").filter(":visible").length)}}else g.last().trigger("tm_trigger_product_image")}),a(s.find(".tm-product-image:checked,select.tm-product-image")).add(p.find(".tm-epo-variation-section").first().find(".tm-product-image:checked,select.tm-product-image")).each(function(){u(d=a(this))&&""!==d.val()&&g.push(d)}),g.length&&g[g.length-1].trigger("tm_trigger_product_image")),te.trigger("tm_product_image_loaded")}function kt(e){setTimeout(function(){"inline"===Rt.tm_epo_global_product_image_mode?xt(e):wt(e)},t.tc_epo_product_image_setup_delay||0)}function Ft(t){te.trigger("tm-epo-compatibility",{epo:t})}function Ct(t){Wt&&t.find(".tm-range-picker").toArray().forEach(function(e){var i,o=a(e),r=o.attr("data-step").split("."),n=t.find("#"+a.epoAPI.dom.id(o.attr("data-field-id"))),c=parseFloat(o.attr("data-min")),l=parseFloat(o.attr("data-max")),d=parseFloat(o.attr("data-start")),s=parseFloat(o.attr("data-step")),p=o.attr("data-show-picker-value"),m=o.closest("li").find(".tm-show-picker-value"),_=parseFloat(o.attr("data-noofpips")),f=null;o.data("tc-picker-init")||(o.data("tc-picker-init",1),r=1===r.length?0:r[1].length,Number.isFinite(c)||(c=0),Number.isFinite(l)||(l=0),l<=c&&(l=parseFloat(l)+1),d=a.epoAPI.math.unformat(d,Jt.localDecimalSeparator),Number.isFinite(d)||(d=0),d=a.epoAPI.math.format(d,{decimal:Jt.localDecimalSeparator,thousand:Jt.localThousandSeparator,precision:r}),Number.isFinite(s)||(s=0),Number.isFinite(_)||(_=10),_<2&&(_=2),"yes"===o.attr("data-pips")&&(f={mode:"count",values:_,filter:function(t,e){return t=parseFloat(a.epoAPI.math.toFixed(t,r)),s<=0?0:1!==e||Number.isInteger(t)?e:2},format:{from:function(t){return a.epoAPI.math.unformat(t,Jt.localInputDecimalSeparator)},to:function(t){return a.epoAPI.math.format(t,{decimal:Jt.localDecimalSeparator,thousand:Jt.localThousandSeparator,precision:r})}},density:2}),Wt.create(o.get(0),{direction:Rt.text_direction,start:d,step:s,connect:"lower",behaviour:"tap",format:{from:function(t){return a.epoAPI.math.unformat(t,Jt.localInputDecimalSeparator)},to:function(t){return a.epoAPI.math.format(t,{decimal:Jt.localDecimalSeparator,thousand:Jt.localThousandSeparator,precision:r})}},range:{min:[c],max:[l]},pips:f}),i=o.find(".noUi-handle-lower"),o.get(0).noUiSlider.on("slide",function(){i.trigger("tmmovetooltip"),n.trigger("change.cpf")}),o.get(0).noUiSlider.on("update",function(t,e){t[e]=a.epoAPI.math.unformat(t[e],Jt.localDecimalSeparator),e=0,"left"!==p&&"right"!==p&&i.attr("title",a.epoAPI.math.format(t[e],{decimal:Jt.localDecimalSeparator,thousand:Jt.localThousandSeparator,precision:r})),n.val(t[e]).trigger("change"),""!==p&&m.html(a.epoAPI.math.format(t[e],{decimal:Jt.localDecimalSeparator,thousand:Jt.localThousandSeparator,precision:r}))}),""!==p&&m.html(d),"left"!==p&&"right"!==p&&(i.attr("title",d),a.tcToolTip(i)))})}function It(t,e){var i,o=a(e),r=a.tm_datepicker._getInst(o[0]),n=o.data("tc-enabled_only_dates"),c=o.data("tc-disabled_weekdays"),l=o.data("tc-disabled_months"),d=o.data("tc-disabled_dates"),s=o.data("tc-format"),p=t.getDay(),m=t.getDay()+1;return!!a.tm_datepicker._isInRange(r,t)&&(""!==n?(i=a.tm_datepicker.formatDate(s,t),-1!==n.indexOf(i)):-1===c.indexOf(p.toString())&&(-1===l.indexOf(m.toString())&&(""===d||(i=a.tm_datepicker.formatDate(s,t),-1===d.indexOf(i)))))}function At(i){var o;a.tm_datepicker&&(o=a("input").map(function(){return this.id}).get().join(" "),i.find(".tm-epo-timepicker").toArray().forEach(function(t){var e=a(t),i=null,r=null,n=e.attr("data-time-format").trim(),c=e.attr("data-time-theme").trim(),l=e.attr("data-time-theme-size").trim(),d=e.attr("data-time-theme-position").trim(),s=e.attr("data-tranlation-hour").trim(),p=e.attr("data-tranlation-minute").trim(),m=e.attr("data-tranlation-second").trim();""!==e.attr("data-min-time").trim()&&(i=e.attr("data-min-time").trim()),""!==e.attr("data-max-time").trim()&&(r=e.attr("data-max-time").trim()),""!==e.attr("data-custom-time-format").trim()&&(n=e.attr("data-custom-time-format").trim()),s||(s=Rt.hourText),p||(p=Rt.minuteText),m||(m=Rt.secondText),e.tm_timepicker({isRTL:Rt.isRTL,hourText:s,minuteText:p,secondText:m,timeFormat:n,minTime:i,maxTime:r,closeText:Rt.closeText,showOn:"both",buttonText:"",beforeShow:function(t,i){a(i.dpDiv).removeClass(o).removeClass("tm-datepicker-normal tm-datepicker-top tm-datepicker-bottom").addClass(this.id+" tm-bsbb-all tm-ui-skin-"+c+" tm-timepicker tm-datepicker tm-datepicker-"+d+" tm-datepicker-"+l).appendTo("body"),ee.off("click",".tm-ui-dp-overlay").on("click",".tm-ui-dp-overlay",function(){e.tm_timepicker("hide")}),Kt.addClass("tm-static"),e.prop("readonly",!0),te.trigger({type:"tm-timepicker-beforeShow",input:t,inst:i})},onClose:function(){Kt.removeClass("tm-static"),e.prop("readonly",!1),e.trigger("change")}}),a("#ui-tm-datepicker-div").hide()}),i.find(".tm-epo-datepicker").toArray().forEach(function(t){var e,r,n=a(t),c=parseInt(n.attr("data-start-year").trim(),10),l=parseInt(n.attr("data-end-year").trim(),10),d=n.attr("data-min-date").trim(),s=n.attr("data-max-date").trim(),p=n.attr("data-disabled-dates").trim(),m=n.attr("data-enabled-only-dates").trim(),_=n.attr("data-disabled-weekdays").trim().split(","),f=n.attr("data-disabled-months").trim().split(","),u=n.attr("data-date-format").trim(),g=n.attr("data-date-showon").trim(),h=n.attr("data-date-defaultdate").trim(),v=n.attr("data-date-theme").trim(),y=n.attr("data-date-theme-size").trim(),b=n.attr("data-date-theme-position").trim();""!==p&&(e=p.split(","),-1!==p.indexOf(",")&&e.length>0&&(p=e)),""!==m&&(r=m.split(","),-1!==m.indexOf(",")&&r.length>0&&(m=r)),""===d&&(d=""===c?null:new Date(c,0,1)),""===s&&(s=""===l?null:new Date(l,11,31)),n.data("tc-enabled_only_dates",m),n.data("tc-disabled_weekdays",_),n.data("tc-disabled_months",f),n.data("tc-disabled_dates",p),n.data("tc-format",u),n.tm_datepicker({monthNames:Rt.monthNames,monthNamesShort:Rt.monthNamesShort,dayNames:Rt.dayNames,dayNamesShort:Rt.dayNamesShort,dayNamesMin:Rt.dayNamesMin,isRTL:Rt.isRTL,showOtherMonths:!0,selectOtherMonths:!0,showOn:g,defaultDate:h,buttonText:"",showButtonPanel:!0,firstDay:Rt.first_day,closeText:Rt.closeText,currentText:Rt.currentText,dateFormat:u,minDate:d,maxDate:s,onSelect:function(){var t,e,o=a(this),r="#"+a.epoAPI.dom.id(o.attr("id")),n=o.tm_datepicker("getDate"),c="",l="",d="",s=i.find(r+"_day"),g=i.find(r+"_month"),h=i.find(r+"_year");n&&(c=n.getDate(),l=n.getMonth()+1,d=n.getFullYear(),t=a.tm_datepicker.formatDate(u,n),(-1!==f.indexOf(l.toString())||-1!==_.indexOf(n.getDay().toString())||-1!==p.indexOf(t)||""!==m&&-1===m.indexOf(t))&&(e=o.data("tm-last-date"),e=o.data("tm-last-date")?o.data("tm-last-date"):"",o.val(e),o.tm_datepicker("setDate",e),e?(c=(n=o.tm_datepicker("getDate")).getDate(),l=n.getMonth()+1,d=n.getFullYear()):(c="",l="",d=""))),s.val(c),g.val(l),h.val(d),o.data("tm-last-date",o.val())},beforeShow:function(t,e){a(e.dpDiv).removeClass(o).removeClass("tm-datepicker-normal tm-datepicker-top tm-datepicker-bottom").addClass(this.id+" tm-bsbb-all tm-ui-skin-"+v+" tm-datepicker tm-datepicker-"+b+" tm-datepicker-"+y).appendTo("body"),ee.off("click",".tm-ui-dp-overlay").on("click",".tm-ui-dp-overlay",function(){n.tm_datepicker("hide")}),ee.off("click",".ui-tm-datepicker-current").on("click",".ui-tm-datepicker-current",function(){var t,i=new Date,o=a.tm_datepicker._daylightSavingAdjust(new Date(i.getFullYear(),i.getMonth(),i.getDate())),r=o.getDay(),c=o.getMonth()+1,l="#"+e.id.replace(/\\\\/g,"\\"),d=!1,s=n.tm_datepicker("getDate");if(""!==m)t=a.tm_datepicker.formatDate(u,s),d=-1!==m.indexOf(t);else if(-1!==f.indexOf(c.toString())||-1!==_.indexOf(r.toString()))d=!1;else{if(""!==p)return t=a.tm_datepicker.formatDate(u,s),[-1===p.indexOf(t),""];d=!0}d&&(a.tm_datepicker._setDate(e,o),a.tm_datepicker._gotoToday(l))}),Kt.addClass("tm-static"),n.prop("readonly",!0),te.trigger({type:"tm-datepicker-beforeShow",input:t,inst:e})},onClose:function(){Kt.removeClass("tm-static"),n.prop("readonly",!1),n.removeAttr("readonly"),n.trigger("change")},beforeShowDay:function(t){var e,i=t.getDay(),o=t.getMonth()+1;return""!==m?(e=a.tm_datepicker.formatDate(u,t),[-1!==m.indexOf(e),""]):-1!==f.indexOf(o.toString())||-1!==_.indexOf(i.toString())?[!1,""]:""!==p?(e=a.tm_datepicker.formatDate(u,t),[-1===p.indexOf(e),""]):[!0,""]}}),a("#ui-tm-datepicker-div").hide()}),i.find(".tmcp-date-select").on("change.cpf",function(){var t="#"+a.epoAPI.dom.id(a(this).attr("data-tm-date")),e=i.find(t),o=e.attr("data-date-format"),r=i.find(t+"_day").val(),n=i.find(t+"_month").val(),c=i.find(t+"_year").val(),l=a.tm_datepicker.formatDate(o,new Date(c,parseInt(n,10)-1,r));r>0&&n>0&&c>0?(e.tm_datepicker("setDate",l),e.trigger("change")):(e.val(""),e.trigger("change.cpf"))}).on("focus.cpf",function(){var e="#"+a.epoAPI.dom.id(a(this).attr("data-tm-date")),o=i.find(e),r=i.find(e+"_day"),n=i.find(e+"_month"),c=i.find(e+"_year"),l=r.val(),d=n.val(),s=c.val(),p=a(this);""!==s&&""!==d&&""!==l||""!==s&&""!==d&&""===l||""!==l&&""!==s&&""===d||""!==l&&""!==d&&""===s?p.find("option").toArray().forEach(function(e){var i,r=a(e),n=r.val(),c=s+"-"+d+"-"+l;if(p.is(".tmcp-date-day")){if(""===s||""===d)return;c=s+"-"+d+"-"+n}else if(p.is(".tmcp-date-month")){if(""===s||""===l)return;c=s+"-"+n+"-"+l}else if(p.is(".tmcp-date-year")){if(""===l||""===d)return;c=n+"-"+d+"-"+l}if(""!==n)try{(i=a.tm_datepicker.parseDate("yy-mm-dd",c))&&(It(i,o)?r.prop("disabled",!1):r.prop("disabled",!0))}catch(e){t.console.log(e),r.prop("disabled",!0),Mt=e}}):(r.find("option").prop("disabled",!1),n.find("option").prop("disabled",!1),c.find("option").prop("disabled",!1))}),te.on("resizestart",function(){var i=a(e.activeElement);if(i.is(".hasDatepicker")){if(i.data("resizestarted",!0),a(t).width()<768)return void i.data("resizewidth",!0);i.tm_datepicker("hide")}}),te.on("resizestop",function(){var t=a(e.activeElement);t.is(".hasDatepicker")&&t.data("resizestarted")&&(t.data("resizewidth")&&t.tm_datepicker("hide"),t.tm_datepicker("show")),t.data("resizestarted",!1),t.data("resizewidth",!1)}))}function Pt(t){var e,i=t.epoEventId,o=t.main_product,r=!a.tcepo.formSubmitEvents[i].some(function(t){return typeof t&&("function"==typeof t.trigger||!1)&&!t.trigger()});return a.tcepo.formSubmitEvents[i].forEach(function(t){"object"===(e=typeof t)&&(r?t.on_true():t.on_false())}),r||setTimeout(function(){o.find(Jt.addToCartButtonSelector).first().removeClass("disabled").removeClass("loading").removeAttr("disabled").removeClass("fpd-disabled")},100),te.trigger("tm-apply-submit-events",{epo:{form_is_submit:r}}),r}function St(t){var e,i,o=t.form,r=t.this_epo_container,n=t.main_product,c=t.epoEventId;return"yes"===Rt.tm_epo_global_enable_validation&&(e={},r.find(".tmcp-ul-wrap").toArray().forEach(function(t){var o,r,n,c;t=a(t),(i=t.data("tm-validation"))&&"object"===a.tmType(i)&&(r=(o=t.find(".tm-epo-field")).first().attr("name"),t.is(".tm-extra-product-options-radio.tm-element-ul-radio")?(r=o.last().attr("name"),e[r]=i):t.is(".tm-extra-product-options-checkbox.tm-element-ul-checkbox")?o.each(function(r,n){"required"in i&&(i.required=function(e){var i=t.find("input.tm-epo-field.tmcp-checkbox:checked").length;return 0===i?o.last().attr("name")===a(e).attr("name"):i<=0}),e[a(n).attr("name")]=i}):t.is(".tm-extra-product-options-product.tm-element-ul-product")?("required"in i&&(n=t.find(".product-variation-id").first().attr("name"),c={required:function(t){return!(!u(o,!0)||!o.is("select")||"variable"!==o.children(":selected").attr("data-type"))}},e[n]=c),e[r]=i):e[r]=i)}),o.removeData("tc_validator"),o.tc_validate({focusInvalid:!1,ignore:Jt.qtySelector+",.tcdisabled,.tmcp-upload-hidden,#wc_bookings_field_duration,input.tm-qty:hidden[type='number'],input.input-text.qty,.ignore,.variations select,.tc-epo-variable-product-selector,.tm-extra-product-options-variations input,.tm-extra-product-options-variations select,input:not(.tc-extra-product-options input),select:not(.tc-extra-product-options select)",rules:e,errorClass:"tm-error",validClass:"tm-valid",errorElement:"label",errorPlacement:function(t,e){return e.is(".tm-epo-field.tmcp-radio")||e.is(".tm-epo-field.tmcp-checkbox")||e.is(".tm-epo-field.tmcp-radio")?"before"===Rt.tm_epo_global_error_label_placement?t.prependTo(e.closest(".tmcp-ul-wrap").parent()):t.appendTo(e.closest(".tmcp-ul-wrap").parent()):"before"===Rt.tm_epo_global_error_label_placement?t.prependTo(e.closest(".tmcp-field-wrap")):t.appendTo(e.closest(".tmcp-field-wrap")),!1},invalidHandler:function(t,e){te.trigger("tm-invalidHandler",{epo:{validator:e}}),setTimeout(function(){n.find(Jt.addToCartButtonSelector).first().removeClass("disabled").removeClass("loading").removeAttr("disabled").removeClass("fpd-disabled")},100),e.errorList&&e.errorList[0]&&e.errorList[0].element&&M(a(e.errorList[0].element),c)},submitHandler:function(){return t.is_quickview||n.find(Jt.addToCartButtonSelector).first().addClass("disabled"),Pt(t)}}),o.find(".single_add_to_cart_button").on("click",function(t){o.tc_validate().form()||(t.preventDefault(),t.stopImmediatePropagation())}),!0)}function qt(t){var e=t.form,i=t.epoEventId;te.trigger("tm-from-submit",{epo:t,functions:{tm_apply_validation:St,apply_submit_events:Pt}}),!St(t)&&a.tcepo.formSubmitEvents[i].length&&e.on("submit",function(){Pt(t)})}function Et(t){var e,i=t.totalsHolder,o=t.totalsHolderContainer,r=t.currentCart,n=t.variationForm,c=t.variation,l=i.data("variations");i.data("current_variation",c),l&&c&&c.variation_id&&void 0!==l[c.variation_id]?(e=l[c.variation_id],i.data("price",e),i.removeData("tcprice")):c&&"display_price"in c?(e=c.display_price,i.data("price",e),i.data("priceIsWithDiscount","1"),i.removeData("tcprice")):c&&a(c.price_html).find(".amount:last").length&&(e=(e=(e=(e=a(c.price_html).find(".amount:last").text()).replace(Rt.currency_format_thousand_sep,"")).replace(Rt.currency_format_decimal_sep,".")).replace(/[^0-9.]/g,""),e=parseFloat(e),i.data("price",e),i.removeData("tcprice")),o.find(".cpf-product-price").val(e),n.data("tm-styled-variations")||r.trigger({type:"tm-epo-update"})}function Tt(t,e,i,o,r,n,c,l){var d=e.find(i);return!1===t.is_associated&&(d=d.not(Jt.associatedEpoSelector+" "+i)),o||(o=0),r||(r=0),n||(n=[]),l||(d=d.filter(".tcenabled")),d.toArray().forEach(function(t){var e,i,d,s,p,m,_,f,u,g,h,v,y=a(t),b="",w=y.closest(".cpf_hide_element"),x=y.closest(".tmcp-field-wrap"),k=w.attr("data-fblabelshow"),F=w.attr("data-fbvalueshow"),C="",I=x.find(".tm-qty").val();""===k&&(C=w.find(".tm-epo-element-label").html()),void 0===I&&(I=""),y.is(":checkbox, :radio, :input")&&(i=0,d=0,s=0,p=0,y.is(".tmcp-checkbox, .tmcp-radio")?l||y.is(":checked")?(i=y.data("raw_price"),d=y.data("price"),s=y.data("raw_original_price"),p=y.data("original_price"),c=!0,y.data("isset",1),_=(m=y.closest("li.tmcp-field-wrap")).find(".checkbox_image,.radio_image"),b="",h="",(f=y.closest("li.tmcp-field-wrap").find(".tm-label")).length&&(h=b=f.html()),_.length&&(b+=_.clone().addClass("tc-img-floating")[0].outerHTML),y.is(".use_images")&&(h=b=m.find(".tc-label").first().html(),_.length&&(b=b+'<img class="tc-img-floating" src="'+y.attr("data-image")+'"')),n.push({title:C,value:b,valueText:h,price:d,original_price:p,quantity:I,label_show:k,value_show:F})):y.data("isset",0):y.is(".tmcp-select")?(i=(v=y.find("option:selected")).data("raw_price"),d=v.data("price"),s=v.data("raw_original_price"),p=v.data("original_price"),""===(u=y.children("option:selected")).val()&&""===u.attr("data-rulestype")||(c=!0),y.find("option").data("isset",0),v.data("isset",1),""===v.val()&&""===v.attr("data-rulestype")||(b=v.attr("data-text"),n.push({title:C,value:b,valueText:b,price:d,original_price:p,quantity:I,label_show:k,value_show:F}))):(e=y.val(),y.is("[type='file']")&&(e=e.replace("C:\\fakepath\\","")),e?y.is(".tmcp-range")&&"0"===e?y.data("isset",0):(i=y.data("raw_price"),d=y.data("price"),s=y.data("raw_original_price"),p=y.data("original_price"),c=!0,y.data("isset",1),b=e,y.is(".tmcp-range")&&(g=1===(g=a(".tm-range-picker[data-field-id='"+y.attr("id")+"']").attr("data-step").split(".")).length?0:g[1].length,b=a.epoAPI.math.format(b,{decimal:Jt.localDecimalSeparator,thousand:Jt.localThousandSeparator,precision:g})),n.push({title:C,value:b,valueText:b,price:d,original_price:p,quantity:I,label_show:k,value_show:F})):y.data("isset",0)),i||(i=0),d||(d=0),s||(s=0),p||(p=0),o=parseFloat(o)+parseFloat(i),r=parseFloat(r)+parseFloat(s))}),{total:o,original_total:r,floatingBoxData:n,showTotal:c,elementsLength:d.length}}function jt(t,e,i,o,r,n,c,l){var d,s=a.extend(!0,{},t),p=i.find(Jt.associatedEpoSelector),m=i,_=!0;c.addClass("tm-hidden"),"variable"===o?i.is(".tc-init-variations")?i.trigger("refresh.tc-variation-form"):(i.addClass("variations_form"),setTimeout(function(){d=Bt(m,!1,p.attr("data-product-id"),p.attr("data-epo-id"),r,s),i.addClass("tc-init-variations"),i.tc_product_variation_form(r,n,c,d)},40),_=!1):i.is(".tc-init-product")||(i.addClass("tc-init-product"),c.find(".tc-epo-element-variable-product").removeClass("variations_form"),c.find(".tc-epo-element-variations").removeClass("variations"),setTimeout(function(){Bt(m,!1,p.attr("data-product-id"),p.attr("data-epo-id"),r,s)},20),_=!1),i.removeClass("tm-hidden"),_&&te.trigger("cpflogicdone"),void 0===l&&te.tcScrollTo(i,200,-100)}function zt(n,l,f){var u,g,h,v,y,b,w,x,k,F,C=n.product_id,S=n.main_product,q=n.main_cart,E=n.this_epo_container,T=n.this_totals_container,z=n.this_epo_totals_container,O=n.epoEventId,B=(n.has_epo,n.main_epo_inside_form),H=n.epo_id_selector,M=n.epo_id,R=n.product_id_selector,Q="main",Z=n.is_associated?"tc-variation-form":"wc-variation-form",W=n.is_associated?"tc_":"";f&&l?(Q=a.epoAPI.applyFilter("tc_get_item_id",l.attr("data-item_id"),l),u=S.find(".tm-extra-product-options.tm-cart-"+Q),g=S.find(".tm-totals-form-"+Q),h=S.find(".tm-epo-totals.tm-cart-"+Q),w=l.find(".variations_form").first()):(q&&0!==q.length||(q=E.is(".tc-shortcode")?S:D(S,S,"form",C)),l=q.parent(),u=E,g=T,h=z,w=n.variations_form),n.is_associated&&(Q=u.attr("data-cart-id")),v=f||q,h.data("tm_for_cart",v),y=d(v),x=m(v),h.data("variationIdElement",s(v,".wceb_picker_wrap "+y)),h.data("qty_element",x),b=h.data("type"),w.data("tc_product_id",C),k=h.attr("data-tm-epo-final-total-box"),te.on("epoCalculateRules",function(t,e){t&&e&&e.currentCart&&at(n,e.currentCart)}),at(n,v),u.find("select.tm-epo-field").off("tm-select-change-html").on("tm-select-change-html",function(){var t,e,i,o,r,n;f&&q&&void 0!==q.data("per_product_pricing")&&!q.data("per_product_pricing")||(e=c((t=a(this)).find("option:selected").data("price"),h,!1,!1,t),i=c(t.find("option:selected").data("original_price"),h,!1,!1,t),o=t.closest(".tmcp-field-wrap").find(".tc-tooltip"),r=t.closest(".tmcp-field-wrap").find(".tc-inline-description"),P(t.closest(".tmcp-field-wrap").find(".tc-price"),t.find("option:selected").data("price"),e,t.find("option:selected").data("original_price"),i),o.length>0&&o.attr("data-tm-tooltip-html",t.find("option:selected").attr("data-tm-tooltip-html")).trigger("tc-tooltip-html-changed"),r.length>0&&(t.find("option:selected").attr("data-tm-tooltip-html")?r.html(t.find("option:selected").attr("data-tm-tooltip-html")):r.html("")),"0"!==t.find("option:selected").attr("data-hide-amount")&&"yes"!==Rt.tm_epo_show_price_inside_option_hidden_even||"yes"!==Rt.tm_epo_show_price_inside_option||!t.find("option:selected").attr("data-text")||("yes"===Rt.tm_epo_auto_hide_price_if_zero&&!1===a.tmempty(t.find("option:selected").data("price"))||"yes"!==Rt.tm_epo_auto_hide_price_if_zero&&""!==t.find("option:selected").attr("data-price"))&&(n="",t.find("option:selected").html(t.find("option:selected").attr("data-text")+" ("+n+e+")")),""===t.val()?o.addClass("tm-hidden"):t.find("option:selected").attr("data-tm-tooltip-html")?o.removeClass("tm-hidden"):o.addClass("tm-hidden"))}).off("tm-math-select-change-html-all tm-select-change-html-all").on("tm-math-select-change-html-all tm-select-change-html-all",function(t){var e,i,o,r,l,d;f&&q&&void 0!==q.data("per_product_pricing")&&!q.data("per_product_pricing")||(i=(e=a(this)).closest(".tmcp-field-wrap").find(".tc-tooltip"),o=e.closest(".tmcp-field-wrap").find(".tc-inline-description"),i.length>0&&i.attr("data-tm-tooltip-html",e.find("option:selected").attr("data-tm-tooltip-html")).trigger("tc-tooltip-html-changed"),o.length>0&&(e.find("option:selected").attr("data-tm-tooltip-html")?o.html(e.find("option:selected").attr("data-tm-tooltip-html")):o.html("")),"yes"===Rt.tm_epo_show_price_inside_option&&e.find("option").each(function(){if(!(r=a(this)).val())return!0;"tm-select-change-html-all"===t.type?(r.removeClass("tm-epo-late-field").removeData("tm-price-for-late islate"),et(n,e,void 0,r,1)):"tm-math-select-change-html-all"===t.type&&et(n,e,void 0,r,1,!0),l=1,"yes"!==Rt.tm_epo_multiply_price_inside_option&&(l=e.data("tm-quantity")),l||(l=1),d=c(r.data("price")/l,h,!0,!1,e),"0"!==r.attr("data-hide-amount")&&"yes"!==Rt.tm_epo_show_price_inside_option_hidden_even||!r.attr("data-text")||("yes"===Rt.tm_epo_auto_hide_price_if_zero&&!1===a.tmempty(r.data("price"))||"yes"!==Rt.tm_epo_auto_hide_price_if_zero&&""!==r.attr("data-price"))&&r.html(r.attr("data-text")+" ("+d+")")}),""===e.val()?i.addClass("tm-hidden"):e.find("option:selected").attr("data-tm-tooltip-html")?i.removeClass("tm-hidden"):i.addClass("tm-hidden"))}).off("tm-select-change").on("tm-select-change",function(){var t;f&&q&&void 0!==q.data("per_product_pricing")&&!q.data("per_product_pricing")||((t=a(this)).trigger("tm-select-change-html"),t.trigger("tm-select-change-html-all"),v.trigger({type:"tm-epo-update",norules:1,element:t}))}),u.off("focus.cpf",".tm-quantity .tm-qty").on("focus.cpf",".tm-quantity .tm-qty",function(){var t=a(this),e=t.closest(".tmcp-field-wrap").find(".tm-epo-field"),i=parseFloat(t.val()),o=parseFloat(t.attr("max")),r=parseFloat(t.attr("min")),n=t.attr("step"),c=U(e,!1),l=J(e,!1),d=!0;i&&""!==i&&"NaN"!==i||(i=0),""!==o&&"NaN"!==o||(o=""),""!==r&&"NaN"!==r||(r=0),"any"!==n&&""!==n&&void 0!==n&&"NaN"!==parseFloat(n)||(n=1),(i<r||i>o)&&(d=!1),c&&l&&d?t.data("tm-prev-value",i):t.data("tm-prev-value",r)}).off("change.cpf",".tm-quantity .tm-qty").on("change.cpf",".tm-quantity .tm-qty",function(){var t=a(this),e=t.closest(".tmcp-field-wrap").find(".tm-epo-field"),i=parseFloat(t.val()),o=parseFloat(t.attr("max")),r=parseFloat(t.attr("min")),c=t.attr("step"),l=U(e,!1),d=J(e,!1),s=!0;i&&""!==i&&"NaN"!==i||(i=0),""!==o&&"NaN"!==o||(o=""),""!==r&&"NaN"!==r||(r=0),"any"!==c&&""!==c&&void 0!==c&&"NaN"!==parseFloat(c)||(c=1),(i<r||i>o)&&(s=!1),l&&d&&s?(n.noEpoUpdate?e.data("tm-quantity",t.val()).trigger("change.cpf"):e.data("tm-quantity",t.val()).trigger("change"),e.trigger("tm-select-change-html-all")):t.data("tm-prev-value")?t.val(t.data("tm-prev-value")):t.val(r),t.trigger("cpf-changed")}).off("tmaddquantity",".tm-quantity .tm-qty").on("tmaddquantity",".tm-quantity .tm-qty",function(){var t=a(this);t.closest(".tmcp-field-wrap").find(".tm-epo-field").data("tm-quantity",t.val())}),u.find(".tmcp-textfield.tm-epo-field[maxlength],textarea.tm-epo-field[maxlength]").each(function(){var t=a(this),e=a.epoAPI.template.html(Jt.templateEngine.tc_chars_remanining,{maxlength:t.attr("maxlength"),characters_remaining:Rt.i18n_characters_remaining});t.after(a(e))}),u.find("input.tm-epo-field[maxlength],textarea.tm-epo-field[maxlength]").off("change.tc_maxlen input.tc_maxlen").on("change.tc_maxlen input.tc_maxlen",function(){var t=a(this);t.closest(".tmcp-field-wrap").find(".tc-chars-remanining").html(parseInt(t.attr("maxlength"),10)-parseInt(t.val().length,10))}),u.find(".tm-epo-field").off("tm_trigger_product_image").on("tm_trigger_product_image",function(){var t,e,i,o,r=a(this);r.is(".tm-product-image:checkbox, .tm-product-image:radio, select.tm-product-image")?(e=r.closest(".tmcp-field-wrap").find("label img"),i=r.closest(".cpf-section").is(".tm-epo-variation-section"),t=r,r.is("select.tm-product-image")&&(t=r.children("option:selected")),(a(e).length>0||i&&void 0!==t.attr("data-image")||void 0!==t.attr("data-image")&&""!==t.attr("data-image")||void 0!==t.attr("data-imagep")&&""!==t.attr("data-imagep"))&&(r.is(":checked")||r.is("select.tm-product-image")&&""!==r.val()&&(""!==r.find("option:selected").attr("data-rules")||r.is(".tm-epo-variation-element")))?((o=a(e).first().attr("data-original"))||i||(o=a(e).first().attr("src")),o||(o=t.attr("data-image")),t.attr("data-imagep")&&(o=t.attr("data-imagep")),o?S.trigger("tm_change_product_image",{src:o,element:r,element_current:t,main_product:S,epo_holder:u}):S.trigger("tm_change_product_image",{src:!1,element:r,element_current:t,main_product:S,epo_holder:u})):S.trigger("tm_restore_product_image",{element:r,element_current:t,main_product:S,epo_holder:u})):S.trigger("tm_attempt_product_image",{element:r,element_current:t,main_product:S,epo_holder:u})}),u.find(".tm-quantity").off("showhide.cpfcustom").on("showhide.cpfcustom",function(){var t,e,i,o=a(this),r=o.closest(".tmcp-field-wrap").find(".tm-epo-field"),n=!1;r.is(".tm-epo-variation-element")||(r.is("select")?""!==r.val()&&(n=!0):r.is(":checkbox")?r.is(":checked")&&(n=!0):r.is(":radio")?r.is(":checked")&&(n=!0,"yes"===Rt.tm_epo_show_only_active_quantities&&r.closest(".cpf_hide_element").find(".tm-epo-field.tmcp-radio").each(function(){a(this).closest(".tmcp-field-wrap").find(".tm-quantity").hide()})):r.val()&&(n=!0),e=(t=o.find(".tm-qty")).val(),i=t.attr("min")||"",n?("yes"===Rt.tm_epo_show_only_active_quantities&&o.show(),t.removeClass("ignore").prop("disabled",!1)):("yes"===Rt.tm_epo_show_only_active_quantities&&(o.hide(),e||t.val(i)),t.addClass("ignore").prop("disabled",!0)),setTimeout(function(){o.closest(".tcowl-carousel").trigger("refresh.owl.carousel")},200))}),u.find(".tm-epo-field").off("change.cpfcustom").on("change.cpfcustom",function(){a(this).closest(".tmcp-field-wrap").find(".tm-quantity").trigger("showhide.cpfcustom")}),u.find(".tm-epo-field").filter(":checkbox:checked, :radio:checked").each(function(){a(this).closest(".tmcp-field-wrap").addClass("tc-active")}),u.find(".tm-epo-field").off("change.cpf").on("change.cpf",function(){var t,e=a(this),i=e.closest(".tmcp-field-wrap"),o=e.closest(".tmcp-ul-wrap");e.is(":checkbox, :radio")&&(e.is(":radio")&&o.find(".tmcp-field-wrap").removeClass("tc-active"),e.is(":checked")?i.addClass("tc-active"):i.removeClass("tc-active")),e.is(".tm-epo-variation-element")||(e.is(".use_images:checkbox, .use_images:radio")&&e.attr("data-imagec")&&(t=i.find(".radio_image,.checkbox_image").first()).length>0&&(e.is(":checked")?t.prop("src",e.attr("data-imagec")):t.prop("src",e.attr("data-image"))),e.is(".use_images:radio")&&e.closest(".cpf-type-radio").find(".use_images:radio").not(e).each(function(){var t=a(this);t.closest(".tmcp-field-wrap").find(".radio_image").first().prop("src",t.attr("data-image"))}),e.is(".tmcp-range")&&e.trigger("change.cpflogic"),e.is("select")?e.trigger("tm-select-change"):(e.is(".tmcp-radio")&&e.closest(".cpf_hide_element").find(".tm-quantity .tm-qty").each(function(){a(this).closest("li.tmcp-field-wrap").find(".tmcp-radio").is(":checked")?a(this).removeAttr("disabled"):a(this).attr("disabled","disabled")}),v.trigger({type:"tm-epo-update",norules:1,element:e}))),e.trigger("tm_trigger_product_image"),setTimeout(function(){a(".tm-owl-slider").each(function(){a(this).trigger("refresh.owl.carousel")})},200),S.trigger("tm_attempt_product_image",{element:e,main_product:S,epo_holder:u})}),u.find(".tm-has-clearbutton .tm-epo-field").off("change.cpfclearbutton").on("change.cpfclearbutton cpfclearbutton",function(){var t,e=a(this),i=e.closest(".tmcp-field-wrap");e.is(":checked")&&(t=e.closest(".cpf_hide_element").find(".tm-epo-reset-radio").removeClass("tm-hidden"),i.append(t))}),u.find(".tm-epo-reset-radio").off("click.cpf").on("click.cpf",function(){var t=a(this),e=t.closest(".cpf_hide_element").find(".tm-epo-field.tmcp-radio:checked");e.length&&(e.removeAttr("checked").prop("checked",!1),e.trigger("change.cpflogic"),e.trigger("change.cpf"),e.is(".tc-epo-field-product")&&e.trigger("change.cpfproduct",{forced:1})),t.addClass("tm-hidden")}),u.find(".tm-epo-field.tmcp-textarea,.tm-epo-field.tmcp-textfield").off("input.cpf").on("input.cpf",function(){a(this).trigger("change.cpf")}),u.find(".tm-epo-field.tmcp-upload").off("change.cpfv change.tcupload").on("change.cpfv change.tcupload",function(){var e,i,o=a(this),r=o.closest("label"),n=o.closest(".tmcp-field-wrap"),c=n.find(".cpf-upload-container"),l=n.find(".tm-filename"),d=o.val().replace("C:\\fakepath\\",""),s=o.attr("data-file"),p=t.URL||t.webkitURL,m=this.files[0],_=n.find(".tc-upload-preview");c.length&&l.length<=0&&(l=a('<span class="tm-filename"></span>'),r.after(l)),l.html(d),(e=u.data("num_uploads"))||(e=[]),""!==d&&(e[o.closest(".cpf_hide_element").attr("data-uniqid")]=d),u.data("num_uploads",e),o.next(".tmcp-upload-hidden").remove(),(d||s)&&"yes"===Rt.tm_epo_upload_inline_image_preview&&p&&p.createObjectURL&&m&&(_.length||(_=a('<div class="tc-upload-preview"></div>'),n.find("label.tm-epo-field-label").after(_)),_.empty(),(i=new Image).onload=function(){var t=this.src;_.html('<img src="'+t+'"></div>')},i.src=s||p.createObjectURL(m))}),x.off("change.cpf").on("change.cpf",function(){var t=a(this);v.trigger("tm-epo-check-dpd"),t.data("tm-prev-value",t.val()),v.trigger({type:"tm-epo-update",norules:2})}).data("tm-prev-value",x.val()),u.find(".cpf-type-product .tc-epo-field-product").off("change.cpfproduct").on("change.cpfproduct",function(t,e){var i,o,r,c,l,d,s,p=a(this),m=p.closest(".cpf_hide_element").find(".tc-epo-element-product-container-wrap"),_=p.closest(".tmcp-field-wrap").find(".tc-epo-element-product-container-wrap"),f=_.length>0,u=!1,g=1e3;if((!e||2!==e.forced)&&(void 0===t.isTrigger||!p.data("triggeredonce")||e&&e.forced)){if(p.data("triggeredonce",1),p.is(":checkbox")||(g=t.isTrigger),p.is(":checkbox"))s=m.find(Jt.associateQtySelector),p.is(":checked")?(m.addClass("tc-active-product"),"0"===s.val()&&("0"===s.attr("min")?s.val(1).trigger("change"):s.val(s.attr("min")).trigger("change"))):(m.removeClass("tc-active-product"),s.val(0),s.closest(".tm-quantity-alt").removeClass("tm-hidden"),s.closest(".tm-quantity-alt").find(".single_add_to_cart_product").trigger("cpfqtybutton"),m.find(Jt.associatedEpoCart).trigger("tm-epo-update")),i=p.val(),o=p.attr("data-type"),p.closest(".cpf_hide_element").find(".tc-epo-element-product-li-container").removeClass("tm-hidden");else if(p.is(":radio")){if(p.is(":checked"))f&&(m.addClass("tm-hidden"),_.removeClass("tm-hidden"));else{if(f&&_.addClass("tm-hidden"),!e||!e.forced)return;u=!0}u||(i=p.val(),o=p.attr("data-type"),p.closest(".cpf_hide_element").find(".tc-epo-element-product-li-container").removeClass("tm-hidden"))}else{if(!p.is("select"))return;r=p.children(":selected"),i=p.val(),o=r.attr("data-type"),p.closest(".cpf_hide_element").find(".tc-epo-element-product-li-container").removeClass("tm-hidden")}c=p.closest(".cpf_hide_element").find(".tc-epo-element-product-container"),l=c.filter('[data-product_id="'+i+'"]'),i?0===l.length?(d={action:"wc_epo_get_associated_product_html",product_id:i,layout_mode:p.closest(".cpf_hide_element").attr("data-product-layout-mode"),uniqid:p.closest(".cpf_hide_element").attr("data-uniqid"),name:p.attr("name"),quantity_min:p.closest(".cpf_hide_element").attr("data-quantity-min"),quantity_max:p.closest(".cpf_hide_element").attr("data-quantity-max"),priced_individually:p.closest(".cpf_hide_element").attr("data-priced-individually"),discount:p.closest(".cpf_hide_element").attr("data-discount"),discount_type:p.closest(".cpf_hide_element").attr("data-discount-type")},p.closest(".cpf_hide_element").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),a.ajax({url:Rt.ajax_url,type:"POST",data:d,dataType:"json",success:function(t){200===t.result&&(l=a(t.html),f?p.closest(".tmcp-field-wrap").find(".tc-epo-element-product-container-wrap").empty().append(l):p.closest(".cpf_hide_element").find(".tc-epo-element-product-container-wrap").append(l),jt(n,S,l,o,p,v,c,g))},complete:function(){p.closest(".cpf_hide_element").unblock()}})):(jt(n,S,l,o,p,v,c,g),l.find(Jt.associateQtySelector).trigger("change")):c.addClass("tm-hidden")}}),a(e).off("click.cpfqtybutton cpfqtybutton",".cpf-type-product .single_add_to_cart_product").on("click.cpfqtybutton cpfqtybutton",".cpf-type-product .single_add_to_cart_product",function(t){var e=a(this),i=e.closest(".tm-quantity-alt").find(Jt.associateQtySelector),o=e.is(".alt"),r=e.closest(".cpf_hide_element").find(".tc-epo-element-product-container-wrap");e.data("inittriggeredonce")&&(o?(r.addClass("tc-active-product"),"0"===i.val()&&("0"===i.attr("min")?i.val(1).trigger("change"):i.val(i.attr("min")).trigger("change")),e.removeClass("alt").text(e.attr("data-remove"))):(r.removeClass("tc-active-product"),i.val(0),i.closest(".tm-quantity-alt").removeClass("tm-hidden"),e.addClass("alt").text(e.attr("data-add")))),e.data("inittriggeredonce",1),r.find(Jt.associatedEpoCart).trigger("tm-epo-update")}),a(e).off("change.cpfqtyalt",".cpf-type-product "+Jt.associateQtySelector).on("change.cpfqtyalt",".cpf-type-product "+Jt.associateQtySelector,function(t){var e,i,o,r=a(this),n=r.closest(".cpf_hide_element").find(".tm-epo-field").not(".tc-epo-element-product-li-container .tm-epo-field"),c=r.closest(".tm-quantity-alt").find(".single_add_to_cart_product"),l=n.filter(":checked");if(i=a.epoAPI.math.toInt(r.attr("min")),o=a.epoAPI.math.toInt(r.attr("max")),n.is(":checkbox")&&(0===l.length&&r.val()?(n.prop("checked",!0).trigger("change"),l=n.filter(":checked")):"0"===r.val()&&l.length&&n.prop("checked",!1).trigger("change")),n.is(":radio")||n.is(":checkbox")){if(0===l.length)return;e=l.closest(".tmcp-field-wrap").find("input.tm-qty")}else e=n.closest(".tmcp-field-wrap").find("input.tm-qty");0!==e.length&&(i&&e.attr("min",i),o&&e.attr("max",o),r.closest(".tc-epo-element-product-container").find(Jt.associatedEpoCart).trigger("tm-epo-update"),e.val(r.val()),n.trigger("change.cpfproduct",{forced:2}),"0"===r.val()?c.removeClass("alt"):c.addClass("alt"),c.trigger("cpfqtybutton"))}),v.off("tm-epo-update").on("tm-epo-update",function(t){var e,i,o,d,s,g,y,w,x,F,C,P,E,T,j,D,H,M,U,J,R,Q,Z,W,$,X,G,V,K,ot,rt,nt,ct,lt,dt,st,pt,mt,_t,ft,ut,gt,ht,vt,yt,bt,wt,xt,kt=a(this),Ft=!1,Ct=0,It=0,At=0,Pt=!1,St=1,qt=!0,Et=[],jt=0,zt=0,Ot={},Dt=0,Nt=!1,Bt=!1,Ht="",Lt=!1,Mt=!1,Ut="",Qt="";if((V=t.epoObject?a.extend(!0,{},t.epoObject):a.extend(!0,{},n))&&!V.noEpoUpdate){if(e=a.epoAPI.applyFilter("tc_get_bundleid",kt.attr("data-product_id"),kt),o=h.attr("data-price-override"),i=_(kt),d=p(kt),V.associated_connect&&1===V.associated_connect.length&&(i=parseFloat(V.main_product.find(Jt.associateQtySelector).not(Jt.associatedEpoSelector+" "+Jt.qtySelector).last().val())),t.stopImmediatePropagation(),Ft=a.epoAPI.applyFilter("tcGetCurrentProductPrice",Y(h,!0),v,h),Ct=Ft,Ft=a.epoAPI.applyFilter("tcCalculateCurrentProductPrice",Ft,{epo:V,alternativeCart:f,cart:kt,main_product:S}),Number.isFinite(i)||(h.attr("data-is-sold-individually")||0===m(kt).length)&&(i=1),Ot={qty:i,product_price:Ft},h.data("tc_totals_ob",Ot),t.norules?t.norules&&(1===t.norules&&et(V,t.element),a.tcepo.lateFieldsPrices[O]=[],u.find(".tm-epo-late-field").toArray().forEach(function(t){(t=a(t)).data("price",0),a.tcepo.lateFieldsPrices[O].push({setter:t,price:t.data("tm-price-for-late"),original_price:t.data("tm-original-price-for-late"),bundleid:e,pricetype:tt(V,t)})})):at(V,kt),V.associated_connect&&1===V.associated_connect.length&&(ft=V.associated_connect,V.associated_connect.is("select")&&(ft=V.associated_connect.find("option:selected"))),!1===Ft)return h.empty(),void(V.associated_connect&&1===V.associated_connect.length&&A(ft.closest(".tmcp-field-wrap").find(".tc-price").not(Jt.associatedEpoSelector+" .tc-price"),0,"",0,""));St=a.epoAPI.applyFilter("tcAlterElementQty",St,{epo:V,alternativeCart:f,currentCart:v,main_product:S}),void 0!==v.data("per_product_pricing")&&(qt=v.data("per_product_pricing")),qt=a.epoAPI.applyFilter("tcCalculatePerProductPricing",qt,{epo:V,alternativeCart:f,cart:kt,main_product:S}),B&&"woocommerce_before_add_to_cart_button"===Rt.tm_epo_totals_box_placement&&("variable"!==b&&"variable-subscription"!==b||h.data("moved_inside")||h.data("moved_inside",1)),te.trigger("tcEpoBeforeOptionPriceCalculation",{epo:V,alternativeCart:V,this_product_type:b,cart:kt,totalsHolder:h}),It=(_t=Tt(V,u,".tmcp-field",It,At,Et,Pt)).total,At=_t.original_total,Et=_t.floatingBoxData,Pt=_t.showTotal,xt=_t.elementsLength,h.data("tm-floating-box-data",Et),jt=(_t=Tt(V,u,".tmcp-fee-field",jt,zt,Et,Pt)).total,zt=_t.original_total,Et=_t.floatingBoxData,Pt=_t.showTotal,xt+=_t.elementsLength,a.tcepo.oneOptionIsSelected[O]=Pt,L(S,xt,a.tcepo.oneOptionIsSelected[O]),Pt=a.epoAPI.applyFilter("tcFinalTotalsBoxVisibility",Pt,{epo:V,alternativeCart:f,cart:kt,main_product:S,totalsHolder:h,this_epo_totals_container:z}),jt>0&&(Pt=!0),f&&!qt&&(Pt=!1),"pxq"!==k&&"hide"!==k&&"normal"!==k&&"options"!==k&&"final"!==k&&"hideoptionsifzero"!==k&&"optionsiftotalnotzero"!==k||(Pt=!0),i>1&&(Pt=!0),"variable"!==b&&"variable-subscription"!==b||a.epoAPI.math.toFloat(d)||(Pt=!1),s=It,g=At,y=it(V,parseFloat(Ft),parseFloat(s),e,h),"disable"===k&&(Pt=!1),"disable_change"!==k&&"yes"!==Rt.tm_epo_change_variation_price&&"yes"!==Rt.tm_epo_change_original_price||(Pt=!0),V.is_associated&&!qt&&(Pt=!1),"yes"===Rt.tm_epo_total_price_as_unit_price&&(i=1),T=parseFloat(Ft*i),Rt.extraFee&&(Dt=parseFloat(Rt.extraFee),Number.isFinite(Dt)||(Dt=0)),!1!==(D=a.epoAPI.applyFilter("tcCalculateFinalProductPrice",!1,{alternativeCart:f,product_price:Ft,product_total_price:T,v_product_price:Ct,tm_set_tax_price:r,main_product:S,totalsHolder:h,cartQty:i}))&&"object"==typeof D&&D.hasOwnProperty("productPrice")&&D.hasOwnProperty("productTotalPrice")&&(Ft=D.productPrice,T=D.productTotalPrice),s+=y[0],s=a.epoAPI.applyFilter("tc_adjust_options_price_per_unit",s,T),It=parseFloat(s*i*St),It=a.epoAPI.applyFilter("tc_adjust_options_total_price",It,i,St,s),g+=y[1],g=a.epoAPI.applyFilter("tc_adjust_options_price_per_unit",g,T),At=parseFloat(g*i*St),At=a.epoAPI.applyFilter("tc_adjust_options_total_price",At,i,St,g),"1"===o&&parseFloat(It)>0&&(Ft=0,Ct=0,T=parseFloat(Ft*i)),T=a.epoAPI.applyFilter("tc_adjust_product_total_price_without_options",T),It=a.epoAPI.applyFilter("tcAdjustTotal",It,{epo:V,totalsHolder:h,cart:kt,main_product:S}),At=a.epoAPI.applyFilter("tcAdjustTotal",At,{epo:V,totalsHolder:h,cart:kt,main_product:S}),K=It=parseFloat(a.epoAPI.applyFilter("tc_adjust_total",It,h)),ot=s,ct=jt=parseFloat(a.epoAPI.applyFilter("tc_adjust_totals_fee",jt,h)),dt=H=It+jt,rt=At=parseFloat(a.epoAPI.applyFilter("tc_adjust_total",At,h)),nt=g,lt=zt=parseFloat(a.epoAPI.applyFilter("tc_adjust_totals_fee",zt,h)),st=M=At+zt,pt=T,mt=parseFloat(T+H+Dt),parseFloat(T+M+Dt),Ft=r(Ft,h),T=r(T,h),It=r(It,h),s=r(s,h),jt=r(jt,h),H=r(H,h),At=r(At,h),g=r(g,h),zt=r(zt,h),M=r(M,h),Dt=r(Dt,h),w=I(It,h,!0,!0),F=I(jt,h,!0,!0),x=I(At,h,!0,!0),C=I(zt,h,!0,!0),U=T,T=parseFloat(T+H+Dt),T=a.epoAPI.applyFilter("tc_adjust_product_total_price",T,H,Dt,It,jt,h),j=parseFloat(T+M+Dt),j=a.epoAPI.applyFilter("tc_adjust_product_total_price",T,M,Dt,At,zt,h),P=I(T,h,!0,!0),E=I(j,h,!0,!0),J=I(parseFloat(Ft+parseFloat(s)),h,!0,!0),R=I(parseFloat(Ft+parseFloat(g)),h,!0,!0),"yes"===Rt.tm_epo_fees_on_unit_price&&(J=I(parseFloat(Ft+parseFloat(s)+parseFloat(parseFloat(jt)/i)),h,!0,!0),R=I(parseFloat(Ft+parseFloat(g)+parseFloat(parseFloat(zt)/i)),h,!0,!0)),"pxq"===k||"final"===k||"hide"===k||0===H&&"hideoptionsifzero"===k||(0===It&&"hideoptionsifzero"===k&&"options"!==k||(Nt=!0),0!==jt&&(Bt=!0)),Dt&&(Lt=!0,Ht=I(Dt,h,!0,!0)),P&&"options"!==k&&"optionsiftotalnotzero"!==k&&(Mt=!0),J=a.epoAPI.applyFilter("tc_adjust_formatted_unit_price",J,Ft,s,jt,i),w=a.epoAPI.applyFilter("tc_adjust_formatted_options_total",w,It,s,i),F=a.epoAPI.applyFilter("tc_adjust_formatted_fees_total",F,jt),P=a.epoAPI.applyFilter("tc_adjust_formatted_final_total",P,T,U,H,Dt,i),J=a.epoAPI.applyFilter("tcAdjustFormattedUnitPrice",J,{epo:V,totalsHolder:h,event:t,productPrice:Ft,_total:s,total_plcart_fee_options_totals_fee:jt,cartQty:i}),R=a.epoAPI.applyFilter("tcAdjustFormattedUnitOriginalPrice",R,{epo:V,totalsHolder:h,event:t,productPrice:Ft,_original_total:g,total_plcart_fee_options_totals_fee:jt,cartQty:i}),w=a.epoAPI.applyFilter("tcAdjustFormattedOptionsTotal",w,{epo:V,totalsHolder:h,event:t,total:It,_total:s,total_plus_fee:H,extraFee:Dt,cartQty:i}),x=a.epoAPI.applyFilter("tcAdjustFormattedOptionsOriginalTotal",x,{epo:V,totalsHolder:h,event:t,original_total:At,_original_total:g,original_total_plus_fee:M,extraFee:Dt,cartQty:i}),F=a.epoAPI.applyFilter("tcAdjustFormattedFeesTotal",F,{epo:V,totalsHolder:h,event:t,cart_fee_options_total:jt,extraFee:Dt,cartQty:i}),C=a.epoAPI.applyFilter("tcAdjustFormattedFeesOriginalTotal",C,{epo:V,totalsHolder:h,event:t,cart_fee_options_original_total:zt,extraFee:Dt,cartQty:i}),Ot={qty:i,product_price:Ft,raw_options_price_per_unit:ot,raw_options_total_price:K,raw_cart_fee_options_total_price:ct,raw_total_plus_fee:dt,raw_options_original_price_per_unit:nt,raw_options_original_total_price:rt,raw_cart_fee_options_original_total_price:lt,raw_original_total_plus_fee:st,raw_product_total_price:mt,raw_product_total_price_without_options:pt,options_price_per_unit:s,options_total_price:It,cart_fee_options_total_price:jt,total_plus_fee:H,options_original_price_per_unit:g,options_original_total_price:At,cart_fee_options_total_original_price:zt,original_total_plus_fee:M,product_total_price:T,product_total_original_price:j,product_total_price_without_options:U,formatted_unit_price:J,formatted_options_total:w,formatted_fees_total:F,formatted_final_total:P=a.epoAPI.applyFilter("tcAdjustFormattedFinalTotal",P,{epo:V,totalsHolder:h,event:t,product_total_price:T,product_total_price_without_options:U,total_plus_fee:H,extraFee:Dt,cartQty:i}),formatted_unit_original_price:R,formatted_options_original_total:x,formatted_fees_original_total:C,formatted_final_original_total:E=a.epoAPI.applyFilter("tcAdjustFormattedFinalOriginalTotal",E,{epo:V,totalsHolder:h,event:t,product_total_original_price:j,product_total_price_without_options:U,original_total_plus_fee:M,extraFee:Dt,cartQty:i}),formatted_extra_fee:Ht,show_options_total:Nt,show_fees_total:Bt,show_extra_fee:Lt,show_final_total:Mt,unit_price:Rt.i18n_unit_price,show_unit_price:"yes"===Rt.tm_epo_show_unit_price,options_total:Rt.i18n_options_total,fees_total:Rt.i18n_fees_total,extra_fee:Rt.i18n_extra_fee,final_total:Rt.i18n_final_total},Ot=a.epoAPI.applyFilter("tc_adjust_tc_totals_ob",Ot,{epo_object:V,showTotal:Pt,epoHolder:u,totalsHolder:h,tm_set_price:c,tm_set_price_totals:I,product_total_price:T,product_price:Ft,qty:i}),V.tc_totals_ob=Ot,void 0!==Ot.showTotal&&(Pt=Ot.showTotal),Q=a.epoAPI.template.html(Jt.templateEngine.tc_final_totals,Ot),h.data("tm-html",Q),h.data("tc_totals_ob",Ot),V.associated_connect&&1===V.associated_connect.length&&("1"===V.associated_connect.attr("data-no-price")?(ut=0,gt=0,ht=0,vt=0,yt="",bt="",A(ft.closest(".tmcp-field-wrap").find(".tc-price").not(Jt.associatedEpoSelector+" .tc-price"),ut,yt,ht,bt)):(ut=Ot.product_price+Ot.options_price_per_unit+Ot.cart_fee_options_total_price/Ot.qty,gt=Ot.product_price+Ot.raw_options_price_per_unit+Ot.raw_cart_fee_options_total_price/Ot.qty,ht=Ot.product_price+Ot.options_original_price_per_unit+Ot.cart_fee_options_total_original_price/Ot.qty,vt=Ot.product_price+Ot.raw_options_original_price_per_unit+Ot.raw_cart_fee_options_original_total_price/Ot.qty,yt=c(ut,V.this_epo_totals_containe,!1,!1,ft),bt=c(ht,V.this_epo_totals_containe,!1,!1,ft),A(ft.closest(".tmcp-field-wrap").find(".tc-price").not(Jt.associatedEpoSelector+" .tc-price"),ut,yt,ht,bt),V.associated_connect.data("tm-quantity",Ot.qty),V.associated_connect.data("tm-quantity")&&(ut*=parseFloat(V.associated_connect.data("tm-quantity")),gt*=parseFloat(V.associated_connect.data("tm-quantity")),ht*=parseFloat(V.associated_connect.data("tm-quantity")),vt*=parseFloat(V.associated_connect.data("tm-quantity"))),yt=c(ut,V.this_epo_totals_containe,!1,!1,ft),bt=c(ht,V.this_epo_totals_containe,!1,!1,ft)),V.associated_connect.data("price_set",1),ft.data("associated_price_set",1),ft.data("price_set",1),ft.data("raw_price",gt),ft.data("raw_original_price",vt),ft.data("price",r(ut,V.this_epo_totals_containe,ft)),ft.data("original_price",r(ht,V.this_epo_totals_containe,ft)),V.associated_connect.data("price-changed",1),setTimeout(function(){V.mainEpoObject.main_cart.trigger({type:"tm-epo-update",norules:2})},20)),te.trigger("tcEpoAfterCalculateTotals",{epo:V,alternativeCart:f,this_product_type:b,cart:kt,bundleid:e,totalsObject:Ot,main_product:S,per_product_pricing:qt}),Z=a.epoAPI.applyFilter("hide_native_price",!0),Pt&&i>0?("disable_change"!==k&&"yes"!==Rt.tm_epo_change_variation_price||(!0===Z&&"disable"!==k&&"disable_change"!==k?N(kt).hide():N(kt).show()),"disable"===k||"disable_change"===k||("hideifoptionsiszero"===k||"optionsiftotalnotzero"===k)&&0===H||"hide"===k?(Q="",h.html(Q)):(h.html(Q),te.trigger("tc-totals-container",{epo:Ot,totals_holder:h,data:{epo_object:V,tm_set_price:c,tm_set_price_totals:I,product_total_price:T,product_price:Ft,qty:i},tm_epo_js:Rt})),P&&T>=0&&(W=N(kt),$=a.epoAPI.math.format(T,{symbol:"",decimal:Jt.localDecimalSeparator,thousand:Jt.localThousandSeparator,precision:Rt.currency_format_num_decimals,format:""}),X="1"===o&&parseFloat(M+Dt)>0?parseFloat(M+Dt):parseFloat(parseFloat(h.data("regular-price")*i)+M+Dt),X=a.epoAPI.math.format(X,{symbol:"",decimal:Jt.localDecimalSeparator,thousand:Jt.localThousandSeparator,precision:Rt.currency_format_num_decimals,format:""}),Rt.customer_price_format&&(Ut=Rt.customer_price_format_wrap_start,Qt=Rt.customer_price_format_wrap_end,$=(G=Rt.customer_price_format).replace("__PRICE__",$).replace("__CODE__",Rt.current_currency),h.data("is-on-sale")||(X=G.replace("__PRICE__",X).replace("__CODE__",Rt.current_currency))),$=a.epoAPI.applyFilter("tc_adjust_native_price",$,T),X=a.epoAPI.applyFilter("tc_adjust_native_regular_price",X,T),"disable_change"!==k&&"yes"!==Rt.tm_epo_change_variation_price||(h.data("is-on-sale")?W.html(a.epoAPI.util.decodeHTML(a.epoAPI.template.html(Jt.templateEngine.tc_formatted_sale_price,{price:X,sale_price:$,customer_price_format_wrap_start:Ut,customer_price_format_wrap_end:Qt}))).show():W.html(a.epoAPI.util.decodeHTML(a.epoAPI.template.html(Jt.templateEngine.tc_formatted_price,{price:$,customer_price_format_wrap_start:Ut,customer_price_format_wrap_end:Qt}))).show()),"disable_change"!==k&&"yes"!==Rt.tm_epo_change_original_price||(wt=V.associated_connect?V.main_product.find(Jt.associatedNativeProductPriceSelector):a(Jt.nativeProductPriceSelector),f&&0!==S.find(".cpf-bto-price").length||(void 0===wt.data("tc-original-html")&&wt.data("tc-original-html",wt.html()),T>0?!h.data("is-on-sale")||"1"===o&&parseFloat(M+Dt)>0?wt.html(a.epoAPI.util.decodeHTML(a.epoAPI.template.html(Jt.templateEngine.tc_formatted_price,{price:$,customer_price_format_wrap_start:Ut,customer_price_format_wrap_end:Qt}))).show():wt.html(a.epoAPI.util.decodeHTML(a.epoAPI.template.html(Jt.templateEngine.tc_formatted_sale_price,{price:X,sale_price:$,customer_price_format_wrap_start:Ut,customer_price_format_wrap_end:Qt}))).show():b&&"composite"!==b&&wt.html(a.epoAPI.util.decodeHTML(Rt.current_free_text))),te.trigger("tcEpoMaybeChangePriceHtml",{epo:V,alternativeCart:f,this_product_type:b,cart:kt,bundleid:e,totalsObject:Ot,main_product:S,nativePrice:$}))),f?q.trigger({type:"tm-epo-update",norules:1}):z.data("is_active",!0)):(V.associated_connect&&(wt=V.main_product.find(Jt.associatedNativeProductPriceSelector)).html(wt.data("tc-original-html")),N(kt).each(function(){var t=a(this);t.data("tm-original-html")?t.html(t.data("tm-original-html")):t.data("tm-original-html",t.html())}),0===Ct&&"yes"===Rt.tm_epo_remove_free_price_label?N(kt).hide():"disable_change"!==k&&"yes"!==Rt.tm_epo_change_variation_price||!0===Z&&"disable"!==k&&"disable_change"!==k||N(kt).show(),h.empty(),f&&q.trigger({type:"tm-epo-update",norules:1})),q.trigger("tm-epo-after-update",{container:l}),te.trigger("tc-epo-after-update",{epo:Ot,totals_holder:h,data:{epo_object:V,tm_set_price:c,tm_set_price_totals:I,product_total_price:T,product_price:Ft,qty:i},tm_epo_js:Rt})}}),"variable"!==b&&"variable-subscription"!==b||((F=u.find(".tm-epo-variation-section").first()).find(".tm-epo-reset-variation").off("click.cpfv").on("click.cpfv",function(){var t=a(this),e=a.epoAPI.dom.id(t.attr("data-tm-for-variation")),i=t.closest(".cpf-type-variations"),o=t.closest(".cpf_hide_element").find(".tm-epo-variation-element"),r=t.closest(".cpf_hide_element").find(".tmcp-field-wrap");o.removeAttr("checked").prop("checked",!1),r.removeClass("tc-active"),w.find("[data-attribute_name='attribute_"+e+"']").val("").trigger("change"),w.find("[data-attribute_name='attribute_"+e+"']").trigger("focusin"),S.find(".cpf-type-variations").not(i).each(function(t,e){w.find("[data-attribute_name='attribute_"+a.epoAPI.dom.id(a(e).find(".tm-epo-variation-element").first().attr("data-tm-for-variation"))+"']").trigger("focusin")}),t.blur(),w.trigger("woocommerce_update_variation_values_tmlogic")}),F.find("input.tm-epo-variation-element,input.tm-epo-variation-element + span").off("mouseup.cpfv").on("mouseup.cpfv",function(){var t,e=a(this);e.is("span")&&(e=e.prev("input")),e.attr("disabled")&&w.find(".reset_variations").trigger("click"),t=a.epoAPI.dom.id(e.attr("data-tm-for-variation")),w.find("[data-attribute_name='attribute_"+t+"']").trigger("focusin")}),F.off("click."+Z+".tmepo",".reset_variations, .tc-epo-element-variable-reset-variations").on("click."+Z+".tmepo",".reset_variations, .tc-epo-element-variable-reset-variations",{_epoObject:n},function(t){var e;"disable_change"!==k&&"yes"!==Rt.tm_epo_change_original_price||f&&0!==S.find(".cpf-bto-price").length||(e=t.data._epoObject.associated_connect?t.data._epoObject.main_product.find(Jt.associatedNativeProductPriceSelector):a(Jt.nativeProductPriceSelector)).data("tc-original-html")&&e.html(e.data("tc-original-html")),w.find(".variations .reset_variations, .tc-epo-element-variable-reset-variations").first().trigger("click")}),F.find(".tm-epo-variation-element").off("change.cpfv tm_epo_variation_element_change").on("change.cpfv tm_epo_variation_element_change",function(t){var e,i=a(this),o=a.epoAPI.dom.id(i.attr("data-tm-for-variation")),r=i.val(),n=i.closest(".cpf-type-variations"),c=w.find("[data-attribute_name='attribute_"+o+"']");t&&t.type&&"tm_epo_variation_element_change"===t.type||(e=!1,c.each(function(){if(this.value===r)return e=!0,!1}),e||c.trigger("focusin"),c.val(r).trigger("change")),r||c.trigger("focusin"),S.find(".cpf-type-variations").not(n).each(function(){w.find("#"+a.epoAPI.dom.id(a(this).find(".tm-epo-variation-element").first().attr("data-tm-for-variation"))).trigger("focusin")}),i.blur(),w.trigger("woocommerce_update_variation_values_tmlogic")}).off("focusin.cpfv").on("focusin.cpfv",function(){var t,e=a(this);e.is("select")&&(t=a.epoAPI.dom.id(e.attr("data-tm-for-variation")),w.find("[data-attribute_name='attribute_"+t+"']").trigger("focusin"),w.trigger("woocommerce_update_variation_values_tmlogic"))}),w.off(W+"found_variation.tmepo tm_fix_stock",".single_variation_wrap").on(W+"found_variation.tmepo tm_fix_stock",".single_variation_wrap",function(){j(a(this),l)}),w.off(W+"found_variation.tmepo").on(W+"found_variation.tmepo",function(t,e){var i=a(this);h.data("is-on-sale",e.tc_is_on_sale),h.data("regular-price",e.display_regular_price),te.trigger("tm-epo-found-variation",{epo:n,totalsHolder:h,totalsHolderContainer:g,currentCart:v,variationForm:i,variation:e}),Et({totalsHolder:h,totalsHolderContainer:g,currentCart:v,variationForm:i,variation:e}),j(i,l)}).off(W+"hide_variation.tmepo").on(W+"hide_variation.tmepo",{_epoObject:n},function(t){var e;"disable_change"!==k&&"yes"!==Rt.tm_epo_change_original_price||f&&0!==S.find(".cpf-bto-price").length||(e=t.data._epoObject.associated_connect?t.data._epoObject.main_product.find(Jt.associatedNativeProductPriceSelector):a(Jt.nativeProductPriceSelector)).data("tc-original-html")&&e.html(e.data("tc-original-html")),h.data("price",!1),h.removeData("tcprice"),v.trigger({type:"tm-epo-update",norules:2})}).off(W+"check_variations.tmepo").on(W+"check_variations.tmepo",function(t){var e={},i=0,o=0,r=F.find(".reset_variations");w.find(".variations select, .tc-epo-variable-product-selector").each(function(){var t=a(this).data("attribute_name")||a(this).attr("name"),r=a(this).val()||"";r.length>0&&o++,i++,e[t]=r}),o>0?"hidden"===r.css("visibility")&&r.css("visibility","visible").hide().fadeIn():r.css("visibility","hidden")}).trigger(W+"check_variations"),_t(n,l,Q,S,u)),u.find("select.tm-epo-field").trigger("tm-select-change-html"),u.find(".tm-quantity .tm-qty").trigger("change.cpf"),u.find(".tm-quantity").trigger("showhide.cpfcustom"),u.find(".tm-has-clearbutton .tm-epo-field:checked").trigger("cpfclearbutton"),ot(n),te.on("tm-do-epo-update",function(){v.trigger({type:"tm-epo-update"})}),te.trigger("tm-epo-init-events",{epo:{epo_id:M,form:n.form,currentCart:v,cart_container:l,epo_holder:u,totals_holder_container:g,totals_holder:h,main_cart:q,main_epo_inside_form:B,product_id_selector:R,epo_id_selector:H,product_id:C,this_epo_container:E,this_totals_container:T,this_epo_totals_container:z}}),te.trigger("epoEventHandlers",{epo:n,currentCart:v,cartContainer:l,qtyElement:x,epoHolder:u,totalsHolderContainer:g,totalsHolder:h,variationForm:w,variation_id_selector:y,main_epo_inside_form:B,this_product_type:b,get_price_excluding_tax:o,get_price_including_tax:i}),"disable"!==k&&"disable_change"!==k&&"hide"!==k&&g.addClass("tc-show"),te.trigger("epo_options_before_visible"),"yes"===Rt.tm_epo_progressive_display?setTimeout(function(){u.css("opacity",0).addClass("tc-show").animate({opacity:1},Jt.epoAnimationDelay,"easeOutExpo",function(){te.trigger("epo_options_visible"),te.trigger("tmlazy")})},Jt.epoDelay):(u.addClass("tc-show"),te.trigger("epo_options_visible"),te.trigger("tmlazy")),S.addClass("tc-init")}function Ot(t){var e=t.variations_form,i=t.main_cart,o=t.this_epo_container,r=t.is_associated?"tc_variation_form.cpf":"wc_variation_form.cpf";e.on(r,function(){e.data("epo_loaded")||(k(o),F(o),a.tcepo.lateFieldsPrices[t.epoEventId]=[],zt(t),dt(t),kt(t),t.noEpoUpdate=!1,setTimeout(function(){w(o),i.trigger({type:"tm-epo-update",rules:"init"})},10),e.data("epo_loaded",!0))}),Yt&&e.trigger(r),te.trigger("epo-after-init",{epo:t})}function Dt(t){var e=requestAnimationFrame(function(t){Dt(t)}),a=t.variations_form,i=a.data("bound"),o=t.is_associated?"tc_variation_form.cpf":"wc_variation_form.cpf";i&&(cancelAnimationFrame(e),Ot(t),a.trigger(o))}function Nt(t,e,i,o,r){var n=a.extend(!0,{},t),c=o.attr("data-product-id"),l=o.attr("data-epo-id"),d=".tm-product-id-"+c,s="[data-epo-id='"+l+"']",p="p"+c+"e"+l;t.isManual=!0,a.tcepo.formSubmitEvents[p]=[],a.tcepo.errorObject[p]=!1,a.tcepo.initialActivation[p]=!1,t.product_id=c,t.product_id_selector=d,t.epo_id=l,t.epo_id_selector=s,t.epoEventId=p,t.noEpoUpdate=!0,rt(),r.find(".tm-collapse").tmtoggle(),r.find(".tm-section-link").tmsectionpoplink(),At(e),Ct(e),nt(e),ct(o.find(".tm-color-picker")),k(o),F(o),w(o),a.tcToolTip(e.find(".tm-tooltip")),zt(t,e,i),t.noEpoUpdate=!1,i.trigger({type:"tm-epo-update",norules:2}),setTimeout(function(){t.main_cart.trigger({type:"tm-epo-update",epoObject:n,norules:1})},200),j(i,e)}function Bt(e,i,o,r,n,c){var l,d,s,p,m,_,f,u,g,h=!1,v=!1,y=!1,b=void 0!==o,x=!1,C=a(".variation_form_section .variations-table").length>0,I=!1;return!!(e=a(e)).is(".tc-init")||(ae=i?e:a(t),te.trigger("tm-epo-init-start"),b||e.is(".product")&&(x=!0,b=Kt.find(Jt.epoSelector).length),b||"no"!==Rt.tm_epo_enable_final_total_box_all||e.is(".tm-no-options-composite")?(x&&(te.trigger("tm-epo-init-no-options"),!e.is(".product")||e.is(".tm-no-options-pxq")||e.is(".tm-no-options-composite")||(e=Kt)),o||((d=e.find(Jt.addToCartSelector).last()).length>0?o=d.val():(d=a(".tc-totals-form.tm-totals-form-main"),o=d.attr("data-product-id")),o||(o="")),r||(r=parseInt(e.find("input.tm-epo-counter").last().val(),10),Number.isFinite(r)||(r="")),s=".tm-product-id-"+o,p="[data-epo-id='"+r+"']",m=a(".tc-extra-product-options"+s+p),_=a(".tc-totals-form"+s+p),f=a(".tc-epo-totals"+s+p),g=e.find(".variations_form").first(),l="p"+o+"e"+r,g&&g.attr("data-product_id")&&g.attr("data-product_id")!==o&&(g=e.find(".variations_form[data-product_id='"+o+"']")),0===(h=D(e,e,"form",o)).length&&(e.is(".tc-shortcode-wrap")?h=D(_,_,".tc-totals-form",o):e.is(".tc-epo-element-product-container")&&(0===(h=e.find(Jt.associatedEpoCart)).length&&0===(h=m.parent(Jt.associatedEpoSelector)).length&&(h=e.find(".tc-epo-element-product-container-right")),I=!0)),I&&0===g.length&&e.is(".variations_form")&&(g=e),a.tcepo.formSubmitEvents[l]=[],a.tcepo.errorObject[l]=!1,a.tcepo.initialActivation[l]=!1,h.find(Jt.epoSelector).length>0&&(v=!0),h.find(".tc-totals-form").length>0&&(y=!0),y||(a.tcepo.formSubmitEvents[l][a.tcepo.formSubmitEvents[l].length]={trigger:function(){return!0},on_true:function(){var t=a(".tc-totals-form.tm-product-id-"+o+"[data-epo-id='"+r+"']").tcClone(),e=a('<div class="tm-hidden tm-formepo-normal"></div>');return h.find(".tm-formepo-normal").remove(),e.append(t),h.append(e),!0},on_false:function(){setTimeout(function(){a(".tm-formepo").remove()},100)}}),v||(a.tcepo.formSubmitEvents[l][a.tcepo.formSubmitEvents[l].length]={trigger:function(){return!0},on_true:function(){var t=a(Jt.epoSelector+".tm-product-id-"+o+"[data-epo-id='"+r+"']").tcClone(),e=a('<div class="tm-hidden tm-formepo"></div>');return h.find(".tm-formepo").remove(),e.append(t),h.append(e),!0},on_false:function(){setTimeout(function(){a(".tm-formepo").remove()},100)}}),u={main_product:e,main_cart:h,epo_id:r,form:O(e),main_epo_inside_form:v,product_id_selector:s,epo_id_selector:p,product_id:o,this_epo_container:m,this_totals_container:_,this_epo_totals_container:f,qtySelector:Jt.qtySelector,manualInitEPO:Nt,epoEventId:l,variations_form:g,has_epo:b,is_quickview:i,is_associated:I,is_epo_shortcode:m.is(".tc-shortcode"),mainEpoObject:c,associated_connect:n,noEpoUpdate:!0},a(u.form).data("epo_object",u),h.data("product_id",o).data("epo_id",r).data("product_id_selector",s).data("epo_id_selector",p),pt(u),st(u),At(m),Ct(m),B(),a.tcToolTip(m.find(".tm-tooltip")),m.find(".tm-collapse").tmtoggle(),m.find(".tm-section-link").tmsectionpoplink(),g.length>0?(f.data("price",!1),C?Dt(u):Ot(u)):(setTimeout(function(){k(m),F(m),w(m),a.tcepo.lateFieldsPrices[l]=[],zt(u),dt(u),kt(u),te.trigger("epo-after-init-in-timeout",{epo:u}),h.trigger("tm-epo-check-dpd"),u.noEpoUpdate=!1,h.trigger({type:"tm-epo-update",rules:"init"})},20),te.trigger("epo-after-init",{epo:u})),rt(),nt(m),ct(m.find(".tm-color-picker")),mt(u),Ft(u),I||(H(f,i,h),qt(u),L(e,u,a.tcepo.oneOptionIsSelected[l])),te.on("cpflogicdone",function(){ot(u)}),te.trigger("tm-epo-init-end",{epo:u}),u):void te.trigger("tm-epo-init-end-no-options"))}function Ht(t){var e=a(t),i=e.attr("data-product-id"),o=e.attr("data-epo-id"),r=e.parent();r.is("form")||(r=e.closest("form")).is("form")||(r=e.parent()),Bt(r,!1,i,o)}function Lt(){var e,i;"no"===Rt.tm_epo_no_lazy_load&&a.extend(a.lazyLoadXT,{autoInit:!1,selector:"img.tmlazy",srcAttr:"data-original",visibleOnly:!1,updateEvent:a.lazyLoadXT.updateEvent+" tmlazy"}),(e=a(".tm-no-options-pxq, .tm-no-options-composite")).length>0&&e.each(function(t,e){Bt(a(e),!1)});try{(i=a(Jt.epoSelector).not(Jt.associatedEpoSelector+" "+Jt.epoSelector+", .tm-no-options-pxq, .tm-no-options-composite, .wc-product-table "+Jt.epoSelector)).length>0&&i.each(function(){var t=a(this),e=t.attr("data-product-id"),i=t.attr("data-epo-id"),o=!1,r=a(Jt.addToCartSelector+"[value='"+e+"']").closest("form,.cart").first().parent();r.length<=0&&(r=a(Jt.tcAddToCartSelector+"[value='"+e+"']").closest("form,.cart").first().parent()).length<=0&&((r=t.closest("form,.cart").first().parent(".tm-has-options")).length<=0&&t.is(".tc-shortcode")&&(r=t.wrap('<div class="tc-shortcode-wrap tc-wrap-'+i+'"></div>'),r=t.parent()),r.length>0&&(o=!0,t.closest("form,.cart").first().append(a('<input name="add-to-cart" value="'+e+'" type="hidden" />')),t.closest("form,.cart").first().append(a('<input type="hidden" value="" class="variation_id" name="variation_id">')))),r.length>0&&(r.is("form")&&(r=r.parent()),Bt(r,o,e,i))})}catch(e){t.console.log(e),Mt=e}}var Mt,Ut,Jt={},Rt=t.TMEPOJS,Qt=t.wp,Zt=t.TMEPOQTRANSLATEXJS,Wt=t.noUiSlider,$t=t.ClipboardEvent,Xt=t.DataTransfer,Gt=[],Vt=!1,Yt=!1,Kt=a("body"),te=a(t),ee=a(e),ae=a(t),ie=t.tcmexp;Rt&&Qt&&(a.lazyLoadXT&&a.extend(a.lazyLoadXT,{autoInit:!1,updateEvent:a.lazyLoadXT.updateEvent+" tmlazy"}),Jt.localInputDecimalSeparator=""===Rt.tm_epo_global_input_decimal_separator?Rt.currency_format_decimal_sep:a.epoAPI.locale.getSystemDecimalSeparator(),Jt.localDecimalSeparator=""===Rt.tm_epo_global_displayed_decimal_separator?Rt.currency_format_decimal_sep:a.epoAPI.locale.getSystemDecimalSeparator(),Jt.localThousandSeparator=""===Rt.tm_epo_global_displayed_decimal_separator?Rt.currency_format_thousand_sep:a.epoAPI.locale.getSystemDecimalSeparator(),Jt.epoDelay=Rt.tm_epo_start_animation_delay?Rt.tm_epo_start_animation_delay:t.tc_epo_delay?t.tc_epo_delay:500,Jt.epoAnimationDelay=Rt.tm_epo_animation_delay?Rt.tm_epo_start_animation_delay:t.tc_epo_animation_delay?t.tc_epo_animation_delay:500,Jt.getElementFromFieldCache=[],Jt.epoSelector=".tc-extra-product-options",Jt.associatedEpoSelector=".tc-extra-product-options-inline",Jt.associatedEpoCart=".tc-epo-element-product-container-cart",Jt.addToCartSelector="input[name='add-to-cart']",Jt.tcAddToCartSelector="input.tc-add-to-cart",Jt.qtySelector="input.qty,input[name='quantity'],select.qty,.drop-down-button #qty,.plus-minus-button #qty,.slider-input #amount",Jt.associateQtySelector="input.tm-qty-alt",Jt.addToCartButtonSelector=".add_to_cart_button, .single_add_to_cart_button",Jt.compositeSelector=".bto_item,.component",Jt.nativeProductPriceSelector=".woocommerce div.product p.price",Jt.associatedNativeProductPriceSelector=".product-price span.price",Jt.templateEngine=a.epoAPI.applyFilter("tc_adjust_templateEngine",{price:Qt.template("tc-price"),sale_price:Qt.template("tc-sale-price"),tc_chars_remanining:Qt.template("tc-chars-remanining"),tc_final_totals:Qt.template("tc-final-totals"),tc_floating_box:Qt.template("tc-floating-box"),tc_floating_box_nks:Qt.template("tc-floating-box-nks"),tc_formatted_price:Qt.template("tc-formatted-price"),tc_formatted_sale_price:Qt.template("tc-formatted-sale-price"),tc_lightbox:Qt.template("tc-lightbox"),tc_lightbox_zoom:Qt.template("tc-lightbox-zoom"),tc_section_pop_link:Qt.template("tc-section-pop-link"),tc_upload_messages:Qt.template("tc-upload-messages")}),a.tcAPI=function(){return Jt},a.tcAPIGet=function(t){return Jt[t]},a.tcAPISet=function(t,e){Jt[t]=e},a.tc_validator&&a.extend(a.tc_validator.messages,{required:Rt.tm_epo_global_validator_messages.required,email:Rt.tm_epo_global_validator_messages.email,url:Rt.tm_epo_global_validator_messages.url,number:Rt.tm_epo_global_validator_messages.number,digits:Rt.tm_epo_global_validator_messages.digits,maxlengthsingle:a.tc_validator.format(Rt.tm_epo_global_validator_messages.maxlengthsingle),maxlength:a.tc_validator.format(Rt.tm_epo_global_validator_messages.maxlength),minlengthsingle:a.tc_validator.format(Rt.tm_epo_global_validator_messages.minlengthsingle),minlength:a.tc_validator.format(Rt.tm_epo_global_validator_messages.minlength),max:a.tc_validator.format(Rt.tm_epo_global_validator_messages.max),min:a.tc_validator.format(Rt.tm_epo_global_validator_messages.min),step:a.tc_validator.format(Rt.tm_epo_global_validator_messages.step),lettersonly:a.tc_validator.format(Rt.tm_epo_global_validator_messages.lettersonly),lettersspaceonly:a.tc_validator.format(Rt.tm_epo_global_validator_messages.lettersspaceonly),alphanumeric:a.tc_validator.format(Rt.tm_epo_global_validator_messages.alphanumeric),alphanumericunicode:a.tc_validator.format(Rt.tm_epo_global_validator_messages.alphanumericunicode),alphanumericunicodespace:a.tc_validator.format(Rt.tm_epo_global_validator_messages.alphanumericunicodespace)}),a.tc_validator&&(a.tc_validator.addMethod("alphanumeric",function(t,e){return this.optional(e)||/^[a-zA-Z0-9.-]+$/i.test(t)},a.tc_validator.messages.alphanumeric),a.tc_validator.addMethod("lettersonly",function(t,e){return this.optional(e)||/^[a-z]+$/i.test(t)},a.tc_validator.messages.lettersonly),a.tc_validator.addMethod("lettersspaceonly",function(t,e){return this.optional(e)||/^[a-z,\u0020]+$/i.test(t)},a.tc_validator.messages.lettersspaceonly),a.tc_validator.addMethod("alphanumericunicode",function(t,e){return this.optional(e)||/^[\u0030-\u0039\u0041-\u005A\u0061-\u007A\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF\u0100-\u0148\u014A-\u017F\u0180-\u01BF\u01C4-\u024F\u1E02-\u1EF3\u0370-\u03FF\u0400-\u04FF\u3040-\u309f\u30a0-\u30ff\u4e00-\u9faf\u3400-\u4dbf]+$/i.test(t)},a.tc_validator.messages.alphanumericunicode),a.tc_validator.addMethod("alphanumericunicodespace",function(t,e){return this.optional(e)||/^[\u0030-\u0039\u0041-\u005A\u0061-\u007A\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF\u0100-\u0148\u014A-\u017F\u0180-\u01BF\u01C4-\u024F\u1E02-\u1EF3\u0370-\u03FF\u0400-\u04FF\u3040-\u309f\u30a0-\u30ff\u4e00-\u9faf\u3400-\u4dbf,\u0020]+$/i.test(t)},a.tc_validator.messages.alphanumericunicodespace)),a.epoAPI.util.escapeSelector=function(){var t=/([!"$%&'()*+,/:;<=>?@[\]^`{|}~])/g;return function(e){return e.replace(t,"\\$1")}}(),a.epoAPI.util.unformat=function(t){var e=a.epoAPI.math.unformat(t,Jt.localInputDecimalSeparator),i=parseFloat(e);return Number.isFinite(i)?i:e},a.epoAPI.util.parseParams=function(t,e){return"string"!=typeof t||void 0===t.split?[]:t.split("&").map(function(t){var a={};return!0===e&&(t=decodeURIComponent(t)),(t=t.split("=").map(function(t){var e=t.split("?");return e.length>1?e[1]:t})).length>1&&(a[t[0]]=t[1]),a}).filter(function(t){return null!==t}).reduce(function(t,e){return Object.assign({},t,e)},{})},a.tmempty||(a.tmempty=function(t){var e=1===[void 0,null,!1,0,"","0"].filter(function(e){return t===e}).length,a=!1;return"object"==typeof t?a=0===Object.keys(t).filter(function(e){return t.hasOwnProperty(e)}).length:e||a}),a.tmType||(a.tmType=function(t){return Object.prototype.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}),a.is_on_screen||(a.fn.is_on_screen=function(){var e=a(t),i=a.epoAPI.dom.scroll(),o=this.offset(),r={top:i.top,left:i.left};return r.right=r.left+e.width(),r.bottom=r.top+e.height(),o.right=o.left+this.outerWidth(),o.bottom=o.top+this.outerHeight(),!(r.right<o.left||r.left>o.right||r.bottom<o.top||r.top>o.bottom)}),a().tmtoggle||(a.fn.tmtoggle=function(){var e=this,i=!1,o=0;if(0!==e.length)return e.each(function(){var t,e,r,n=a(this);if(!n.data("tm-toggle-init")){if(n.data("tm-toggle-init",1),t=n.find(".tm-toggle"),e=n.find(".tm-collapse-wrap"),r=a(".tm-collapse.tmaccordion").find(".tm-toggle"),0===t.length||0===e.length)return;e.is(".closed")?(a(e).removeClass("closed open").addClass("closed").hide(),a(t).find(".tm-arrow").removeClass("tcfa-angle-down tcfa-angle-up").addClass("tcfa-angle-down")):(a(e).removeClass("closed open").addClass("open").show(),a(t).find(".tm-arrow").removeClass("tcfa-angle-down tcfa-angle-up").addClass("tcfa-angle-up"),i=!0),t.each(function(t,i){a(i).on("closewrap.tmtoggle",function(){n.is(".tmaccordion")&&a(e).is(".closed")||(a(e).removeClass("closed open").addClass("closed"),a(this).find(".tm-arrow").removeClass("tcfa-angle-down tcfa-angle-up").addClass("tcfa-angle-down"),a(e).removeClass("tm-animated fadeIn"),n.is(".tmaccordion"),a(e).animate({height:"toggle"},100,function(){a(e).hide()}),te.trigger("tmlazy"))}),a(i).on("openwrap.tmtoggle",function(){n.is(".tmaccordion")&&a(r).not(a(this)).trigger("closewrap.tmtoggle"),a(e).removeClass("closed open").addClass("open"),a(this).find(".tm-arrow").removeClass("tcfa-angle-down tcfa-angle-up").addClass("tcfa-angle-up"),a(e).show().removeClass("tm-animated fadeIn").addClass("tm-animated fadeIn"),setTimeout(function(){te.trigger("tmlazy")},200),o&&n.is(".tmaccordion")&&!n.is_on_screen()&&te.tcScrollTo(a(i))}),a(i).on("click.tmtoggle",function(t){t.preventDefault(),a(e).is(".closed")?a(this).trigger("openwrap.tmtoggle"):a(this).trigger("closewrap.tmtoggle")}),a(i).find(".tm-qty").closest(".cpf_hide_element").find(".tm-epo-field").on("change.cpf",function(){a(i).trigger("openwrap.tmtoggle")})})}}),void 0===t.tc_accordion_closed_on_page_load&&!i&&e.filter(".tmaccordion").length>0&&e.filter(".tmaccordion").first().find(".tm-toggle").trigger("openwrap.tmtoggle"),o=1,e}),a().tmpoplink||(a.fn.tmpoplink=function(){var t,e=this;if(0!==e.length)return t=function(t){return a.epoAPI.template.html(Qt.template("tc-cart-options-popup"),{title:t.title,id:t.id,html:t.html,close:Rt.i18n_close})},e.each(function(){var e,i,o,r,n=a(this);n.is(".tc-poplink")||(n.addClass("tc-poplink"),e=a(this).attr("href"),i=a(this).attr("data-title"),o=a(e).html(),i||(i=Rt.i18n_addition_options),r=t({id:"temp_for_floatbox_insert",html:o,title:i}),n.on("click.tmpoplink",function(t){a.tcFloatBox({fps:1,ismodal:!1,refresh:100,width:"80%",height:"80%",classname:"flasho tm_wrapper",data:r}),t.preventDefault()}))})}),(Ut=function(t,e,a){return this.this_epo_totals_container=t,this.is_quickview=e,this.main_cart=a,!(e||!Rt.floating_totals_box||"disable"===Rt.floating_totals_box||!a||!t.length)&&(this.init(),this)}).prototype={constructor:Ut,onUpdate:function(){var t,e,i=this.this_epo_totals_container.data("tm-html"),o=this.this_epo_totals_container.data("tm-floating-box-data"),r=[];o&&o.length&&a.each(o,function(t,e){""===e.title&&(e.title="&nbsp;"),""===e.value&&(e.value="&nbsp;"),e.title?(e.title=a("<div>"+e.title+"</div>"),e.title.find("span").remove(),e.title=e.title.html()):e.title="&nbsp;",this.is_nks&&(""!==e.label_show&&(e.title=""),""!==e.value_show&&(e.value="")),r.push({label_show:e.label_show,value_show:e.value_show,title:e.title,value:e.value,quantity:e.quantity,price:c(e.price,this.this_epo_totals_container,!0,!1)})}),i&&""!==i||this.is_nks||(i="",this.floatingBox.hide()),r&&!r.length&&r.push({label_show:"hidden",value_show:"hidden",title:"",value:"",quantity:0,price:0}),t=a.epoAPI.template.html(this.engineTemplate,{html_before:Rt.floating_totals_box_html_before,html_after:Rt.floating_totals_box_html_after,option_label:Rt.i18n_option_label,option_value:Rt.i18n_option_value,option_qty:Rt.i18n_option_qty,option_price:Rt.i18n_option_price,values:r,totals:i}),this.floatingBox.html(t),this.onUpdateScroll(),"yes"===Rt.floating_totals_box_add_button&&(e=this.main_cart.find(Jt.addToCartButtonSelector).first()).tcClone().addClass("tc-add-to-cart-button").on("click",function(){e.trigger("click")}).appendTo(this.floatingBox)},onUpdateScroll:function(){"always"!==Rt.floating_totals_box_visibility?te.scrollTop()>a.epoAPI.math.toFloat(Rt.floating_totals_box_pixels)||this.is_nks_alt?this.floatingBox.is(":hidden")&&!this.floatingBox.is(":empty")||this.is_nks_alt?!1===this.is_nks?this.floatingBox.fadeIn():this.floatingBox.show():!this.floatingBox.is(":hidden")&&this.floatingBox.is(":empty")&&(!1===this.is_nks?this.floatingBox.fadeOut():this.floatingBox.hide()):this.floatingBox.is(":hidden")||(!1===this.is_nks?this.floatingBox.fadeOut():this.floatingBox.hide()):this.floatingBox.show()},addEvents:function(){this.onUpdate(),this.main_cart.on("tm-epo-after-update",this.onUpdate.bind(this)),!1===this.is_nks&&te.on("scroll",this.onUpdateScroll.bind(this))},init:function(){this.floatingBox=a('<div class="tm-floating-box '+Rt.floating_totals_box+'"></div>'),this.nks_selector=a(".tm-floating-box-nks").first(),this.alt_selector=a(".tm-floating-box-alt").first(),this.engineTemplate=Jt.templateEngine.tc_floating_box,this.is_nks=!1,this.is_nks_alt=!1,this.nks_selector.length>0?(this.is_nks=!0,this.floatingBox.removeClass("top left right bottom").appendTo(this.nks_selector).show()):this.alt_selector.length>0?this.floatingBox.removeClass("top left right bottom").appendTo(this.alt_selector).hide():this.floatingBox.appendTo("body").hide(),(this.nks_selector.length>0||this.alt_selector.length>0)&&(this.is_nks_alt=!0,this.engineTemplate=Jt.templateEngine.tc_floating_box_nks),this.addEvents()}},a.tcFloatingTotalsBox=function(t,e,a){var i=!1;return t&&t.length&&void 0===t.data("tcfloatingtotalsbox")&&(i=new Ut(t,e,a),t.data("tcfloatingtotalsbox",i)),i},a.tc_product_image={},a.tc_product_image_store={},a.tc_replace_object_values=function(t,e){return Object.keys(t).forEach(function(a){Object.keys(t[a]).forEach(function(i){void 0!==e[a]&&void 0!==e[a][i]&&e[a].hasOwnProperty(i)&&(t[a][i]=e[a][i])})}),t},a.tc_maybe_copy_object_values=function(t,e){return Object.keys(e).forEach(function(a){Object.keys(e[a]).forEach(function(i){void 0===e[a]||!e[a].hasOwnProperty(i)||void 0===e[a][i]||void 0!==t[a]&&void 0!==t[a][i]||(void 0===t[a]&&(t[a]={}),t[a][i]=e[a][i])})}),t},a.tc_pre_populate_store=function(){var t={};return t[0]={},t[1]={},t[2]={},t[3]={},t[0].src="",t[0].srcset="",t[0].sizes="",t[0].title="",t[0].alt="",t[0]["data-src"]="",t[0]["data-large_image"]="",t[0]["data-large_image_width"]="",t[0]["data-large_image_height"]="",t[1]["data-thumb"]="",t[2].src="",t[3].href="",t[3].title="",t},a.tc_populate_store=function(t,e){var a=e.find(".flex-control-nav li:eq(0) img"),i=e.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),o=t,r=t.closest("a"),n={};return n[0]={},n[1]={},n[2]={},n[3]={},n[0].src=o.attr("src"),n[0].srcset=o.attr("srcset"),n[0].sizes=o.attr("sizes"),n[0].title=o.attr("title"),n[0].alt=o.attr("alt"),n[0]["data-src"]=o.attr("data-src"),n[0]["data-large_image"]=o.attr("data-large_image"),n[0]["data-large_image_width"]=o.attr("data-large_image_width"),n[0]["data-large_image_height"]=o.attr("data-large_image_height"),n[1]["data-thumb"]=i.attr("data-thumb"),n[2].src=a.attr("src"),n[3].href=r.attr("href"),n[3].title=r.attr("title"),n},a.tc_maybe_copy_object_values_from_img=function(t,e,i){var o,r,n=i.find(".flex-control-nav li:eq(0) img"),c=[["src","srcset","sizes","title","alt","data-src","data-large_image","data-large_image_width","data-large_image_height","large-image"],["data-thumb"],["src"],["href","title"]];return[e,i.find(".woocommerce-product-gallery__wrapper ").find(".woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),n,e.closest("a")].forEach(function(e,i){void 0!==e&&void 0!==e[0]&&(o=e[0].attributes,a.each(o,function(){this.specified&&(r=this.name,-1!==a.inArray(r,c[i])&&(void 0===t[i]||void 0!==t[i]&&void 0===t[i][r])&&(void 0===t[i]&&(t[i]={}),t[i][r]=this.value))}))}),t},a.fn.tc_set_attr=function(t,e,i){void 0===i&&(i=0),(void 0===a.tc_product_image[i]||void 0!==a.tc_product_image[i]&&void 0===a.tc_product_image[i][t])&&(void 0===a.tc_product_image[i]&&(a.tc_product_image[i]={}),a.tc_product_image[i][t]="",this.attr(t)&&(a.tc_product_image[i][t]=this.attr(t))),!1===e?this.removeAttr(t):this.attr(t,e)},a.fn.tc_reset_attr=function(t,e){void 0===e&&(e=0),void 0!==a.tc_product_image[e]&&(void 0!==a.tc_product_image[e][t]&&this.attr(t,a.tc_product_image[e][t]),delete a.tc_product_image[e][t])},a.fn.tc_update_attr=function(t,e){void 0===e&&(e=0),void 0!==a.tc_product_image[e]&&(a.tc_product_image[e][t]=this.attr(t))},a.fn.tc_image_update=function(t,e){var i,o,r,n,c=a(t),l=this,d=a(e),s=l.data("epo_object"),p=s.main_product.closest("#product-"+s.product_id),m=p;p.length<=0&&(m=s.main_product.closest(".post-"+s.product_id)),c.is("select")&&(c=c.children("option:selected")),i=c.data("image-variations"),r=(o=""!==Rt.tm_epo_global_product_image_selector?a(Rt.tm_epo_global_product_image_selector):m.find("a.woocommerce-main-image img, img.woocommerce-main-image,a img").not(".thumbnails img,.product_list_widget img,img.emoji,a.woocommerce-product-gallery__trigger img").first()).closest("a"),o.length>1&&(o=o.first()),c&&i&&d.length>0?(d.removeAttr("data-o_src").removeAttr("data-o_title").removeAttr("data-o_alt").removeAttr("data-o_srcset").removeAttr("data-o_sizes").removeAttr("srcset").removeAttr("sizes"),n=i.imagep,i.imagep.image_link||(n=i.image),d.attr("title",n.image_title),d.attr("alt",n.image_alt),n.image_srcset&&d.attr("srcset",n.image_srcset),n.image_sizes&&d.attr("sizes",n.image_sizes),o.tc_set_attr("title",n.image_title),o.tc_set_attr("alt",n.image_alt),o.tc_set_attr("data-large-image",n.image_link),o.data.wc27_zoom_target&&(o.data.wc27_zoom_target.tc_set_attr("data-thumb",n.image_link),m.find(".flex-control-nav li:eq(0) img").tc_set_attr("src",n.image_link)),r.tc_set_attr("href",n.image_link),r.tc_set_attr("title",n.image_caption)):(o.tc_reset_attr("title"),o.tc_reset_attr("alt"),o.tc_reset_attr("data-large-image"),o.data.wc27_zoom_target&&(o.data.wc27_zoom_target.tc_reset_attr("data-thumb"),m.find(".flex-control-nav li:eq(0) img").tc_reset_attr("src")),r.tc_reset_attr("href"),r.tc_reset_attr("title"))},a.fn.tm_find_matching_variations=function(t,e){var i,o,r=[];if(t)for(i=0;i<t.length;i+=1)o=t[i],a.fn.tm_variations_match(o.attributes,e)&&r.push(o);return r},a.fn.tm_variations_match=function(t,e){var a,i,o=!0;return Object.keys(t).forEach(function(r){t.hasOwnProperty(r)&&(a=t[r],i=e[r],void 0!==a&&void 0!==i&&0!==a.length&&0!==i.length&&a!==i&&(o=!1))}),o},a().tclightbox||(a.fn.tclightbox=function(){var t=this;if(0!==t.length)return t.each(function(){var t,e,i,o,r,n,c=a(this);c.is(".tcinit")||(t=c.attr("src")||c.attr("data-original"),i=(e=c.closest("label")).closest(".tmcp-field-wrap").find(".tm-epo-field[id='"+e.attr("for")+"']"),(t=i.attr("data-imagel")||i.attr("data-imagep")||i.attr("data-image")||t)&&(c.addClass("tcinit").before(a.epoAPI.template.html(Jt.templateEngine.tc_lightbox,{})),o=c.prev(),c.wrap("<div class='tc-lightbox-image-wrap'/>"),c.after(o),r=o.find(".tc-lightbox-button"),(n=new Image).src=t,n.onload=function(){r.addClass("tcinit").on("click.tclightbox",function(e){var i,o;a(".tc-closing.tc-lightbox").length>0||(i=a.epoAPI.dom.size(),o=a("<img>").addClass("tc-lightbox-img").attr("src",t).css("maxHeight",i.visibleHeight+"px").css("maxWidth",i.visibleWidth+"px"),a.tcFloatBox({fps:1,ismodal:!1,refresh:"fixed",width:"auto",height:"auto",top:"0%",left:"0%",classname:"flasho tc-lightbox",animateIn:"tc-lightbox-zoomIn",animateOut:"tc-lightbox-zoomOut",data:a.epoAPI.template.html(Jt.templateEngine.tc_lightbox_zoom,{img:o[0].outerHTML}),zIndex:102001,cancelClass:".tc-lightbox-img, .tc-lightbox-button-close",unique:!0}),e.preventDefault())})}))})},ee.ready(function(){a(".tc-lightbox-image").not(".tm-extra-product-options-variations .radio_image").tclightbox()})),a().tmsectionpoplink||(a.fn.tmsectionpoplink=function(){var t=this;if(0!==t.length)return t.each(function(){var t,e,i,o,r,n,c=a(this);c.data("tmsectionpoplink")||(c.data("tmsectionpoplink",!0),t=c.attr("data-sectionid"),e=Rt.i18n_addition_options,i=c.closest(".cpf-section[data-uniqid='"+t+"']"),o=!1,r=a('<div class="fl-overlay"></div>').css({zIndex:parseInt(c.zIndex,10)-1,opacity:.8}),n=function(){var t=a("#tm-section-pop-up");t.parents().removeClass("noanimated"),r.unbind().remove(),t.after(i),t.remove(),i.find(".tm-section-link").show(),i.find(".tm-section-pop").hide()},c.attr("data-title")&&(e=c.attr("data-title")),c.on("click.tmsectionpoplink",function(t){var c;t.preventDefault(),o=!1,r.appendTo("body").on("click",n),i.before(a.epoAPI.template.html(Jt.templateEngine.tc_section_pop_link,{title:e,close:Rt.i18n_close})),(c=a("#tm-section-pop-up")).find(".float_editbox").prepend(i),i.find(".tm-section-link").hide(),i.find(".tm-section-pop").show(),c.parents().addClass("noanimated"),c.find(".floatbox-cancel").on("click",function(){o||(o=!0,n())}),te.trigger("tmlazy"),te.trigger("tmsectionpoplink")}))})}),a().cpfdependson||(a.fn.cpfdependson=function(t,e,i,o){var r=this,n=0;if(0!==r.length&&"object"==typeof t)return e||(e="show"),i||(i="all"),a.each(t,function(e,i){var r,c;if("object"!=typeof t)return!0;(r=l(i.element))&&r.length>0&&(r.each(function(t,e){var i,r,n=a(e),l="change.cpflogic";c||(i=".tm-product-id-"+n.closest(".tc-extra-product-options").attr("data-product-id"),r="[data-epo-id='"+n.closest(".tc-extra-product-options").attr("data-epo-id")+"']",c=a(".tc-extra-product-options"+i+r)),e&&n.length>0&&(!n.data("tmhaslogicevents")||o)&&(n.is(".tm-epo-variation-element")?(f("found_variation.tmlogic",!1,function(t){w(c),te.trigger("tm-do-epo-update")}),f("hide_variation.tmlogic",!1,function(){w(c),te.trigger("tm-do-epo-update")})):((n.is(":text")||n.is("textarea"))&&(l="change.cpflogic input.cpflogic"),n.off(l).on(l,function(){w(c)})),n.data("tmhaslogicevents",1))}),n=parseInt(n,10)+1)}),r.each(function(){var o=a(this),r=!1;switch(o.data("matches",n).data("toggle",e).data("what",i).data("fields",t),e){case"show":r=!1;break;case"hide":r=!0}r?o.removeClass("tc-hidden"):o.addClass("tc-hidden"),o.data("isactive",r)}),r.addClass("iscpfdependson").data("iscpfdependson",1),r.each(function(){a(this).addClass("is-epo-depend")})},a.fn.run_cpfdependson=function(){w()}),a.tcepo={formSubmitEvents:{},oneOptionIsSelected:{},initialActivation:{},lateFieldsPrices:{},errorObject:{}},a.tcepo.tm_init_epo=function(t,e,a,i){Bt(t,e,a,i)},te.on("tc_manual_init",function(t,e){Ht(e)}),ee.ready(function(){Jt=a.epoAPI.applyFilter("tc_api",Jt),te.on("lazyLoadXToncomplete",function(){a(".tm-owl-slider").each(function(){a(this).trigger("refresh.owl.carousel")})}),te.on("tc_init_epo_plugin",function(t){Lt()}),te.on("tcShowLastError",function(){t.console.log(Mt)}),a.ajaxPrefilter(function(t,e){var i,o,r,n,c,l,d,s,p,m,_,f=!1;if("yes"===Rt.tm_epo_enable_in_shop&&(i=t.url.split("?"))&&i.length>=1&&(i=i[1])){for(o=i.split("&"),r=0;r<o.length;r+=1)(n=o[r].split("=")).length>=1&&n[0]&&n[1]&&"wc-ajax"===n[0]&&"add_to_cart"===n[1]&&(f=!0);f&&(t.originalsuccess=t.success,t.success=function(i){i&&i.error&&i.product_url?((c=a(".ajax_add_to_cart[data-product_id='"+e.data.product_id+"']")).removeClass("added"),c.removeClass("loading")):t.originalsuccess.call(null,i)})}e.data&&(l=e.data,"string"==typeof e.data&&(l=a.epoAPI.util.parseParams(e.data)),d=[],e.url&&e.url.indexOf&&(d=a.epoAPI.util.parseParams(e.url.slice(e.url.indexOf("?")+1))),"quantity"in l&&(l.product_id||l["add-to-cart"]||d.product_id||d["add-to-cart"]||l.tcaddtocart)&&(s=l.product_id||l["add-to-cart"]||d.product_id||d["add-to-cart"]||l.tcaddtocart,1===(p=a(".tc-extra-product-options.tm-product-id-"+s)).length&&(_={tcajax:1,tcaddtocart:s,cpf_product_price:a(".tc-totals-form.tm-product-id-"+s).find(".cpf-product-price").val()},(m=a(".tc-totals-form.tm-product-id-"+s).find(".tc_form_prefix").val())&&(_.tc_form_prefix=m),t.data=t.data+"&"+a.param(a.extend(p.tcSerializeObject(),_),!1))))}),ee.ajaxSuccess(function(t,e,i){var o,r,n,c,l,d,s,p=Rt.quickview_array||"null",m=Rt.quickview_container||"null",_={};a(".tm-cart-link").tmpoplink(),p=a.epoAPI.util.parseJSON(p),m=a.epoAPI.util.parseJSON(m);for(o in m)m.hasOwnProperty(o)&&(_[m[o][0]]=a(m[o][1]));a.extend(p,_),Object.keys(p).forEach(function(t){l=!1,r=a(p[t]),"woodmart_quick_shop"===t&&"woodmart_quick_shop"===(s=a.epoAPI.util.parseParams(i.url)).action&&(d=a(a.epoAPI.util.escapeSelector(p[t]+".post-"+s.id))).length&&(r=d,l=!0),"woodmart_quick_view"===t&&"woodmart_quick_view"===(s=a.epoAPI.util.parseParams(i.url)).action&&(d=a(a.epoAPI.util.escapeSelector(p[t]+".post-"+s.id))).length&&(r=d,l=!0),"quickview_pro"===t&&(s=i.url.split("/")).length&&(d=a(a.epoAPI.util.escapeSelector(p[t]+" .post-"+s[s.length-1]))).length&&(r=d,l=!0),"wp_food"===t&&(l=!0),"woofood"===t&&i.data&&"woofood_quickview_ajax"===(s=a.epoAPI.util.parseParams(i.data)).action&&(d=d=r.find("form").parent()).length&&(r=d,l=!0),"yith_quick_view_plugin"!==t&&r.length&&(r.find(".product").length>0||l)&&(r.removeClass("tc-init"),"wp_food"!==t&&"woodmart_quick_shop"!==t&&"fwoodmart_quick_view"!==t&&"lightboxpro"!==t&&"jckqv_quick_view"!==t&&"yith_quick_view_plugin"!==t&&"theme_flatsome"!==t||(Yt=!0),n=(Vt=r).find(Jt.epoSelector).attr("data-product-id"),c=Vt.find(Jt.epoSelector).attr("data-epo-id"),"woodmart_quick_shop"===t&&r.addClass("has-options"),Jt.getElementFromFieldCache=[],Bt(Vt,!0,n,c),te.trigger("tmlazy"),te.trigger("tm_epo_loaded_quickview"),a.jMaskGlobals&&Vt.find(a.jMaskGlobals.maskElements).each(function(){var t=a(this);t.attr("data-mask")&&t.mask(t.attr("data-mask"))}))})}),Lt(),a(".tm-cart-link").tmpoplink(),Kt.on("updated_checkout",function(){a(".tm-cart-link").tmpoplink()}),te.trigger("tmlazy"),te.trigger("tm_epo_loaded")}),ee.ready(function(){ee.on("click",".quantity .jckqv-qty-spinner, .quantity .ui-spinner-button",function(){a(this).closest(".quantity").find("input.qty").trigger("change")}),Kt.on("sober_quickview_opened",function(){var t,e;t=(Vt=a("#quick-view-modal")).find(Jt.epoSelector).attr("data-product-id"),e=Vt.find(Jt.epoSelector).attr("data-epo-id"),Bt(Vt,!0,t,e),te.trigger("tmlazy"),te.trigger("tm_epo_loaded_quickview"),a.jMaskGlobals&&Vt.find(a.jMaskGlobals.maskElements).each(function(){var t=a(this);t.attr("data-mask")&&t.mask(t.attr("data-mask"))})}),a("#wholesale_form").on("submit",function(){var t=a("form.cart").find(Jt.addToCartSelector).val(),e=a(Jt.epoSelector+".tm-cart-main[data-product-id='"+t+"']").tcClone(),i=a(".tm-totals-form-main[data-product-id='"+t+"']").tcClone(),o=a("<div class='tm-hidden tm-formepo'></div>");return o.append(e),o.append(i),a(this).append(o),!0}),ee.on("click","#add_to_quote",function(t){var e,i,o;Rt&&"yes"===Rt.tm_epo_global_enable_validation&&(e=a(this).parents("form"),i=e.find(".tm-epo-counter").val(),o=a(Jt.epoSelector+"[data-epo-id='"+i+"']"),e.length>0&&o.length>0&&!e.tc_validate().form())&&t.stopImmediatePropagation()}),a(".single_add_to_cart_button.paypal_checkout_button").on("click",function(t){var e=a(".cart");e.data("tc_validator")&&e.data("tc_validator").errorList&&t.stopImmediatePropagation()}),a(".wc-product-table").on("init.wcpt",function(e,i){i.$table.find(Jt.epoSelector).addClass("hidden"),i.$table.find("thead tr").append("<th>&nbsp;</th>"),setTimeout(function(){i.$table.find(".cart:not(.cart_group)").each(function(){var e=a(this).find(Jt.epoSelector),i=e.closest("tr");a("<td class='wc-product-table-epo'></td>").appendTo(i).append(e),a(t).trigger("tc_manual_init",e),e.removeClass("hidden")})},500)})}))}(window,document,window.jQuery);