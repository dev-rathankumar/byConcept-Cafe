!function(t){"use strict";var i=function(i,o){return this.targets=t(i),this.settings=t.extend({},t.fn.tcToolTip.defaults,o),this.targets.length>0&&(this.init(),this)};i.prototype={constructor:i,removeTooltip:function(i,o,a){var e=this.settings;i.data("is_moving")||(o.removeClass(e.fadin).addClass(e.fadeout),o.animate({opacity:0},e.speed,function(){t(this).remove()}),i.data("tmtip-title")&&void 0===i.data("tm-tip-html")&&!i.attr("data-tm-tooltip-html")&&i.attr("title",i.data("tmtip-title")),t(window).off("scroll.tcToolTip resize.tcToolTip"))},initTooltip:function(i,o,a){var e,l,s,d,n,m=this.settings;i&&o&&1===i.length&&1===o.length&&1===i.data("tm-has-tm-tip")&&(1===a&&(e=void 0!==i.data("tm-tip-html")?i.data("tm-tip-html"):i.attr("data-tm-tooltip-html")?i.attr("data-tm-tooltip-html"):i.attr("title"),o.html(e),i.data("is_moving",!0)),o.find("aside").hide(),t(window).width()<1.5*o.outerWidth()?o.css("max-width",t(window).width()/2):o.css("max-width",340),o.find("aside").show(),l=t.epoAPI.dom.scroll(),s=i.offset().left+i.outerWidth()/2-o.outerWidth()/2,d=i.offset().top-o.outerHeight()-10,n=i.offset().top-l.top-o.outerHeight()-10,s<0?(s=i.offset().left+i.outerWidth()/2-20,o.addClass("left")):o.removeClass("left"),s+o.outerWidth()>t(window).width()?(s=i.offset().left-o.outerWidth()+i.outerWidth()/2+20,o.addClass("right")):o.removeClass("right"),d<0||n<0?(d=i.offset().top+i.outerHeight(),o.addClass("top")):o.removeClass("top"),t(window).trigger("tm_tooltip_show"),a?(o.css({left:s,top:d}),i.data("is_moving",!1)):o.css({left:s,top:d}).removeClass(m.fadeout).addClass(m.fadin))},show:function(i){var o,a,e;if(!i.data("is_moving"))return 1===i.data("tm-has-tm-tip")&&(void 0!==i.data("tm-tip-html")?(a=i.data("tm-tip-html"),i.attr("title")&&i.data("tmtip-title",i.attr("title")),i.removeAttr("title")):i.attr("data-tm-tooltip-html")?(a=i.attr("data-tm-tooltip-html"),i.attr("title")&&i.data("tmtip-title",i.attr("title")),i.removeAttr("title")):a=i.attr("title"),void 0!==a&&(t("#tm-tooltip").remove(),(o=t('<div id="tm-tooltip" class="tm-tip tm-animated"></div>')).css("opacity",0).html(a).appendTo("body"),(e=o.find("img")).length>0&&e.on("load",this.initTooltip.bind(this,i,o)),this.initTooltip(i,o),t(window).on("scroll.tcToolTip resize.tcToolTip",this.initTooltip.bind(this,i,o)),i.data("is_moving",!1),i.on("tmmovetooltip",this.initTooltip.bind(this,i,o,1)),i.on("mouseleave tmhidetooltip",this.removeTooltip.bind(this,i,o,a)),i.closest("label").on("mouseleave tmhidetooltip",this.removeTooltip.bind(this,i,o,a)),o.on("click",this.removeTooltip.bind(this,i,o,a)))),!1},init:function(){var i=this;this.targets.length>0&&this.targets.toArray().forEach(function(o){var a,e,l,s,d,n,m,r,h,p,c,f,g,u,v;void 0===(a=t(o)).data("tm-has-tm-tip")&&(e=a.attr("data-tm-tooltip-swatch"),l=a.attr("data-tm-tooltip-swatch-desc"),s=a.attr("data-tm-tooltip-swatch-lbl-desc"),d=a.attr("data-tm-tooltip-swatch-img"),n=a.attr("data-tm-tooltip-swatch-img-lbl"),m=a.attr("data-tm-tooltip-swatch-img-desc"),r=a.attr("data-tm-tooltip-swatch-img-lbl-desc"),a.data("tm-has-tm-tip",1),g=void 0!==a.attr("data-original")?a.attr("data-original"):void 0!==a.attr("src")?a.attr("src"):a[0].src,0===(p=a.closest(".tmcp-field-wrap")).length&&(p=a.closest(".cpf_hide_element")),0===p.length&&(p=a.closest(".cpf-section").find(".tc-section-inner-wrap")),0===(u=p.find(".checkbox-image-label,.radio-image-label,.tm-tip-html")).length&&(u=p.next(".checkbox-image-label,.radio-image-label,.tm-tip-html")),u=t(p=u),v="yes"===a.attr("data-tm-hide-label")||void 0===a.attr("data-tm-hide-label")||u.is(".tm-tip-html"),f="",0===(c=(c=a.closest(".tmcp-field-wrap")).find("[data-tm-tooltip-html]")).length?(c=a.closest(".tmcp-field-wrap").find(".tc-inline-description")).length>0&&(f=c.html()):f=c.attr("data-tm-tooltip-html"),e?h=u.html():l?h="<aside>"+f+"</aside>":s?h="<aside>"+u.html()+"</aside><aside>"+f+"</aside>":d?h='<img src="'+g+'">':n?h='<img src="'+g+'"><aside>'+u.html()+"</aside>":m?h='<img src="'+g+'"><aside>'+f+"</aside>":r&&(h='<img src="'+g+'"><aside>'+u.html()+"</aside><aside>"+f+"</aside>"),void 0!==h&&(a.data("tm-tip-html",h),v&&u.hide()),h=a.attr("data-tm-tooltip-html")?a.attr("data-tm-tooltip-html"):a.attr("title"),a.on("tc-tooltip-html-changed",function(){a.attr("data-tm-tooltip-html")?a.show():a.hide()}),a.closest("label").on("mouseenter tmshowtooltip",i.show.bind(i,a)),a.on("mouseenter tmshowtooltip",i.show.bind(i,a)))})}},t.fn.tcToolTip=function(o){var a,e,l,s=t(this),d=s.map(function(){return t(this).data("tctooltip")||""}).get().some(function(t){return""===t});return l="object"==typeof o?o:{},d&&(e=new i(this,l),s.data("tctooltip",e)),"string"==typeof o&&(a=e[o].apply(e,[])),void 0===a?s:a},t.fn.tcToolTip.defaults={fadin:"fadeIn",fadeout:"fadeout",speed:1500},t.fn.tcToolTip.instances=[],t.fn.tcToolTip.Constructor=i,t.tcToolTip=function(o,a){var e=!1;return o=o||t(".tm-tooltip"),o.map(function(){return t(this).data("tctooltip")||""}).get().some(function(t){return""===t})&&(e=new i(o,a),o.data("tctooltip",e)),e}}(window.jQuery);