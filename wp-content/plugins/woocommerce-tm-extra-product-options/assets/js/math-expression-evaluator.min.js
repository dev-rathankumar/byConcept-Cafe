!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).tcmexp=t()}}(function(){return function t(e,n,a){function o(u,p){if(!n[u]){if(!e[u]){var s="function"==typeof require&&require;if(!p&&s)return s(u,!0);if(h)return h(u,!0);var r=new Error("Cannot find module '"+u+"'");throw r.code="MODULE_NOT_FOUND",r}var i=n[u]={exports:{}};e[u][0].call(i.exports,function(t){var n=e[u][1][t];return o(n||t)},i,i.exports,t,e,n,a)}return n[u].exports}for(var h="function"==typeof require&&require,u=0;u<a.length;u++)o(a[u]);return o}({1:[function(t,e,n){var a=t("./postfix_evaluator.js");a.prototype.formulaEval=function(){"use strict";for(var t,e,n,a=[],o=this.value,h=0;h<o.length;h++)1===o[h].type||3===o[h].type?a.push({value:3===o[h].type?o[h].show:o[h].value,type:1}):13===o[h].type?a.push({value:o[h].show,type:1}):0===o[h].type?a[a.length-1]={value:o[h].show+("-"!=o[h].show?"(":"")+a[a.length-1].value+("-"!=o[h].show?")":""),type:0}:7===o[h].type?a[a.length-1]={value:(1!=a[a.length-1].type?"(":"")+a[a.length-1].value+(1!=a[a.length-1].type?")":"")+o[h].show,type:7}:10===o[h].type?(t=a.pop(),e=a.pop(),"P"===o[h].show||"C"===o[h].show?a.push({value:"<sup>"+e.value+"</sup>"+o[h].show+"<sub>"+t.value+"</sub>",type:10}):a.push({value:(1!=e.type?"(":"")+e.value+(1!=e.type?")":"")+"<sup>"+t.value+"</sup>",type:1})):2===o[h].type||9===o[h].type?(t=a.pop(),e=a.pop(),a.push({value:(1!=e.type?"(":"")+e.value+(1!=e.type?")":"")+o[h].show+(1!=t.type?"(":"")+t.value+(1!=t.type?")":""),type:o[h].type})):12===o[h].type&&(t=a.pop(),e=a.pop(),n=a.pop(),a.push({value:o[h].show+"("+n.value+","+e.value+","+t.value+")",type:12}));return a[0].value},e.exports=a},{"./postfix_evaluator.js":5}],2:[function(t,e,n){function a(t,e){for(var n=0;n<t.length;n++)t[n]+=e;return t}function o(t,e,n,a){for(var o=0;o<a;o++)if(t[n+o]!==e[o])return!1;return!0}var h=t("./math_function.js"),u=["ceil","floor","abs","exp","sqrt","sin","cos","tan","pi","(",")","P","C","asin","acos","atan","7","8","9","int","cosh","acosh","ln","^","root","4","5","6","/","!","tanh","atanh","Mod","1","2","3","*","sinh","asinh","e","log","0",".","+","-",",","Sigma","n","Pi","pow"],p=["ceil","floor","abs","exp","sqrt","sin","cos","tan","&pi;","(",")","P","C","asin","acos","atan","7","8","9","Int","cosh","acosh"," ln","^","root","4","5","6","&divide;","!","tanh","atanh"," Mod ","1","2","3","&times;","sinh","asinh","e"," log","0",".","+","-",",","&Sigma;","n","&Pi;","pow"],s=[Math.ceil,Math.floor,Math.abs,Math.exp,Math.sqrt,h.math.sin,h.math.cos,h.math.tan,"PI","(",")",h.math.P,h.math.C,h.math.asin,h.math.acos,h.math.atan,"7","8","9",Math.floor,h.math.cosh,h.math.acosh,Math.log,Math.pow,Math.sqrt,"4","5","6",h.math.div,h.math.fact,h.math.tanh,h.math.atanh,h.math.mod,"1","2","3",h.math.mul,h.math.sinh,h.math.asinh,"E",h.math.log,"0",".",h.math.add,h.math.sub,",",h.math.sigma,"n",h.math.Pi,Math.pow],r=[[],["1","2","3","7","8","9","4","5","6","+","-","*","/","(",")","^","!","P","C","e","0",".",",","n"],["pi","ln","Pi"],["ceil","floor","abs","exp","sqrt"],["sin","cos","tan","Del","int","Mod","log","pow"],["asin","acos","atan","cosh","root","tanh","sinh"],["acosh","atanh","asinh","Sigma"]],i=[0,0,0,0,0,0,0,0,3,4,5,10,10,0,0,0,1,1,1,0,0,0,0,10,0,1,1,1,2,7,0,0,2,1,1,1,2,0,0,3,0,1,6,9,9,11,12,13,12,8],l={0:11,1:0,2:3,3:0,4:0,5:0,6:0,7:11,8:11,9:1,10:10,11:0,12:11,13:0},f={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,9:!0,12:!0,13:!0},v={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0},c={0:!0,3:!0,4:!0,8:!0,12:!0,13:!0},y={},g={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,12:!0,13:!0},m={1:!0};h.addToken=function(t){for(var e=0;e<t.length;e++){var n=t[e].token.length,a=-1;if(n<r.length)for(var o=0;o<r[n].length;o++)if(t[e].token===r[n][o]){a=u.indexOf(r[n][o]);break}-1===a?(u.push(t[e].token),i.push(t[e].type),r.length<=t[e].token.length&&(r[t[e].token.length]=[]),r[t[e].token.length].push(t[e].token),s.push(t[e].value),p.push(t[e].show)):(u[a]=t[e].token,i[a]=t[e].type,s[a]=t[e].value,p[a]=t[e].show)}},h.lex=function(t,e){"use strict";var n,d,w,x,M={value:h.math.changeSign,type:0,pre:21,show:"-"},E={value:")",show:")",type:5,pre:0},P={value:"(",type:4,pre:0,show:"("},b=[P],D=[],k=t,q=0,j=f,C=0,I=y,N="";void 0!==e&&h.addToken(e);var O={};for(d=0;d<k.length;d++)if(" "!==k[d]){for(n="",w=k.length-d>r.length-2?r.length-1:k.length-d;w>0;w--)for(x=0;x<r[w].length;x++)o(k,r[w][x],d,w)&&(n=r[w][x],x=r[w].length,w=0);if(d+=n.length-1,""===n)throw new h.Exception("Can't understand after "+k.slice(d));var S,_=u.indexOf(n),R=n,T=i[_],F=s[_],U=l[T],L=p[_],W=b[b.length-1];for(S=D.length;S--&&0===D[S];)if(-1!==[0,2,3,5,9,11,12,13].indexOf(T)){if(!0!==j[T])throw new h.Exception(n+" is not allowed after "+N);b.push(E),j=v,I=g,a(D,-1).pop()}if(!0!==j[T])throw new h.Exception(n+" is not allowed after "+N);if(!0===I[T]&&(T=2,F=h.math.mul,L="&times;",U=3,d-=n.length),O={value:F,type:T,pre:U,show:L},0===T)j=f,I=y,a(D,2).push(2),b.push(O),b.push(P);else if(1===T)1===W.type?(W.value+=F,a(D,1)):b.push(O),j=v,I=c;else if(2===T)j=f,I=y,a(D,2),b.push(O);else if(3===T)b.push(O),j=v,I=g;else if(4===T)q+=D.length,D=[],C++,j=f,I=y,b.push(O);else if(5===T){if(!C)throw new h.Exception("Closing parenthesis are more than opening one, wait What!!!");for(;q--;)b.push(E);q=0,C--,j=v,I=g,b.push(O)}else if(6===T){if(W.hasDec)throw new h.Exception("Two decimals are not allowed in one number");1!==W.type&&(W={value:0,type:1,pre:0},b.push(W),a(D,-1)),j=m,a(D,1),I=y,W.value+=F,W.hasDec=!0}else 7===T&&(j=v,I=g,a(D,1),b.push(O));8===T?(j=f,I=y,a(D,4).push(4),b.push(O),b.push(P)):9===T?(9===W.type?W.value===h.math.add?(W.value=F,W.show=L,a(D,1)):W.value===h.math.sub&&"-"===L&&(W.value=h.math.add,W.show="+",a(D,1)):5!==W.type&&7!==W.type&&1!==W.type&&3!==W.type&&13!==W.type?"-"===R&&(j=f,I=y,a(D,2).push(2),b.push(M),b.push(P)):(b.push(O),a(D,2)),j=f,I=y):10===T?(j=f,I=y,a(D,2),b.push(O)):11===T?(j=f,I=y,b.push(O)):12===T?(j=f,I=y,a(D,6).push(6),b.push(O),b.push(P)):13===T&&(j=v,I=g,b.push(O)),a(D,-1),N=n}for(S=D.length;S--&&0===D[S];)b.push(E),a(D,-1).pop();if(!0!==j[5])throw new h.Exception("complete the expression");for(;C--;)b.push(E);return b.push(E),new h(b)},e.exports=h},{"./math_function.js":3}],3:[function(t,e,n){var a=function(t){this.value=t};a.math={isDegree:!0,acos:function(t){return a.math.isDegree?180/Math.PI*Math.acos(t):Math.acos(t)},add:function(t,e){return t+e},asin:function(t){return a.math.isDegree?180/Math.PI*Math.asin(t):Math.asin(t)},atan:function(t){return a.math.isDegree?180/Math.PI*Math.atan(t):Math.atan(t)},acosh:function(t){return Math.log(t+Math.sqrt(t*t-1))},asinh:function(t){return Math.log(t+Math.sqrt(t*t+1))},atanh:function(t){return Math.log((1+t)/(1-t))},C:function(t,e){var n=1,o=t-e,h=e;h<o&&(h=o,o=e);for(var u=h+1;u<=t;u++)n*=u;return n/a.math.fact(o)},changeSign:function(t){return-t},cos:function(t){return a.math.isDegree&&(t=a.math.toRadian(t)),Math.cos(t)},cosh:function(t){return(Math.pow(Math.E,t)+Math.pow(Math.E,-1*t))/2},div:function(t,e){return t/e},fact:function(t){if(t%1!=0)return"NaN";for(var e=1,n=2;n<=t;n++)e*=n;return e},inverse:function(t){return 1/t},log:function(t){return Math.log(t)/Math.log(10)},mod:function(t,e){return t%e},mul:function(t,e){return t*e},P:function(t,e){for(var n=1,a=Math.floor(t)-Math.floor(e)+1;a<=Math.floor(t);a++)n*=a;return n},Pi:function(t,e,n){for(var a=1,o=t;o<=e;o++)a*=Number(n.postfixEval({n:o}));return a},pow10x:function(t){for(var e=1;t--;)e*=10;return e},sigma:function(t,e,n){for(var a=0,o=t;o<=e;o++)a+=Number(n.postfixEval({n:o}));return a},sin:function(t){return a.math.isDegree&&(t=a.math.toRadian(t)),Math.sin(t)},sinh:function(t){return(Math.pow(Math.E,t)-Math.pow(Math.E,-1*t))/2},sub:function(t,e){return t-e},tan:function(t){return a.math.isDegree&&(t=a.math.toRadian(t)),Math.tan(t)},tanh:function(t){return a.sinha(t)/a.cosha(t)},toRadian:function(t){return t*Math.PI/180}},a.Exception=function(t){this.message=t},e.exports=a},{}],4:[function(t,e,n){var a=t("./lexer.js");a.prototype.toPostfix=function(){"use strict";for(var t,e,n,o,h,u=[],p=[{value:"(",type:4,pre:0}],s=this.value,r=1;r<s.length;r++)if(1===s[r].type||3===s[r].type||13===s[r].type)1===s[r].type&&(s[r].value=Number(s[r].value)),u.push(s[r]);else if(4===s[r].type)p.push(s[r]);else if(5===s[r].type)for(;4!==(e=p.pop()).type;)u.push(e);else if(11===s[r].type){for(;4!==(e=p.pop()).type;)u.push(e);p.push(e)}else{o=(t=s[r]).pre,n=(h=p[p.length-1]).pre;var i="Math.pow"==h.value&&"Math.pow"==t.value;if(o>n)p.push(t);else{for(;n>=o&&!i||i&&o<n;)e=p.pop(),h=p[p.length-1],u.push(e),n=h.pre,i="Math.pow"==t.value&&"Math.pow"==h.value;p.push(t)}}return new a(u)},e.exports=a},{"./lexer.js":2}],5:[function(t,e,n){var a=t("./postfix.js");a.prototype.postfixEval=function(t){"use strict";(t=t||{}).PI=Math.PI,t.E=Math.E;for(var e,n,o,h=[],u=this.value,p=void 0!==t.n,s=0;s<u.length;s++)1===u[s].type?h.push({value:u[s].value,type:1}):3===u[s].type?h.push({value:t[u[s].value],type:1}):0===u[s].type?void 0===h[h.length-1].type?h[h.length-1].value.push(u[s]):h[h.length-1].value=u[s].value(h[h.length-1].value):7===u[s].type?void 0===h[h.length-1].type?h[h.length-1].value.push(u[s]):h[h.length-1].value=u[s].value(h[h.length-1].value):8===u[s].type?(e=h.pop(),n=h.pop(),h.push({type:1,value:u[s].value(n.value,e.value)})):10===u[s].type?(e=h.pop(),void 0===(n=h.pop()).type?(n.value=n.concat(e),n.value.push(u[s]),h.push(n)):void 0===e.type?(e.unshift(n),e.push(u[s]),h.push(e)):h.push({type:1,value:u[s].value(n.value,e.value)})):2===u[s].type||9===u[s].type?(e=h.pop(),void 0===(n=h.pop()).type?(console.log(n),(n=n.concat(e)).push(u[s]),h.push(n)):void 0===e.type?(e.unshift(n),e.push(u[s]),h.push(e)):h.push({type:1,value:u[s].value(n.value,e.value)})):12===u[s].type?(void 0!==(e=h.pop()).type&&(e=[e]),n=h.pop(),o=h.pop(),h.push({type:1,value:u[s].value(o.value,n.value,new a(e))})):13===u[s].type&&(p?h.push({value:t[u[s].value],type:3}):h.push([u[s]]));if(h.length>1)throw new a.exception("Uncaught Syntax error");return h[0].value>1e15?"Infinity":parseFloat(h[0].value.toFixed(15))},a.eval=function(t,e,n){return void 0===e?this.lex(t).toPostfix().postfixEval():void 0===n?void 0!==e.length?this.lex(t,e).toPostfix().postfixEval():this.lex(t).toPostfix().postfixEval(e):this.lex(t,e).toPostfix().postfixEval(n)},e.exports=a},{"./postfix.js":4}]},{},[1])(1)});