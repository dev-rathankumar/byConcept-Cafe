"use strict";class MiniCart{miniCartTop(){$("#tbay-top-cart").hide(),$(".mini-cart.top, #tbay-top-cart .offcanvas-close").on("click",function(){$("#tbay-top-cart").slideToggle(500)})}miniCartBottom(){$(".mini-cart.bottom").on("click",function(t){$(".tbay-bottom-cart").toggleClass("active")}),$(".tbay-bottom-cart .offcanvas-close").on("click",function(){$(".tbay-bottom-cart").removeClass("active")})}miniCartAll(){jQuery(".dropdown-toggle").dropdown();var t=$(window),a=$(".tbay-dropdown-cart .dropdown-content,.tbay-bottom-cart .content,.topbar-mobile .btn,#tbay-mobile-menu, .active-mobile button,#tbay-offcanvas-main,.topbar-mobile .btn-toggle-canvas,#tbay-offcanvas-main .btn-toggle-canvas");t.on("click.Bst,click touchstart tap",function(t){0!=a.has(t.target).length||a.is(t.target)||($("#wrapper-container").removeClass("active active-cart"),$("#wrapper-container").removeClass("offcanvas-right"),$("#wrapper-container").removeClass("offcanvas-left"),$(".tbay-dropdown-cart").removeClass("active"),$("#tbay-offcanvas-main,.tbay-offcanvas").removeClass("active"),$("#tbay-dropdown-cart").hide(500),$(".tbay-bottom-cart").removeClass("active"))}),$("#tbay-offcanvas-main .btn-toggle-canvas").on("click",function(){$("#tbay-offcanvas-main").removeClass("active")}),$(".mini-cart.v2").on("click",function(t){$("#wrapper-container").toggleClass("active-cart"),$("#wrapper-container").toggleClass(t.currentTarget.dataset.offcanvas),$(".tbay-dropdown-cart").toggleClass("active")}),$(".tbay-dropdown-cart.v2 .offcanvas-close").on("click",function(){$("#wrapper-container").removeClass("active"),$("#wrapper-container").removeClass("offcanvas-right"),$("#wrapper-container").removeClass("offcanvas-left"),$(".tbay-dropdown-cart").removeClass("active")})}}const ADDING_TO_CART_EVENT="adding_to_cart",ADDED_TO_CART_EVENT="added_to_cart",LOADMORE_AJAX_HOME_PAGE="puca_more_post_ajax",LOADMORE_AJAX_SHOP_PAGE="puca_pagination_more_post_ajax",LIST_POST_AJAX_SHOP_PAGE="puca_list_post_ajax",GRID_POST_AJAX_SHOP_PAGE="puca_grid_post_ajax";class AjaxCart{constructor(){switch(this.ajaxCartPosition=puca_settings.cart_position,this.ajaxCartPosition){case"popup":this._initAjaxPopupOrTopCart("popup");break;case"top":this._initAjaxPopupOrTopCart("top");break;case"bottom":this._initAjaxCartBottom(),this._initAjaxSingleCart();break;case"left":this._initAjaxCartLeftOrRight("left"),this._initAjaxSingleCart();break;case"right":this._initAjaxCartLeftOrRight("right"),this._initAjaxSingleCart()}MiniCart.prototype.miniCartAll(),this._initEventRemoveProduct()}_initAjaxPopupOrTopCart(t){var a=null,o=null;jQuery(`.ajax_cart_${t}`).on("adding_to_cart",(t,e,i)=>{a=i;if("undefined"==a.product_id)return;o=a.product_id}),jQuery(`.ajax_cart_${t}`).on("added_to_cart",function(){if(a&&null!=a){$("#tbay-cart-modal").modal();var t=puca_settings.ajaxurl+"?action=puca_add_to_cart_product&product_id="+o;$.get(t,function(t,a){$("#tbay-cart-modal .modal-body .modal-body-content").html(t)}),$("#tbay-cart-modal").on("hidden.bs.modal",function(){$(this).find(".modal-body .modal-body-content").empty()})}}),"top"==t&&MiniCart.prototype.miniCartTop()}_initAjaxSingleCart(){puca_settings.ajax_single_add_to_cart&&$(document).on("click",".single_add_to_cart_button",function(t){if(!($(this).closest("form.cart").find('input[name="puca_buy_now"]').length>0&&"1"===$(this).closest("form.cart").find('input[name="puca_buy_now"]').val())){let d=$(this),u=d.closest("form.cart");if(!(u.hasClass("grouped_form")||0==u.find("input[name=quantity]").length||d.parents("#yith-quick-view-content").length>0)){var a=d.val(),o=u.find("input[name=quantity]").val()||1,e=u.find("input[name=product_id]").val()||a,i=$(this).closest(".variations_form"),n=0,c={};if(e&&!d.is(".disabled")){if(i.length>0){n=i.find("input[name=variation_id]").val(),e=i.find("input[name=product_id]").val();var e=i.find("input[name=product_id]").val(),r=(i.find("input[name=quantity]").val(),!0);let t=i.find("select[name^=attribute]");if(t.length||(t=i.find("[name^=attribute]:checked")),t.length||(t=i.find("input[name^=attribute]")),t.each(function(){var t,a,o=$(this),e=o.attr("name"),i=o.val();o.removeClass("error"),0===i.length?(t=e.lastIndexOf("_"),a=e.substring(t+1),o.addClass("required error").before('<div class="ajaxerrors"><p>Please select '+a+"</p></div>"),r=!1):c[e]=i}),!r)return!1}t.preventDefault();var s={action:"woocommerce_ajax_add_to_cart",product_id:e,product_sku:"",quantity:o,variation_id:n,variation:c};return $(document.body).trigger("adding_to_cart",[d,s]),$.ajax({type:"post",url:wc_add_to_cart_params.ajax_url,data:s,beforeSend:function(t){d.removeClass("added").addClass("loading")},complete:function(t){d.addClass("added").removeClass("loading")},success:function(t){if($.each(t.fragments,function(t,a){$(t).replaceWith(a)}),t.error&t.product_url)return void(window.location=t.product_url);$(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,d]),$(".woocommerce-notices-wrapper").empty().append(t.notices),$(".tbay-dropdown-cart").addClass("active")}}),!1}}}})}_initAjaxCartBottom(){jQuery(".ajax_cart_bottom").on("added_to_cart",function(){$(".tbay-bottom-cart").addClass("active")}),MiniCart.prototype.miniCartBottom()}_initAjaxCartLeftOrRight(t){jQuery(`.ajax_cart_${t}`).on("added_to_cart",function(){$(".tbay-dropdown-cart").addClass("active")})}_initEventRemoveProduct(){$(document).on("click",".mini_cart_content a.remove",t=>{this._onclickRemoveProduct(t)})}_onclickRemoveProduct(t){t.preventDefault();var a=$(t.currentTarget).attr("data-product_id"),o=$(t.currentTarget).attr("data-cart_item_key"),e=jQuery(t.currentTarget).parents(".mini_cart_item"),i=$(t.currentTarget).closest(".widget_shopping_cart_content");e.block({message:null,overlayCSS:{cursor:"none"}}),this._callRemoveProductAjax(a,o,i,t)}_callRemoveProductAjax(t,a,o,e){$.ajax({type:"POST",dataType:"json",url:wc_add_to_cart_params.ajax_url,data:{action:"product_remove",product_id:t,cart_item_key:a},beforeSend:function(){o.find(".mini_cart_content").append('<div class="ajax-loader-wapper"><div class="ajax-loader"></div></div>').fadeTo("slow",.3),e.stopPropagation()},success:a=>{this._onRemoveSuccess(a,t)}})}_onRemoveSuccess(t,a){if(t&&!t.error){var o=t.fragments;o&&$.each(o,function(t,a){$(t).replaceWith(a)}),$('.add_to_cart_button.added[data-product_id="'+a+'"]').removeClass("added").next(".wc-forward").remove()}}}class WishList{constructor(){this._onChangeWishListItem()}_onChangeWishListItem(){jQuery(document).on("added_to_wishlist removed_from_wishlist",()=>{var t=jQuery(".count_wishlist");$.ajax({url:yith_wcwl_l10n.ajax_url,data:{action:"yith_wcwl_update_wishlist_count"},dataType:"json",success:function(a){t.html(a.count)},beforeSend:function(){t.block()},complete:function(){t.unblock()}})})}}class ProductItem{initOnChangeQuantity(t){$(".plus, .minus").on("click",function(){var a=jQuery(this).closest(".quantity").find(".qty"),o=parseFloat(a.val()),e=a.data("max"),i=a.data("min"),n=a.data("step");o=o&&""!==o&&"NaN"!==o?o:0,e=""===e||"NaN"===e?"":e,i=""===i||"NaN"===i?0:i,n="any"===n||""===n||void 0===n||NaN===parseFloat(n)?1:n,$(this).is(".plus")?e&&(e==o||o>e)?a.val(e):a.val(o+parseFloat(n)):i&&(i==o||o<i)?a.val(i):o>0&&a.val(o-parseFloat(n)),t&&"function"==typeof t&&($(this).parent().find("input").trigger("change"),t())})}}class Cart{constructor(){this._initEventChangeQuantity(),$(document.body).on("updated_wc_div",()=>{this._initEventChangeQuantity();$(document.body).trigger("puca_load_more");woocs_refresh_mini_cart(200);"undefined"!=typeof wc_add_to_cart_variation_params&&$(".variations_form").each(function(){$(this).wc_variation_form()})})}_initEventChangeQuantity(){(new ProductItem).initOnChangeQuantity(()=>{$("body.woocommerce-cart [name='update_cart']").length>0&&($('.woocommerce-cart-form :input[name="update_cart"]').prop("disabled",!1),puca_settings.ajax_update_quantity&&$("[name='update_cart']").trigger("click"))})}}class Checkout{constructor(){this._toogleWoocommerceIcon()}_toogleWoocommerceIcon(){$(".woocommerce-info a").length<1||$(".woocommerce-info a").on("click",function(){$(this).find(".icons").toggleClass("icon-arrow-down").toggleClass("icon-arrow-up")})}}class SideBar{constructor(){this._layoutShopCanvasSidebar(),this._layoutShopFullWidth(),this._layoutSidebarMobile()}_layoutShopCanvasSidebar(){$(".button-canvas-sidebar, .product-canvas-sidebar .product-canvas-close").on("click",function(t){$(".product-canvas-sidebar").toggleClass("active"),$("body").toggleClass("product-canvas-active")});var t=$(window),a=$(".product-canvas-sidebar .content,.button-canvas-sidebar");t.on("click.Bst",t=>{t.target;0!=a.has(t.target).length||a.is(t.target)||($(".product-canvas-sidebar").removeClass("active"),$("body").removeClass("product-canvas-active"))})}_layoutSidebarMobile(){$(document).on("click",".puca-sidebar-mobile-btn",function(){$("body").toggleClass("show-sidebar")}),$(document).on("click",".close-side-widget, .puca-close-side",function(){$("body").removeClass("show-sidebar")})}_layoutShopFullWidth(){$(".button-product-top").on("click",function(t){$(".product-top-sidebar").toggleClass("active"),$(".product-top-sidebar > .container .content").slideToggle(500,function(){})})}}class LoadMore{constructor(){this._initLoadMoreOnHomePage(),this._initLoadMoreOnShopPage(),this._int_berocket_lmp_end()}_initLoadMoreOnHomePage(){var t=this;$(".more_products").each(function(){var a=$(this).data("id");$(`#more_products_${a} a[data-loadmore="true"]`).on("click",function(){var o=$(this);return t._callAjaxLoadMore({data:{action:"puca_more_post_ajax",paged:$(this).data("paged")+1,number:$(this).data("number"),columns:$(this).data("columns"),layout:$(this).data("layout"),type:$(this).data("type"),category:$(this).data("category"),screen_desktop:$(this).data("desktop"),screen_desktopsmall:$(this).data("desktopsmall"),screen_tablet:$(this).data("tablet"),screen_mobile:$(this).data("mobile")},event:o,id:a,thisItem:$(this).parent().parent()}),!1})})}_initLoadMoreOnShopPage(){$(".tbay-pagination-load-more").each(function(t){$('.tbay-pagination-load-more a[data-loadmore="true"]').on("click",function(){var t=$(this),a={action:LOADMORE_AJAX_SHOP_PAGE,query:puca_settings.posts,page:puca_settings.current_page};return $.ajax({url:woocommerce_params.ajax_url,data:a,type:"POST",beforeSend:function(a){t.addClass("active")},success:function(a){a?(t.closest("#content").find(".products > .row").append(a),puca_settings.current_page++,$(".woocommerce-product-gallery").each(function(){jQuery(this).wc_product_gallery()}),$(document.body).trigger("puca_load_more"),"undefined"!=typeof tawcvs_variation_swatches_form&&($(".variations_form").tawcvs_variation_swatches_form(),$(document.body).trigger("tawcvs_initialized")),"undefined"!=typeof wc_add_to_cart_variation_params&&$(".variations_form").each(function(){$(this).wc_variation_form().find(".variations select:eq(0)").trigger("change"),$(this).wc_variation_form()}),t.removeClass("active"),puca_settings.current_page==puca_settings.max_page&&t.remove()):t.remove()}}),!1})})}_callAjaxLoadMore(t){var a=this,o=t.data,e=t.event;$.ajax({type:"POST",dataType:"JSON",url:woocommerce_params.ajax_url,data:o,beforeSend:function(){e.addClass("active")},success:function(o){a._onAjaxSuccess(o,t)}})}_onAjaxSuccess(t,a){var o=a.data,e=a.event;0==t.check&&e.remove(),e.data("paged",o.paged),e.data("number",o.number+o.columns*("puca_more_post_ajax"===a.data.action?3:2)),("puca_more_post_ajax"===a.data.action?$(`.widget_products_${a.id} .products>.row`):$(".archive-shop .products >.row")).append(t.posts),$(".woocommerce-product-gallery").each(function(){jQuery(this).wc_product_gallery()}),$(document.body).trigger("puca_load_more"),"undefined"!=typeof wc_add_to_cart_variation_params&&$(".variations_form").each(function(){$(this).wc_variation_form()}),"undefined"!=typeof tawcvs_variation_swatches_form&&($(".variations_form").tawcvs_variation_swatches_form(),$(document.body).trigger("tawcvs_initialized")),e.find(".loadding").remove(),e.removeClass("active"),e.button("reset"),a.thisItem.removeAttr("style")}_int_berocket_lmp_end(){$(document).on("berocket_lmp_end",()=>{$(".woocommerce-product-gallery").each(function(){jQuery(this).wc_product_gallery()});$(document.body).trigger("puca_load_more");"undefined"!=typeof tawcvs_variation_swatches_form&&($(".variations_form").tawcvs_variation_swatches_form(),$(document.body).trigger("tawcvs_initialized"));"undefined"!=typeof wc_add_to_cart_variation_params&&$(".variations_form").each(function(){$(this).wc_variation_form().find(".variations select:eq(0)").trigger("change")})})}}class ModalVideo{constructor(t,a={classBtn:".tbay-modalButton",defaultW:640,defaultH:360}){this.$el=t,this.options=a,this._initVideoIframe()}_initVideoIframe(){$(`${this.options.classBtn}[data-target='${this.$el}']`).on("click",this._onClickModalBtn),$(this.$el).on("hidden.bs.modal",()=>{$(this.$el).find("iframe").html("").attr("src","")})}_onClickModalBtn(t){let a=$(t.currentTarget).data("target");var o=$(t.currentTarget).attr("data-tbayVideoFullscreen")||!1,e={src:$(t.currentTarget).attr("data-tbaySrc"),height:$(t.currentTarget).attr("data-tbayHeight")||this.options.defaultH,width:$(t.currentTarget).attr("data-tbayWidth")||this.options.defaultW};o&&(e.allowfullscreen=""),$(a).find("iframe").attr(e)}}class WooCommon{constructor(){this._pucaFixRemove(),this._pucaVideoModal()}_pucaFixRemove(){$(".tbay-gallery-varible .woocommerce-product-gallery__trigger").remove()}_pucaVideoModal(){$(".tbay-video-modal").each((t,a)=>{new ModalVideo(`#video-modal-${$(a).attr("data-id")}`)})}}class QuickView{constructor(){$(document).on("qv_loader_stop",()=>{(new ProductItem).initOnChangeQuantity()})}}class singleProduct{constructor(){this._initOnClickReview(),this._initBuyNow()}_initOnClickReview(){$("body").on("click","a.woocommerce-review-link",function(){$("#reviews").closest(".panel").find(".tabs-title a").hasClass("collapsed")&&$("#reviews").closest(".panel").find(".tabs-title a.collapsed").on("click")})}_initBuyNow(){$("body").on("click",".tbay-buy-now",function(t){t.preventDefault();let a=$(this).closest("form.cart"),o=a.find('[type="submit"]'),e=a.find('input[name="puca_buy_now"]');o.is(".disabled")?o.trigger("click"):(e.val("1"),a.find(".single_add_to_cart_button").click())}),$(document.body).on("check_variations",function(){$("form.variations_form").find('[type="submit"]').each(function(t){$(this).is(".disabled")?$(this).next(".tbay-buy-now").addClass("disabled"):$(this).next(".tbay-buy-now").removeClass("disabled")})})}}let tbay_setCookie2=(t,a,o)=>{var e=new Date;e.setTime(e.getTime()+24*o*60*60*1e3);var i="expires="+e.toUTCString();document.cookie=t+"="+a+"; "+i+";path=/"},tbay_getCookie2=t=>{var a=t+"=";var o=decodeURIComponent(document.cookie);var e=o.split(";");for(var i=0;i<e.length;i++){for(var n=e[i];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(a))return n.substring(a.length,n.length)}return""};class DisplayMode{constructor(){this._initModeListShopPage(),this._initModeGridShopPage(),$(document.body).on("displayMode",()=>{this._initModeListShopPage();this._initModeGridShopPage()})}_initModeListShopPage(){$(".display-mode button.list").each(function(t){$(this).on("click",function(){if(!$(this).hasClass("active")){var t=$(this),a={action:"puca_list_post_ajax",query:puca_settings.posts};return $.ajax({url:puca_settings.ajaxurl,data:a,type:"POST",beforeSend:function(a){t.closest("#content").find(".products").addClass("load-ajax")},success:function(a){if(a){t.parent().children().removeClass("active"),t.addClass("active"),t.closest("#content").find(".products > div").html(a);let o=t.closest("#content").find("div.products");o.addClass("products-list").removeClass("products-grid").fadeIn(300),$(".woocommerce-product-gallery").each(function(){jQuery(this).wc_product_gallery()}),$(document.body).trigger("puca_load_more"),"undefined"!=typeof tawcvs_variation_swatches_form&&($(".variations_form").tawcvs_variation_swatches_form(),$(document.body).trigger("tawcvs_initialized")),"undefined"!=typeof wc_add_to_cart_variation_params&&$(".variations_form").each(function(){$(this).wc_variation_form().find(".variations select:eq(0)").trigger("change")}),t.closest("#content").find(".products").removeClass("load-ajax"),tbay_setCookie2("display_mode","list",.1)}}}),!1}})})}_initModeGridShopPage(){$(".display-mode button.grid").each(function(t){$(this).on("click",function(){if(!$(this).hasClass("active")){var t=$(this),a={action:"puca_grid_post_ajax",query:puca_settings.posts};return $.ajax({url:puca_settings.ajaxurl,data:a,type:"POST",beforeSend:function(a){t.closest("#content").find(".products").addClass("load-ajax")},success:function(a){if(a){t.parent().children().removeClass("active"),t.addClass("active"),t.closest("#content").find(".products > div").html(a);let o=t.closest("#content").find("div.products");o.addClass("products-grid").removeClass("products-list").fadeIn(300),$(".woocommerce-product-gallery").each(function(){jQuery(this).wc_product_gallery()}),$(document.body).trigger("puca_load_more"),"undefined"!=typeof tawcvs_variation_swatches_form&&($(".variations_form").tawcvs_variation_swatches_form(),$(document.body).trigger("tawcvs_initialized")),"undefined"!=typeof wc_add_to_cart_variation_params&&$(".variations_form").each(function(){$(this).wc_variation_form().find(".variations select:eq(0)").trigger("change")}),o.removeClass("load-ajax"),tbay_setCookie2("display_mode","grid",.1)}}}),!1}})})}_getDisplayMode(){if("list"==puca_settings.display_mode?tbay_setCookie2("display_mode","list",.1):"grid"==puca_settings.display_mode&&tbay_setCookie2("display_mode","grid",.1),void 0!=tbay_getCookie2("display_mode")&&""!==tbay_getCookie2("display_mode")){if("grid"==tbay_getCookie2("display_mode")){let t=$(".display-mode").find("button.grid");t.parent().children().removeClass("active"),t.addClass("active"),$(".tbay-filter").parents("#content").find(".products").addClass("products-"+tbay_getCookie2("display_mode"))}if("list"==tbay_getCookie2("display_mode")){let t=$(".display-mode").find("button.list");t.parent().children().removeClass("active"),t.addClass("active"),$(".tbay-filter").parents("#content").find(".products").addClass("products-"+tbay_getCookie2("display_mode"))}}}}jQuery(document).ready(()=>{$(document.body).trigger("tawcvs_initialized");new AjaxCart,new singleProduct,new SideBar,new WishList,new Cart,new Checkout,new WooCommon,new LoadMore,new ModalVideo("#productvideo"),new QuickView,new DisplayMode});
